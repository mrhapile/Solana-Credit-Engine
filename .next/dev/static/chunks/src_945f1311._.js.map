{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/lib/solana.ts"],"sourcesContent":["\nimport { Connection } from '@solana/web3.js';\n\nconst RPC_URL = process.env.NEXT_PUBLIC_SOLANA_RPC_URL;\n\nif (!RPC_URL) {\n    throw new Error(\n        \"NEXT_PUBLIC_SOLANA_RPC_URL is not defined. Add it to .env.local\"\n    );\n}\n\n// Log RPC URL initialization (masked)\nconsole.log(\"Initializing RPC Connection to:\", RPC_URL.replace(/(\\?|&)(api-key|key)=[^&]*/, \"$1key=***\"));\n\nexport function getConnection() {\n    return new Connection(RPC_URL!, {\n        commitment: \"confirmed\",\n        // Disable automatic fetch helper that might strip params? No, default is fine.\n        // Some libraries like Anchor might need a provider, but we are passing connection directly.\n    });\n}\n"],"names":[],"mappings":";;;;AAGgB;AAFhB;;AAEA,MAAM;AAEN;;AAMA,sCAAsC;AACtC,QAAQ,GAAG,CAAC,mCAAmC,QAAQ,OAAO,CAAC,6BAA6B;AAErF,SAAS;IACZ,OAAO,IAAI,yLAAU,CAAC,SAAU;QAC5B,YAAY;IAGhB;AACJ"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/lib/prices.ts"],"sourcesContent":["\nexport interface PriceData {\n    [mint: string]: number;\n}\n\nconst PRICE_API = \"https://api.jup.ag/price/v2?ids=\";\n\nexport async function fetchTokenPrices(mints: string[]): Promise<PriceData> {\n    if (mints.length === 0) return {};\n\n    try {\n        const response = await fetch(`${PRICE_API}${mints.join(\",\")}`);\n        const json = await response.json();\n\n        // Validate response structure\n        if (!json.data) return {};\n\n        const prices: PriceData = {};\n        for (const mint of mints) {\n            if (json.data[mint]) {\n                prices[mint] = parseFloat(json.data[mint].price);\n            }\n        }\n        return prices;\n    } catch (error) {\n        console.error(\"Failed to fetch prices:\", error);\n        return {};\n    }\n}\n"],"names":[],"mappings":";;;;AAKA,MAAM,YAAY;AAEX,eAAe,iBAAiB,KAAe;IAClD,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,CAAC;IAEhC,IAAI;QACA,MAAM,WAAW,MAAM,MAAM,GAAG,YAAY,MAAM,IAAI,CAAC,MAAM;QAC7D,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,8BAA8B;QAC9B,IAAI,CAAC,KAAK,IAAI,EAAE,OAAO,CAAC;QAExB,MAAM,SAAoB,CAAC;QAC3B,KAAK,MAAM,QAAQ,MAAO;YACtB,IAAI,KAAK,IAAI,CAAC,KAAK,EAAE;gBACjB,MAAM,CAAC,KAAK,GAAG,WAAW,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK;YACnD;QACJ;QACA,OAAO;IACX,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,CAAC;IACZ;AACJ"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/constants.ts"],"sourcesContent":["\nexport const DEFAULT_COMPUTE_UNITS = 1_400_000;\nexport const DEFAULT_PRIORITY_FEE = 1000; // Micro-lamports\nexport const SIMULATION_RETRY_DELAY = 1000;\nexport const MAX_CONFIRMATION_ATTEMPTS = 60; // 60 seconds roughly\nexport const CONFIRMATION_POLL_INTERVAL = 1000;\n\n// Hardcoded for now, but should be fetched via getMint\nexport const SOL_DECIMALS = 9;\nexport const USDC_DECIMALS = 6;\n\nexport const USDC_MINT = \"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v\";\nexport const SOL_MINT = \"So11111111111111111111111111111111111111112\";\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACO,MAAM,wBAAwB;AAC9B,MAAM,uBAAuB,MAAM,iBAAiB;AACpD,MAAM,yBAAyB;AAC/B,MAAM,4BAA4B,IAAI,qBAAqB;AAC3D,MAAM,6BAA6B;AAGnC,MAAM,eAAe;AACrB,MAAM,gBAAgB;AAEtB,MAAM,YAAY;AAClB,MAAM,WAAW"}},
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/hooks/usePosition.tsx"],"sourcesContent":["\nimport { useEffect, useState } from \"react\";\nimport { getCurrentPosition } from \"@jup-ag/lend/borrow\";\nimport { getConnection } from \"@/lib/solana\";\nimport { fetchTokenPrices } from \"@/lib/prices\";\nimport { SOL_MINT, USDC_MINT } from \"@/engine/constants\";\nimport BN from \"bn.js\";\n\ntype PositionState = {\n  tick: number;\n  tickId: number;\n  colRaw: BN;\n  finalAmount: BN;\n  debtRaw: BN;\n  dustDebtRaw: BN;\n  isSupplyOnlyPosition: boolean;\n  userLiquidationStatus: boolean;\n  postLiquidationBranchId: number;\n} | null;\n\nexport function usePosition(vaultId: number, positionId: number) {\n  const [position, setPosition] = useState<PositionState>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [prices, setPrices] = useState<{ [key: string]: number }>({});\n\n  useEffect(() => {\n    async function fetchPosition() {\n      try {\n        if (!vaultId || !positionId) {\n          throw new Error(\"Invalid vaultId or positionId\");\n        }\n\n        setLoading(true);\n        setError(null);\n\n        // Fetch position\n        const data = await getCurrentPosition({\n          vaultId,\n          positionId,\n          connection: getConnection(),\n        });\n\n        // Fetch prices separately or together? \n        // The user's snippet in prompt only fetched position.\n        // But the rest of the hook uses prices.\n        // I should keep prices fetching. \n        const priceData = await fetchTokenPrices([SOL_MINT, USDC_MINT]);\n\n        console.log(\"Position loaded:\", data);\n        setPosition(data);\n        setPrices(priceData);\n      } catch (err: any) {\n        console.error(\"Position fetch error:\", err);\n        setError(err.message || \"Failed to load position\");\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchPosition();\n\n    // Set up interval for refreshing prices/position? \n    // The user requested a simple useEffect for now. I won't add polling here to keep it strictly as requested.\n  }, [vaultId, positionId]);\n\n  const solPrice = prices[SOL_MINT] || 0;\n  const usdcPrice = prices[USDC_MINT] || 1;\n\n  const formatted = position\n    ? {\n      collateralAmount: position.colRaw.toNumber() / 1_000_000_000,\n      debtAmount: position.debtRaw.toNumber() / 1_000_000,\n      solPrice,\n      collateralUSD: (position.colRaw.toNumber() / 1_000_000_000) * solPrice,\n      debtUSD: (position.debtRaw.toNumber() / 1_000_000) * usdcPrice,\n    }\n    : null;\n\n  return { position, formatted, loading, error };\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;;;;;;;AAeO,SAAS,YAAY,OAAe,EAAE,UAAkB;;IAC7D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAgB;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA4B,CAAC;IAEjE,IAAA,0KAAS;iCAAC;YACR,eAAe;gBACb,IAAI;oBACF,IAAI,CAAC,WAAW,CAAC,YAAY;wBAC3B,MAAM,IAAI,MAAM;oBAClB;oBAEA,WAAW;oBACX,SAAS;oBAET,iBAAiB;oBACjB,MAAM,OAAO,MAAM,IAAA,iPAAkB,EAAC;wBACpC;wBACA;wBACA,YAAY,IAAA,wIAAa;oBAC3B;oBAEA,wCAAwC;oBACxC,sDAAsD;oBACtD,wCAAwC;oBACxC,kCAAkC;oBAClC,MAAM,YAAY,MAAM,IAAA,2IAAgB,EAAC;wBAAC,yIAAQ;wBAAE,0IAAS;qBAAC;oBAE9D,QAAQ,GAAG,CAAC,oBAAoB;oBAChC,YAAY;oBACZ,UAAU;gBACZ,EAAE,OAAO,KAAU;oBACjB,QAAQ,KAAK,CAAC,yBAAyB;oBACvC,SAAS,IAAI,OAAO,IAAI;gBAC1B,SAAU;oBACR,WAAW;gBACb;YACF;YAEA;QAEA,mDAAmD;QACnD,4GAA4G;QAC9G;gCAAG;QAAC;QAAS;KAAW;IAExB,MAAM,WAAW,MAAM,CAAC,yIAAQ,CAAC,IAAI;IACrC,MAAM,YAAY,MAAM,CAAC,0IAAS,CAAC,IAAI;IAEvC,MAAM,YAAY,WACd;QACA,kBAAkB,SAAS,MAAM,CAAC,QAAQ,KAAK;QAC/C,YAAY,SAAS,OAAO,CAAC,QAAQ,KAAK;QAC1C;QACA,eAAe,AAAC,SAAS,MAAM,CAAC,QAAQ,KAAK,gBAAiB;QAC9D,SAAS,AAAC,SAAS,OAAO,CAAC,QAAQ,KAAK,YAAa;IACvD,IACE;IAEJ,OAAO;QAAE;QAAU;QAAW;QAAS;IAAM;AAC/C;GA5DgB"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Dialog({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Root>) {\n  return <DialogPrimitive.Root data-slot=\"dialog\" {...props} />\n}\n\nfunction DialogTrigger({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Trigger>) {\n  return <DialogPrimitive.Trigger data-slot=\"dialog-trigger\" {...props} />\n}\n\nfunction DialogPortal({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Portal>) {\n  return <DialogPrimitive.Portal data-slot=\"dialog-portal\" {...props} />\n}\n\nfunction DialogClose({\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Close>) {\n  return <DialogPrimitive.Close data-slot=\"dialog-close\" {...props} />\n}\n\nfunction DialogOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Overlay>) {\n  return (\n    <DialogPrimitive.Overlay\n      data-slot=\"dialog-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogContent({\n  className,\n  children,\n  showCloseButton = true,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Content> & {\n  showCloseButton?: boolean\n}) {\n  return (\n    <DialogPortal data-slot=\"dialog-portal\">\n      <DialogOverlay />\n      <DialogPrimitive.Content\n        data-slot=\"dialog-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <DialogPrimitive.Close\n            data-slot=\"dialog-close\"\n            className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\"\n          >\n            <XIcon />\n            <span className=\"sr-only\">Close</span>\n          </DialogPrimitive.Close>\n        )}\n      </DialogPrimitive.Content>\n    </DialogPortal>\n  )\n}\n\nfunction DialogHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-header\"\n      className={cn(\"flex flex-col gap-2 text-center sm:text-left\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"dialog-footer\"\n      className={cn(\n        \"flex flex-col-reverse gap-2 sm:flex-row sm:justify-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DialogTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Title>) {\n  return (\n    <DialogPrimitive.Title\n      data-slot=\"dialog-title\"\n      className={cn(\"text-lg leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction DialogDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof DialogPrimitive.Description>) {\n  return (\n    <DialogPrimitive.Description\n      data-slot=\"dialog-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogFooter,\n  DialogHeader,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,OAAO,EACd,GAAG,OAC+C;IAClD,qBAAO,6LAAC,6KAAoB;QAAC,aAAU;QAAU,GAAG,KAAK;;;;;;AAC3D;KAJS;AAMT,SAAS,cAAc,EACrB,GAAG,OACkD;IACrD,qBAAO,6LAAC,gLAAuB;QAAC,aAAU;QAAkB,GAAG,KAAK;;;;;;AACtE;MAJS;AAMT,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,6LAAC,+KAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAJS;AAMT,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,6LAAC,8KAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAJS;AAMT,SAAS,cAAc,EACrB,SAAS,EACT,GAAG,OACkD;IACrD,qBACE,6LAAC,gLAAuB;QACtB,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,cAAc,EACrB,SAAS,EACT,QAAQ,EACR,kBAAkB,IAAI,EACtB,GAAG,OAGJ;IACC,qBACE,6LAAC;QAAa,aAAU;;0BACtB,6LAAC;;;;;0BACD,6LAAC,gLAAuB;gBACtB,aAAU;gBACV,WAAW,IAAA,4HAAE,EACX,4XACA;gBAED,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,8KAAqB;wBACpB,aAAU;wBACV,WAAU;;0CAEV,6LAAC,4MAAK;;;;;0CACN,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAhCS;AAkCT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAoC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,4HAAE,EACX,0DACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,YAAY,EACnB,SAAS,EACT,GAAG,OACgD;IACnD,qBACE,6LAAC,8KAAqB;QACpB,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,kBAAkB,EACzB,SAAS,EACT,GAAG,OACsD;IACzD,qBACE,6LAAC,oLAA2B;QAC1B,aAAU;QACV,WAAW,IAAA,4HAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 387, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/builder.ts"],"sourcesContent":["\nimport {\n    Connection,\n    PublicKey,\n    TransactionInstruction,\n    SystemProgram,\n    ComputeBudgetProgram,\n    GetProgramAccountsFilter\n} from \"@solana/web3.js\";\nimport {\n    getAssociatedTokenAddressSync,\n    createAssociatedTokenAccountInstruction,\n    createSyncNativeInstruction,\n    NATIVE_MINT,\n    getMint\n} from \"@solana/spl-token\";\nimport { getOperateIx } from \"@jup-ag/lend/borrow\";\nimport BN from \"bn.js\";\nimport { ComputedTransaction, LendingTransactionInput } from \"./types\";\n\n// Default configuration (can be overridden)\nconst DEFAULT_COMPUTE_UNITS = 1_400_000;\nconst DEFAULT_PRIORITY_FEE = 1000; // Micro-lamports\n\n/**\n * Deterministic Transaction Builder for Lending Operations\n * \n * @param connection Solana connection object\n * @param input LendingTransactionInput\n * @returns ComputedTransaction\n */\nexport async function buildLendingTransaction(\n    connection: Connection,\n    input: LendingTransactionInput\n): Promise<ComputedTransaction> {\n    const {\n        vaultId,\n        positionId,\n        colAmount,\n        debtAmount,\n        userPublicKey,\n        priorityFeeMicroLamports,\n        computeUnits,\n        preInstructions: extraInstructions = []\n    } = input;\n\n    // 1. Fetch Dynamic Mint Info (In a real pure system, this would be passed in)\n    // For now, we assume SOL/USDC for simplicity of the prototype migration, \n    // but we implement the decimal fetching logic.\n\n    // Note: To make this truly generic, we'd need to know the Vault's collateral mint and debt mint.\n    // Since the SDK hides some of this, we'll assume standard processing or fetch from SDK if possible.\n    // For this refactor, we keep the wrapping logic for SOL specifically, as requested.\n\n    // 1. Normalize Amounts\n    // We need to know the decimals. \n    // SOL = 9 decimals\n    // USDC = 6 decimals\n    // In a robust system, we would query the vault config to get the mints.\n    // For this exercise, we will assume the input handling (which was previously hardcoded) \n    // needs to be dynamic. \n\n    // Let's assume the user passes input in \"UI Units\" (e.g. 1.5 SOL).\n    const solDecimals = 9;\n    const usdcDecimals = 6;\n\n    const colLamports = new BN(Math.floor(colAmount * Math.pow(10, solDecimals)));\n    const debtLamports = new BN(Math.floor(debtAmount * Math.pow(10, usdcDecimals)));\n\n    // 2. Build Core Lending Instructions\n    // This function from the SDK likely fetches vault state to validate.\n    const { ixs, addressLookupTableAccounts } = await getOperateIx({\n        vaultId,\n        positionId,\n        colAmount: colLamports,\n        debtAmount: debtLamports,\n        signer: userPublicKey,\n        connection, // The SDK needs this\n    });\n\n    // 3. Handle SOL Wrapping (Deterministic Logic)\n    // If collateral is being deposited (colAmount > 0) and it is SOL, we might need to wrap.\n    // The original code in `deposit.tsx` checked if the WSOL account existed.\n    // To keep this pure-ish, we should check existence here.\n    const preInstructions: TransactionInstruction[] = [];\n\n    if (colAmount > 0) {\n        // Check if we need to wrap SOL\n        const wsolAccount = getAssociatedTokenAddressSync(NATIVE_MINT, userPublicKey);\n\n        // We must check if the account exists to decide whether to create it.\n        // This is a \"read\" operation, allowable in an async builder.\n        const accountInfo = await connection.getAccountInfo(wsolAccount);\n\n        if (!accountInfo) {\n            preInstructions.push(\n                createAssociatedTokenAccountInstruction(\n                    userPublicKey,\n                    wsolAccount,\n                    userPublicKey,\n                    NATIVE_MINT\n                )\n            );\n        }\n\n        // Initial wrap logic: Transfer SOL to WSOL account\n        preInstructions.push(\n            SystemProgram.transfer({\n                fromPubkey: userPublicKey,\n                toPubkey: wsolAccount,\n                lamports: colLamports.toNumber(),\n            })\n        );\n\n        // Sync native to update balance\n        preInstructions.push(createSyncNativeInstruction(wsolAccount));\n    }\n\n    // 4. Compute Budget Instructions\n    // In a future iteration, we would simulate here to get exact units.\n    // For now, we use the passed or default values to ensure determinism.\n    const finalComputeUnits = computeUnits || DEFAULT_COMPUTE_UNITS;\n    const finalPriorityFee = priorityFeeMicroLamports || DEFAULT_PRIORITY_FEE;\n\n    const computeBudgetInstructions = [\n        ComputeBudgetProgram.setComputeUnitLimit({\n            units: finalComputeUnits,\n        }),\n        ComputeBudgetProgram.setComputeUnitPrice({\n            microLamports: finalPriorityFee,\n        }),\n    ];\n\n    // 5. Assemble\n    const instructions = [...preInstructions, ...extraInstructions, ...ixs];\n\n    return {\n        instructions,\n        computeBudgetInstructions,\n        lookupTables: addressLookupTableAccounts,\n        metadata: {\n            expectedColLamports: colLamports,\n            expectedDebtLamports: debtLamports,\n            computeUnits: finalComputeUnits,\n            priorityFeeMicroLamports: finalPriorityFee,\n        }\n    };\n}\n"],"names":[],"mappings":";;;;AACA;AAQA;AAAA;AAAA;AAAA;AAOA;AACA;;;;;AAGA,4CAA4C;AAC5C,MAAM,wBAAwB;AAC9B,MAAM,uBAAuB,MAAM,iBAAiB;AAS7C,eAAe,wBAClB,UAAsB,EACtB,KAA8B;IAE9B,MAAM,EACF,OAAO,EACP,UAAU,EACV,SAAS,EACT,UAAU,EACV,aAAa,EACb,wBAAwB,EACxB,YAAY,EACZ,iBAAiB,oBAAoB,EAAE,EAC1C,GAAG;IAEJ,8EAA8E;IAC9E,0EAA0E;IAC1E,+CAA+C;IAE/C,iGAAiG;IACjG,oGAAoG;IACpG,oFAAoF;IAEpF,uBAAuB;IACvB,iCAAiC;IACjC,mBAAmB;IACnB,oBAAoB;IACpB,wEAAwE;IACxE,yFAAyF;IACzF,wBAAwB;IAExB,mEAAmE;IACnE,MAAM,cAAc;IACpB,MAAM,eAAe;IAErB,MAAM,cAAc,IAAI,mJAAE,CAAC,KAAK,KAAK,CAAC,YAAY,KAAK,GAAG,CAAC,IAAI;IAC/D,MAAM,eAAe,IAAI,mJAAE,CAAC,KAAK,KAAK,CAAC,aAAa,KAAK,GAAG,CAAC,IAAI;IAEjE,qCAAqC;IACrC,qEAAqE;IACrE,MAAM,EAAE,GAAG,EAAE,0BAA0B,EAAE,GAAG,MAAM,IAAA,qOAAY,EAAC;QAC3D;QACA;QACA,WAAW;QACX,YAAY;QACZ,QAAQ;QACR;IACJ;IAEA,+CAA+C;IAC/C,yFAAyF;IACzF,0EAA0E;IAC1E,yDAAyD;IACzD,MAAM,kBAA4C,EAAE;IAEpD,IAAI,YAAY,GAAG;QACf,+BAA+B;QAC/B,MAAM,cAAc,IAAA,2MAA6B,EAAC,qLAAW,EAAE;QAE/D,sEAAsE;QACtE,6DAA6D;QAC7D,MAAM,cAAc,MAAM,WAAW,cAAc,CAAC;QAEpD,IAAI,CAAC,aAAa;YACd,gBAAgB,IAAI,CAChB,IAAA,8OAAuC,EACnC,eACA,aACA,eACA,qLAAW;QAGvB;QAEA,mDAAmD;QACnD,gBAAgB,IAAI,CAChB,4LAAa,CAAC,QAAQ,CAAC;YACnB,YAAY;YACZ,UAAU;YACV,UAAU,YAAY,QAAQ;QAClC;QAGJ,gCAAgC;QAChC,gBAAgB,IAAI,CAAC,IAAA,sNAA2B,EAAC;IACrD;IAEA,iCAAiC;IACjC,oEAAoE;IACpE,sEAAsE;IACtE,MAAM,oBAAoB,gBAAgB;IAC1C,MAAM,mBAAmB,4BAA4B;IAErD,MAAM,4BAA4B;QAC9B,mMAAoB,CAAC,mBAAmB,CAAC;YACrC,OAAO;QACX;QACA,mMAAoB,CAAC,mBAAmB,CAAC;YACrC,eAAe;QACnB;KACH;IAED,cAAc;IACd,MAAM,eAAe;WAAI;WAAoB;WAAsB;KAAI;IAEvE,OAAO;QACH;QACA;QACA,cAAc;QACd,UAAU;YACN,qBAAqB;YACrB,sBAAsB;YACtB,cAAc;YACd,0BAA0B;QAC9B;IACJ;AACJ"}},
    {"offset": {"line": 496, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/transaction.ts"],"sourcesContent":["\nimport { Connection, PublicKey, TransactionMessage, VersionedTransaction } from \"@solana/web3.js\";\nimport { ComputedTransaction } from \"./types\";\n\n/**\n * Converts a ComputedTransaction into a ready-to-sign VersionedTransaction.\n * This function handles fetching the latest blockhash, which makes it stateful.\n */\nexport async function createVersionedTransaction(\n    connection: Connection,\n    computed: ComputedTransaction,\n    payer: PublicKey\n): Promise<VersionedTransaction> {\n    const { blockhash } = await connection.getLatestBlockhash(\"confirmed\");\n\n    const messageV0 = new TransactionMessage({\n        payerKey: payer,\n        recentBlockhash: blockhash,\n        instructions: [\n            ...computed.computeBudgetInstructions,\n            ...computed.instructions\n        ],\n    }).compileToV0Message(computed.lookupTables);\n\n    return new VersionedTransaction(messageV0);\n}\n"],"names":[],"mappings":";;;;AACA;;AAOO,eAAe,2BAClB,UAAsB,EACtB,QAA6B,EAC7B,KAAgB;IAEhB,MAAM,EAAE,SAAS,EAAE,GAAG,MAAM,WAAW,kBAAkB,CAAC;IAE1D,MAAM,YAAY,IAAI,iMAAkB,CAAC;QACrC,UAAU;QACV,iBAAiB;QACjB,cAAc;eACP,SAAS,yBAAyB;eAClC,SAAS,YAAY;SAC3B;IACL,GAAG,kBAAkB,CAAC,SAAS,YAAY;IAE3C,OAAO,IAAI,mMAAoB,CAAC;AACpC"}},
    {"offset": {"line": 521, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/types.ts"],"sourcesContent":["\nimport { PublicKey, TransactionInstruction, VersionedTransaction, AddressLookupTableAccount } from \"@solana/web3.js\";\nimport BN from \"bn.js\";\n\nexport interface LendingTransactionInput {\n    vaultId: number;\n    positionId: number;\n    colAmount: number; // In natural units (e.g., 1.5 SOL), not lamports\n    debtAmount: number; // In natural units (e.g., 100 USDC)\n    userPublicKey: PublicKey;\n    solPrice?: number; // Optional prompt for simulation\n    slippageBps?: number; // Basis points\n    priorityFeeMicroLamports?: number;\n    computeUnits?: number;\n    preInstructions?: TransactionInstruction[];\n}\n\nexport interface ComputedTransaction {\n    instructions: TransactionInstruction[];\n    computeBudgetInstructions: TransactionInstruction[];\n    lookupTables: AddressLookupTableAccount[];\n    metadata: {\n        expectedColLamports: BN;\n        expectedDebtLamports: BN;\n        computeUnits: number;\n        priorityFeeMicroLamports: number;\n    };\n}\n\nexport enum TxFailureType {\n    SimulationFailure = \"SimulationFailure\",\n    InsufficientFunds = \"InsufficientFunds\",\n    SlippageExceeded = \"SlippageExceeded\",\n    RPCError = \"RPCError\",\n    BlockhashExpired = \"BlockhashExpired\",\n    Unknown = \"Unknown\",\n}\n\nexport interface SimulationResult {\n    success: boolean;\n    failureType?: TxFailureType;\n    logs: string[];\n    unitsConsumed?: number;\n    error?: string;\n}\n"],"names":[],"mappings":";;;;AA6BO,IAAA,AAAK,uCAAA;;;;;;;WAAA"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/simulation.ts"],"sourcesContent":["\nimport { Connection, VersionedTransaction, TransactionMessage } from \"@solana/web3.js\";\nimport { TxFailureType, SimulationResult, ComputedTransaction } from \"./types\";\n\n/**\n * Simulates a transaction before sending to ensure determinism and catch errors early.\n */\nexport async function simulateTransaction(\n    connection: Connection,\n    transaction: VersionedTransaction\n): Promise<SimulationResult> {\n    try {\n        const { value: simulation } = await connection.simulateTransaction(transaction, {\n            replaceRecentBlockhash: true,\n            commitment: \"processed\",\n        });\n\n        if (simulation.err) {\n            const logs = simulation.logs || [];\n            const errorStr = JSON.stringify(simulation.err);\n\n            let failureType = TxFailureType.Unknown;\n\n            // Basic Error Mapping Logic\n            if (errorStr.includes(\"InstructionError\") && logs.some(l => l.includes(\"Slippage\"))) {\n                failureType = TxFailureType.SlippageExceeded;\n            } else if (errorStr.includes(\"InsufficientFunds\") || logs.some(l => l.includes(\"0x1\"))) { // 0x1 is often insufficient funds\n                failureType = TxFailureType.InsufficientFunds;\n            } else if (errorStr.includes(\"BlockhashNotFound\")) {\n                failureType = TxFailureType.BlockhashExpired;\n            } else {\n                failureType = TxFailureType.SimulationFailure;\n            }\n\n            return {\n                success: false,\n                failureType,\n                logs,\n                error: errorStr\n            };\n        }\n\n        return {\n            success: true,\n            logs: simulation.logs || [],\n            unitsConsumed: simulation.unitsConsumed\n        };\n\n    } catch (e: any) {\n        return {\n            success: false,\n            failureType: TxFailureType.RPCError,\n            logs: [],\n            error: e.message || \"Unknown RPC Error\"\n        };\n    }\n}\n"],"names":[],"mappings":";;;;AAEA;;AAKO,eAAe,oBAClB,UAAsB,EACtB,WAAiC;IAEjC,IAAI;QACA,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,WAAW,mBAAmB,CAAC,aAAa;YAC5E,wBAAwB;YACxB,YAAY;QAChB;QAEA,IAAI,WAAW,GAAG,EAAE;YAChB,MAAM,OAAO,WAAW,IAAI,IAAI,EAAE;YAClC,MAAM,WAAW,KAAK,SAAS,CAAC,WAAW,GAAG;YAE9C,IAAI,cAAc,0IAAa,CAAC,OAAO;YAEvC,4BAA4B;YAC5B,IAAI,SAAS,QAAQ,CAAC,uBAAuB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,cAAc;gBACjF,cAAc,0IAAa,CAAC,gBAAgB;YAChD,OAAO,IAAI,SAAS,QAAQ,CAAC,wBAAwB,KAAK,IAAI,CAAC,CAAA,IAAK,EAAE,QAAQ,CAAC,SAAS;gBACpF,cAAc,0IAAa,CAAC,iBAAiB;YACjD,OAAO,IAAI,SAAS,QAAQ,CAAC,sBAAsB;gBAC/C,cAAc,0IAAa,CAAC,gBAAgB;YAChD,OAAO;gBACH,cAAc,0IAAa,CAAC,iBAAiB;YACjD;YAEA,OAAO;gBACH,SAAS;gBACT;gBACA;gBACA,OAAO;YACX;QACJ;QAEA,OAAO;YACH,SAAS;YACT,MAAM,WAAW,IAAI,IAAI,EAAE;YAC3B,eAAe,WAAW,aAAa;QAC3C;IAEJ,EAAE,OAAO,GAAQ;QACb,OAAO;YACH,SAAS;YACT,aAAa,0IAAa,CAAC,QAAQ;YACnC,MAAM,EAAE;YACR,OAAO,EAAE,OAAO,IAAI;QACxB;IACJ;AACJ"}},
    {"offset": {"line": 595, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/confirmation.ts"],"sourcesContent":["\nimport { Connection, TransactionSignature } from \"@solana/web3.js\";\nimport { SIMULATION_RETRY_DELAY, MAX_CONFIRMATION_ATTEMPTS } from \"./constants\";\n\n/**\n * Polls for transaction confirmation with exponential backoff.\n */\nexport async function confirmTransaction(\n    connection: Connection,\n    signature: TransactionSignature\n): Promise<boolean> {\n    let attempts = 0;\n    let delay = SIMULATION_RETRY_DELAY; // Start with 1s\n\n    while (attempts < MAX_CONFIRMATION_ATTEMPTS) {\n        try {\n            const status = await connection.getSignatureStatus(signature, {\n                searchTransactionHistory: true,\n            });\n\n            if (status.value?.err) {\n                throw new Error(`Transaction failed: ${JSON.stringify(status.value.err)}`);\n            }\n\n            if (\n                status.value?.confirmationStatus === \"confirmed\" ||\n                status.value?.confirmationStatus === \"finalized\"\n            ) {\n                return true;\n            }\n        } catch (e) {\n            // Create transient failure, just wait and retry\n            console.warn(\"Confirmation check failed, retrying...\", e);\n        }\n\n        await new Promise((resolve) => setTimeout(resolve, delay));\n\n        attempts++;\n        // Cap delay at 5s\n        delay = Math.min(delay * 1.5, 5000);\n    }\n\n    throw new Error(\"Transaction confirmation timed out after max attempts.\");\n}\n"],"names":[],"mappings":";;;;AAEA;;AAKO,eAAe,mBAClB,UAAsB,EACtB,SAA+B;IAE/B,IAAI,WAAW;IACf,IAAI,QAAQ,uJAAsB,EAAE,gBAAgB;IAEpD,MAAO,WAAW,0JAAyB,CAAE;QACzC,IAAI;YACA,MAAM,SAAS,MAAM,WAAW,kBAAkB,CAAC,WAAW;gBAC1D,0BAA0B;YAC9B;YAEA,IAAI,OAAO,KAAK,EAAE,KAAK;gBACnB,MAAM,IAAI,MAAM,CAAC,oBAAoB,EAAE,KAAK,SAAS,CAAC,OAAO,KAAK,CAAC,GAAG,GAAG;YAC7E;YAEA,IACI,OAAO,KAAK,EAAE,uBAAuB,eACrC,OAAO,KAAK,EAAE,uBAAuB,aACvC;gBACE,OAAO;YACX;QACJ,EAAE,OAAO,GAAG;YACR,gDAAgD;YAChD,QAAQ,IAAI,CAAC,0CAA0C;QAC3D;QAEA,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;QAEnD;QACA,kBAAkB;QAClB,QAAQ,KAAK,GAAG,CAAC,QAAQ,KAAK;IAClC;IAEA,MAAM,IAAI,MAAM;AACpB"}},
    {"offset": {"line": 633, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/engine/executor.ts"],"sourcesContent":["\nimport { Connection, PublicKey, SendTransactionError, VersionedTransaction } from \"@solana/web3.js\";\nimport { WalletContextState } from \"@solana/wallet-adapter-react\";\nimport { buildLendingTransaction } from \"./builder\";\nimport { createVersionedTransaction } from \"./transaction\";\nimport { simulateTransaction } from \"./simulation\";\nimport { confirmTransaction } from \"./confirmation\";\nimport { LendingTransactionInput, TxFailureType } from \"./types\";\n\nexport interface TransactionResult {\n    signature: string;\n    confirmed: boolean;\n    logs: string[];\n}\n\nexport class EngineError extends Error {\n    public type: TxFailureType;\n    public logs: string[];\n\n    constructor(message: string, type: TxFailureType, logs: string[] = []) {\n        super(message);\n        this.type = type;\n        this.logs = logs;\n    }\n}\n\n/**\n * Orchestrates the entire lending transaction lifecycle:\n * Build -> Simulate -> Sign -> Send -> Confirm\n */\nexport async function executeLendingTransaction(\n    connection: Connection,\n    wallet: WalletContextState, // Using direct wallet context for now\n    input: LendingTransactionInput\n): Promise<TransactionResult> {\n    const { signTransaction, publicKey } = wallet;\n\n    if (!publicKey || !signTransaction) {\n        throw new EngineError(\"Wallet not connected or does not support signing\", TxFailureType.Unknown);\n    }\n\n    // 1. Build Transaction (Deterministic)\n    console.log(\"Building transaction...\");\n    const computedTx = await buildLendingTransaction(connection, input);\n\n    // 2. Create Versioned Transaction (Stateful: fetches blockhash)\n    console.log(\"Fetching blockhash and compiling...\");\n    const transaction = await createVersionedTransaction(connection, computedTx, publicKey);\n\n    // 3. Simulate (Safety Check)\n    console.log(\"Simulating transaction...\");\n    const simulation = await simulateTransaction(connection, transaction);\n\n    if (!simulation.success) {\n        console.error(\"Simulation failed:\", simulation.error, simulation.logs);\n        throw new EngineError(\n            `Simulation failed: ${simulation.error || \"Unknown error\"}`,\n            simulation.failureType || TxFailureType.SimulationFailure,\n            simulation.logs\n        );\n    }\n\n    console.log(\"Simulation successful. Units consumed:\", simulation.unitsConsumed);\n\n    // 4. User Signing\n    console.log(\"Requesting user signature...\");\n    let signedTx: VersionedTransaction;\n    try {\n        signedTx = await signTransaction(transaction);\n    } catch (err: any) {\n        throw new EngineError(\"User rejected transaction\", TxFailureType.Unknown);\n    }\n\n    // 5. Send Transaction\n    console.log(\"Sending transaction...\");\n    let signature: string;\n    try {\n        signature = await connection.sendRawTransaction(signedTx.serialize(), {\n            skipPreflight: true, // We already simulated\n            maxRetries: 3, // Basic retries on RPC level\n        });\n    } catch (err: any) {\n        console.error(\"Send failed:\", err);\n        throw new EngineError(\n            `Send failed: ${err.message}`,\n            TxFailureType.RPCError\n        );\n    }\n\n    console.log(\"Transaction sent:\", signature);\n\n    // 6. Confirm Transaction\n    console.log(\"Confirming transaction...\");\n    try {\n        const confirmed = await confirmTransaction(connection, signature);\n        return {\n            signature,\n            confirmed,\n            logs: simulation.logs // Return logs from simulation as \"expected logs\" if success\n        };\n    } catch (err: any) {\n        console.error(\"Confirmation failed:\", err);\n        throw new EngineError(\n            `Confirmation timed out or failed: ${err.message}`,\n            TxFailureType.BlockhashExpired // Often means timeout/expiry\n        );\n    }\n}\n"],"names":[],"mappings":";;;;;;AAGA;AACA;AACA;AACA;AACA;;;;;;AAQO,MAAM,oBAAoB;IACtB,KAAoB;IACpB,KAAe;IAEtB,YAAY,OAAe,EAAE,IAAmB,EAAE,OAAiB,EAAE,CAAE;QACnE,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,IAAI,GAAG;IAChB;AACJ;AAMO,eAAe,0BAClB,UAAsB,EACtB,MAA0B,EAC1B,KAA8B;IAE9B,MAAM,EAAE,eAAe,EAAE,SAAS,EAAE,GAAG;IAEvC,IAAI,CAAC,aAAa,CAAC,iBAAiB;QAChC,MAAM,IAAI,YAAY,oDAAoD,0IAAa,CAAC,OAAO;IACnG;IAEA,uCAAuC;IACvC,QAAQ,GAAG,CAAC;IACZ,MAAM,aAAa,MAAM,IAAA,sJAAuB,EAAC,YAAY;IAE7D,gEAAgE;IAChE,QAAQ,GAAG,CAAC;IACZ,MAAM,cAAc,MAAM,IAAA,6JAA0B,EAAC,YAAY,YAAY;IAE7E,6BAA6B;IAC7B,QAAQ,GAAG,CAAC;IACZ,MAAM,aAAa,MAAM,IAAA,qJAAmB,EAAC,YAAY;IAEzD,IAAI,CAAC,WAAW,OAAO,EAAE;QACrB,QAAQ,KAAK,CAAC,sBAAsB,WAAW,KAAK,EAAE,WAAW,IAAI;QACrE,MAAM,IAAI,YACN,CAAC,mBAAmB,EAAE,WAAW,KAAK,IAAI,iBAAiB,EAC3D,WAAW,WAAW,IAAI,0IAAa,CAAC,iBAAiB,EACzD,WAAW,IAAI;IAEvB;IAEA,QAAQ,GAAG,CAAC,0CAA0C,WAAW,aAAa;IAE9E,kBAAkB;IAClB,QAAQ,GAAG,CAAC;IACZ,IAAI;IACJ,IAAI;QACA,WAAW,MAAM,gBAAgB;IACrC,EAAE,OAAO,KAAU;QACf,MAAM,IAAI,YAAY,6BAA6B,0IAAa,CAAC,OAAO;IAC5E;IAEA,sBAAsB;IACtB,QAAQ,GAAG,CAAC;IACZ,IAAI;IACJ,IAAI;QACA,YAAY,MAAM,WAAW,kBAAkB,CAAC,SAAS,SAAS,IAAI;YAClE,eAAe;YACf,YAAY;QAChB;IACJ,EAAE,OAAO,KAAU;QACf,QAAQ,KAAK,CAAC,gBAAgB;QAC9B,MAAM,IAAI,YACN,CAAC,aAAa,EAAE,IAAI,OAAO,EAAE,EAC7B,0IAAa,CAAC,QAAQ;IAE9B;IAEA,QAAQ,GAAG,CAAC,qBAAqB;IAEjC,yBAAyB;IACzB,QAAQ,GAAG,CAAC;IACZ,IAAI;QACA,MAAM,YAAY,MAAM,IAAA,sJAAkB,EAAC,YAAY;QACvD,OAAO;YACH;YACA;YACA,MAAM,WAAW,IAAI,CAAC,4DAA4D;QACtF;IACJ,EAAE,OAAO,KAAU;QACf,QAAQ,KAAK,CAAC,wBAAwB;QACtC,MAAM,IAAI,YACN,CAAC,kCAAkC,EAAE,IAAI,OAAO,EAAE,EAClD,0IAAa,CAAC,gBAAgB,CAAC,6BAA6B;;IAEpE;AACJ"}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/hooks/useOperate.tsx"],"sourcesContent":["\nimport { useCallback } from \"react\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { getConnection } from \"@/lib/solana\";\nimport { TransactionInstruction } from \"@solana/web3.js\";\nimport { executeLendingTransaction } from \"@/engine/executor\";\nimport { toast } from \"sonner\";\nimport { TxFailureType } from \"@/engine/types\";\n\nexport function useOperate(vaultId: number, positionId: number) {\n  const wallet = useWallet();\n\n  const operate = useCallback(\n    async (\n      colAmount: number, // In UI units (e.g. 1.5 SOL)\n      debtAmount: number, // In UI units (e.g. 100 USDC)\n      preInstructions: TransactionInstruction[] = []\n    ) => {\n      if (!wallet.publicKey) {\n        throw new Error(\"Wallet not connected\");\n      }\n\n      console.log(\"Initiating operation:\", { colAmount, debtAmount });\n\n      try {\n        const result = await executeLendingTransaction(\n          getConnection(),\n          wallet,\n          {\n            vaultId,\n            positionId,\n            colAmount,\n            debtAmount,\n            userPublicKey: wallet.publicKey,\n            preInstructions,\n            // In production, fetch these dynamically\n            // priorityFeeMicroLamports: fetchedPriorityFee\n          }\n        );\n\n        return result.signature;\n      } catch (error: any) {\n        console.error(\"Operation failed:\", error);\n\n        // Map engine errors to user-friendly toasts if needed, \n        // though executeLendingTransaction throws structured errors.\n        if (error.type === TxFailureType.SimulationFailure) {\n          toast.error(\"Transaction Simulation Failed\", {\n            description: \"The transaction is likely to fail. Please check your inputs or try again later.\",\n          });\n        }\n\n        throw error;\n      }\n    },\n    [vaultId, positionId, wallet]\n  );\n\n  return { operate };\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;AAEO,SAAS,WAAW,OAAe,EAAE,UAAkB;;IAC5D,MAAM,SAAS,IAAA,iMAAS;IAExB,MAAM,UAAU,IAAA,4KAAW;2CACzB,OACE,WACA,YACA,kBAA4C,EAAE;YAE9C,IAAI,CAAC,OAAO,SAAS,EAAE;gBACrB,MAAM,IAAI,MAAM;YAClB;YAEA,QAAQ,GAAG,CAAC,yBAAyB;gBAAE;gBAAW;YAAW;YAE7D,IAAI;gBACF,MAAM,SAAS,MAAM,IAAA,yJAAyB,EAC5C,IAAA,wIAAa,KACb,QACA;oBACE;oBACA;oBACA;oBACA;oBACA,eAAe,OAAO,SAAS;oBAC/B;gBAGF;gBAGF,OAAO,OAAO,SAAS;YACzB,EAAE,OAAO,OAAY;gBACnB,QAAQ,KAAK,CAAC,qBAAqB;gBAEnC,wDAAwD;gBACxD,6DAA6D;gBAC7D,IAAI,MAAM,IAAI,KAAK,0IAAa,CAAC,iBAAiB,EAAE;oBAClD,oJAAK,CAAC,KAAK,CAAC,iCAAiC;wBAC3C,aAAa;oBACf;gBACF;gBAEA,MAAM;YACR;QACF;0CACA;QAAC;QAAS;QAAY;KAAO;IAG/B,OAAO;QAAE;IAAQ;AACnB;GAlDgB;;QACC,iMAAS"}},
    {"offset": {"line": 792, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/modals/supply/deposit.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from \"react\";\nimport Image from \"next/image\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogClose,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { toast } from \"sonner\";\nimport { useOperate } from \"@/hooks/useOperate\";\nimport {\n  NATIVE_MINT,\n  createSyncNativeInstruction,\n  getAssociatedTokenAddressSync,\n  createAssociatedTokenAccountInstruction,\n} from \"@solana/spl-token\";\nimport { SystemProgram } from \"@solana/web3.js\";\nimport { getConnection } from \"@/lib/solana\";\nimport { BN } from \"bn.js\";\nconst WSOL_ACCOUNT_RENT = 0.00204;\ninterface DepositModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  vaultId: number;\n  positionId: number;\n  tokenIcon?: string;\n  tokenAlt?: string;\n  tokenSymbol?: string;\n  tokenBalance?: string;\n  tokenBalanceFiat?: string;\n  borrowedAmount?: string;\n  borrowedAmountFiat?: string;\n}\n\nexport const DepositModal = ({\n  open,\n  onOpenChange,\n  vaultId,\n  positionId,\n  tokenIcon = \"https://cdn.instadapp.io/icons/jupiter/tokens/sol.png\",\n  tokenAlt = \"SOL\",\n  tokenSymbol = \"SOL\",\n  tokenBalance = \"0.0013822 SOL\",\n  tokenBalanceFiat = \"$0.17306\",\n  borrowedAmount = \"0.00 USDC\",\n  borrowedAmountFiat = \"$0.00\",\n}: DepositModalProps) => {\n  const [depositAmount, setDepositAmount] = useState(\"\");\n  const [riskPercentage, setRiskPercentage] = useState(0);\n  const { connected, publicKey } = useWallet();\n  const { operate } = useOperate(vaultId, positionId);\n  const [walletBalance, setWalletBalance] = useState(0);\n\n  // Fetch actual wallet balance from RPC\n  useEffect(() => {\n    (async () => {\n      if (!publicKey) {\n        setWalletBalance(0);\n        return;\n      }\n\n      const balance = await getConnection().getBalance(publicKey);\n      const balanceSOL = balance / 1e9;\n      setWalletBalance(balanceSOL);\n    })();\n  }, [publicKey]);\n\n  const handleHalf = () => {\n    setDepositAmount((walletBalance / 2).toFixed(8));\n    setRiskPercentage(0);\n  };\n\n  const handleMax = () => {\n    const maxDeposit = Math.max(0, walletBalance - WSOL_ACCOUNT_RENT);\n    setDepositAmount(maxDeposit.toFixed(8));\n    setRiskPercentage(0);\n  };\n\n  const handleDepositAmountChange = (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const value = e.target.value;\n    setDepositAmount(value);\n    setRiskPercentage(0);\n  };\n\n  const getRiskStatus = () => {\n    if (riskPercentage < 50)\n      return {\n        text: \"Safe\",\n        color: \"text-emerald-400\",\n        bgColor: \"bg-emerald-400/20\",\n        progressColor: \"bg-emerald\",\n      };\n    if (riskPercentage < 80)\n      return {\n        text: \"Risky\",\n        color: \"text-orange-400\",\n        bgColor: \"bg-orange-400/20\",\n        progressColor: \"bg-orange-500\",\n      };\n    return {\n      text: \"Very Risky\",\n      color: \"text-red-400\",\n      bgColor: \"bg-red-400/20\",\n      progressColor: \"bg-red-500\",\n    };\n  };\n\n  const riskStatus = getRiskStatus();\n  const liquidationPrice = \"0.00 USDC\";\n  const dropPercentage = \"100%\";\n\n  const calculateFiatValue = () => {\n    if (!depositAmount || parseFloat(depositAmount) <= 0) return \"$0.00\";\n    const tokenValue = parseFloat(\n      tokenBalanceFiat.replace(\"$\", \"\").replace(\",\", \"\")\n    );\n    const tokenAmount = parseFloat(tokenBalance.split(\" \")[0]);\n    const depositValue = (parseFloat(depositAmount) / tokenAmount) * tokenValue;\n    return `$${depositValue.toFixed(5)}`;\n  };\n\n  const handleDeposit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!connected || !publicKey) {\n      toast.error(\"Wallet Not Connected\", {\n        description: \"Please connect your wallet to proceed with the deposit.\",\n      });\n      return;\n    }\n\n    const amount = parseFloat(depositAmount);\n\n    if (isNaN(amount)) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Please enter a valid deposit amount.\",\n      });\n      return;\n    }\n\n    if (amount <= 0) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Deposit amount must be greater than 0.\",\n      });\n      return;\n    }\n\n    // if uses has enough funds\n    if (walletBalance < WSOL_ACCOUNT_RENT) {\n      toast.error(\"Insufficient SOL Balance\", {\n        description: `You need at least ${WSOL_ACCOUNT_RENT} SOL to create the required account for deposits. Your balance: ${walletBalance.toFixed(\n          6\n        )} SOL. Please add more SOL to your wallet.`,\n        duration: 6000,\n      });\n      return;\n    }\n\n    // if deposit amount > available balance after rent\n    if (amount > walletBalance - WSOL_ACCOUNT_RENT) {\n      const maxDeposit = walletBalance - WSOL_ACCOUNT_RENT;\n      toast.error(\"Amount Exceeds Available Balance\", {\n        description: `Maximum deposit available: ${maxDeposit.toFixed(\n          6\n        )} SOL (${WSOL_ACCOUNT_RENT} SOL reserved for account rent). Click MAX to use maximum.`,\n        duration: 5000,\n      });\n      return;\n    }\n\n    try {\n      toast.info(\"Processing Deposit\", {\n        description: \"Please confirm the transaction in your wallet...\",\n      });\n\n      // convert amount to lamports (SOL has 9 decimals)\n      const amountInLamports = Math.floor(amount * 1e9);\n      const colAmount = new BN(amountInLamports);\n\n      // get WSOL associated token account address\n      const wsolAccount = getAssociatedTokenAddressSync(NATIVE_MINT, publicKey);\n\n      // Check if WSOL account exists\n      const accountInfo = await getConnection().getAccountInfo(wsolAccount);\n\n      // create pre-instructions for WSOL account setup\n      const preInstructions = [];\n\n      // If account doesnt exist  create it\n      if (!accountInfo) {\n        preInstructions.push(\n          createAssociatedTokenAccountInstruction(\n            publicKey, // payer\n            wsolAccount, // ata\n            publicKey, // owner\n            NATIVE_MINT // mint\n          )\n        );\n      }\n\n      // transfer SOL to WSOL account\n      preInstructions.push(\n        SystemProgram.transfer({\n          fromPubkey: publicKey,\n          toPubkey: wsolAccount,\n          lamports: colAmount.toNumber(),\n        })\n      );\n\n      // Sync native instruction to update WSOL balance\n      preInstructions.push(createSyncNativeInstruction(wsolAccount));\n\n      // For Deposit: col_amount > 0, debt_amount = 0 (pass natural units)\n      const txid = await operate(amount, 0, preInstructions);\n\n      toast.success(\"Deposit Successful!\", {\n        description: `Successfully deposited ${amount.toFixed(\n          6\n        )} ${tokenSymbol}. Transaction: ${txid}`,\n        duration: 5000,\n      });\n      setDepositAmount(\"\");\n      onOpenChange(false);\n    } catch (error) {\n      toast.error(\"Transaction Failed\", {\n        description:\n          error instanceof Error\n            ? error.message\n            : \"Something went wrong while processing your deposit. Please try again.\",\n      });\n      console.error(\"Deposit error:\", error);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"max-w-md bg-[#0B121A] border border-[#19242e] text-neutral-200 p-0\"\n        showCloseButton={false}\n      >\n        <DialogTitle className=\"sr-only\">Deposit</DialogTitle>\n        <h2 className=\"text-base font-semibold leading-none text-neutral-200 flex items-center justify-between border-b border-b-neutral-850 p-4\">\n          <span className=\"capitalize\">Deposit</span>\n          <DialogClose className=\"flex items-center justify-center rounded-lg p-2 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-200 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-primary\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 20 20\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M2.0336 16.2126L8.2336 10.0126L2.0336 3.81263C1.7961 3.57903 1.66172 3.25951 1.66016 2.92669C1.65938 2.59309 1.79141 2.27357 2.02734 2.03763C2.26328 1.80247 2.5828 1.67045 2.9164 1.67201C3.25 1.67357 3.56874 1.80795 3.80234 2.04623L9.99994 8.24623L16.1999 2.04623C16.4335 1.80795 16.7523 1.67357 17.0859 1.67201C17.4187 1.67045 17.739 1.80248 17.9749 2.03763C18.2109 2.27357 18.3429 2.59309 18.3413 2.92669C18.3406 3.25951 18.2062 3.57903 17.9687 3.81263L11.7663 10.0126L17.9663 16.2126C18.2038 16.4462 18.3382 16.7658 18.3397 17.0986C18.3405 17.4322 18.2085 17.7517 17.9725 17.9876C17.7366 18.2228 17.4171 18.3548 17.0835 18.3533C16.7499 18.3517 16.4311 18.2173 16.1975 17.979L9.99994 11.779L3.79994 17.979C3.31088 18.4611 2.52494 18.4579 2.039 17.9736C1.55384 17.4884 1.54994 16.7025 2.03119 16.2126L2.0336 16.2126Z\"\n                fill=\"currentColor\"\n              ></path>\n            </svg>\n          </DialogClose>\n        </h2>\n\n        <form className=\"flex flex-col gap-4\" onSubmit={handleDeposit}>\n          <div className=\"flex flex-col gap-2 p-4\">\n            <div className=\"grid grid-cols-2 rounded-xl border border-neutral-850 bg-neutral-925/75 p-4\">\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Token Balance</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{tokenBalance}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{tokenBalanceFiat}</span>\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Borrowed</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{borrowedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{borrowedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col overflow-hidden rounded-xl border border-neutral-800 focus-within:shadow-swap-input-dark focus-within:ring-1 focus-within:ring-primary/50\">\n              <div className=\"flex flex-col gap-3 px-4 py-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm/5 text-neutral-200\">Deposit</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex items-center gap-1 text-xs text-neutral-400\">\n                      <span className=\"iconify ph--wallet-light\"></span>\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{tokenBalance}</span>\n                      </span>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={handleHalf}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      HALF\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={handleMax}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      MAX\n                    </button>\n                  </div>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex w-fit shrink-0 items-center justify-between gap-2.5 rounded-xl border border-neutral-850 bg-neutral-850 p-3\">\n                    <Image\n                      src={tokenIcon}\n                      alt={tokenAlt}\n                      width={24}\n                      height={24}\n                      className=\"h-6 w-6\"\n                    />\n                    <span className=\"text-sm/5 font-semibold\">\n                      {tokenSymbol}\n                    </span>\n                  </div>\n                  <div className=\"ml-auto flex flex-col text-right\">\n                    <input\n                      inputMode=\"decimal\"\n                      autoComplete=\"off\"\n                      name=\"amount\"\n                      data-lpignore=\"true\"\n                      placeholder=\"0.00\"\n                      value={depositAmount}\n                      onChange={handleDepositAmountChange}\n                      className=\"size-full w-full bg-transparent text-right text-3xl! font-semibold outline-none placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:text-neutral-500 disabled:opacity-100\"\n                      type=\"text\"\n                    />\n                    <span className=\"text-sm/5 text-neutral-400\">\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{calculateFiatValue()}</span>\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"border-y border-neutral-850 p-4\">\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"flex items-center justify-between font-semibold\">\n                <span className=\"text-neutral-200\">{riskPercentage}%</span>\n                <span className={riskStatus.color}>{riskStatus.text}</span>\n              </div>\n              <div className=\"flex flex-col items-center gap-2\">\n                <div\n                  role=\"progressbar\"\n                  aria-valuemax={100}\n                  aria-valuemin={0}\n                  aria-valuenow={riskPercentage}\n                  aria-valuetext={`${riskPercentage}%`}\n                  data-state=\"loading\"\n                  data-value={riskPercentage}\n                  data-max={100}\n                  className={`relative h-1.5 w-full overflow-hidden rounded-xl ${riskStatus.bgColor}`}\n                  style={{ transform: \"translateY(0px)\" }}\n                >\n                  <div\n                    data-state=\"loading\"\n                    data-value={riskPercentage}\n                    data-max={100}\n                    className={`h-full w-full ${riskStatus.progressColor}`}\n                    style={{\n                      transform: `translateX(-${100 - riskPercentage}%)`,\n                    }}\n                  />\n                </div>\n                <span className=\"ml-auto text-xs text-neutral-500\">\n                  Max: L.T. 80%\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col gap-4 p-4 pt-0\">\n            <div className=\"flex w-full items-start gap-2 text-xs text-neutral-500\">\n              <span\n                className=\"iconify ph--question-bold\"\n                style={{ height: \"1lh\", width: \"1lh\" }}\n              ></span>\n              <span>\n                If {tokenSymbol} reaches{\" \"}\n                <span className=\"relative inline-flex items-center rounded-sm\">\n                  <span translate=\"no\">{liquidationPrice}</span>\n                </span>{\" \"}\n                (drops by {dropPercentage}%), your position may be partially\n                liquidated\n              </span>\n            </div>\n            {!connected && (\n              <div className=\"flex items-start gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-xs text-yellow-400\">\n                <span\n                  className=\"iconify ph--warning\"\n                  style={{ height: \"1lh\", width: \"1lh\" }}\n                ></span>\n                <p>Please connect your wallet to proceed with the deposit.</p>\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              disabled={\n                !depositAmount || parseFloat(depositAmount) <= 0 || !connected\n              }\n              className=\"inline-flex items-center justify-center gap-1.5 rounded-md font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-6 py-3 text-sm rounded-xl\"\n            >\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">\n                {!connected ? \"Connect Wallet\" : \"Deposit\"}\n              </span>\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n            </button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1600, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/modals/supply/withdraw.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogClose,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { toast } from \"sonner\";\nimport { useOperate } from \"@/hooks/useOperate\";\nimport { createCloseAccountInstruction, getAssociatedTokenAddressSync, NATIVE_MINT } from \"@solana/spl-token\";\n\ninterface WithdrawModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  vaultId: number;\n  positionId: number;\n  tokenIcon?: string;\n  tokenAlt?: string;\n  tokenSymbol?: string;\n  suppliedAmount?: string;\n  suppliedAmountFiat?: string;\n  borrowedAmount?: string;\n  borrowedAmountFiat?: string;\n}\n\nexport const WithdrawModal = ({\n  open,\n  onOpenChange,\n  vaultId,\n  positionId,\n  tokenIcon = \"https://cdn.instadapp.io/icons/jupiter/tokens/sol.png\",\n  tokenAlt = \"SOL\",\n  tokenSymbol = \"SOL\",\n  suppliedAmount = \"14.14 SOL\",\n  suppliedAmountFiat = \"$1,769.27\",\n  borrowedAmount = \"0.00 USDC\",\n  borrowedAmountFiat = \"$0.00\",\n}: WithdrawModalProps) => {\n  const [withdrawAmount, setWithdrawAmount] = useState(\"\");\n  const [riskPercentage, setRiskPercentage] = useState(0);\n  const { connected, publicKey } = useWallet();\n  const { operate } = useOperate(vaultId, positionId);\n\n  const handleHalf = () => {\n    const balance = parseFloat(suppliedAmount.split(\" \")[0]);\n    setWithdrawAmount((balance / 2).toFixed(8));\n    setRiskPercentage(0);\n  };\n\n  const handleMax = () => {\n    const balance = suppliedAmount.split(\" \")[0];\n    setWithdrawAmount(balance);\n    setRiskPercentage(0);\n  };\n\n  const handleWithdrawAmountChange = (\n    e: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    const value = e.target.value;\n    setWithdrawAmount(value);\n    setRiskPercentage(0);\n  };\n\n  const getRiskStatus = () => {\n    if (riskPercentage < 50)\n      return {\n        text: \"Safe\",\n        color: \"text-emerald-400\",\n        bgColor: \"bg-emerald-400/20\",\n        progressColor: \"bg-emerald\",\n      };\n    if (riskPercentage < 80)\n      return {\n        text: \"Risky\",\n        color: \"text-orange-400\",\n        bgColor: \"bg-orange-400/20\",\n        progressColor: \"bg-orange-500\",\n      };\n    return {\n      text: \"Very Risky\",\n      color: \"text-red-400\",\n      bgColor: \"bg-red-400/20\",\n      progressColor: \"bg-red-500\",\n    };\n  };\n\n  const riskStatus = getRiskStatus();\n  const liquidationPrice = \"0.00 USDC\";\n  const dropPercentage = \"100%\";\n\n  const calculateFiatValue = () => {\n    if (!withdrawAmount || parseFloat(withdrawAmount) <= 0) return \"$0.00\";\n    const tokenValue = parseFloat(\n      suppliedAmountFiat.replace(\"$\", \"\").replace(\",\", \"\")\n    );\n    const tokenAmount = parseFloat(suppliedAmount.split(\" \")[0]);\n    const withdrawValue =\n      (parseFloat(withdrawAmount) / tokenAmount) * tokenValue;\n    return `$${withdrawValue.toFixed(5)}`;\n  };\n\n  const handleWithdraw = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!connected || !publicKey) {\n      toast.error(\"Wallet Not Connected\", {\n        description:\n          \"Please connect your wallet to proceed with the withdrawal.\",\n      });\n      return;\n    }\n\n    const amount = parseFloat(withdrawAmount);\n\n    if (isNaN(amount)) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Please enter a valid withdrawal amount.\",\n      });\n      return;\n    }\n\n    if (amount <= 0) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Withdrawal amount must be greater than 0.\",\n      });\n      return;\n    }\n\n    const availableBalance = parseFloat(suppliedAmount.split(\" \")[0]);\n    if (amount > availableBalance) {\n      toast.error(\"Insufficient Collateral\", {\n        description: `You cannot withdraw more than your supplied collateral of ${availableBalance} ${tokenSymbol}.`,\n      });\n      return;\n    }\n\n    try {\n      toast.info(\"Processing Withdrawal\", {\n        description: \"Please confirm the transaction in your wallet...\",\n      });\n\n      const wsolAccount = getAssociatedTokenAddressSync(NATIVE_MINT, publicKey);\n      const postInstructions = [];\n\n      postInstructions.push(\n        createCloseAccountInstruction(\n          wsolAccount,\n          publicKey, // destination for sol to reach\n          publicKey // authority\n        )\n      );\n\n      const amountInLamports = Math.floor(amount * 1e9);\n\n      // For Withdraw: col_amount < 0, debt_amount = 0\n      const txid = await operate(-amountInLamports, 0, postInstructions);\n\n      toast.success(\"Withdrawal Successful!\", {\n        description: `Successfully withdrew ${amount.toFixed(\n          6\n        )} ${tokenSymbol}. Transaction: ${txid}`,\n        duration: 5000,\n      });\n      setWithdrawAmount(\"\");\n      onOpenChange(false);\n    } catch (error) {\n      toast.error(\"Transaction Failed\", {\n        description:\n          error instanceof Error\n            ? error.message\n            : \"Something went wrong while processing your withdrawal. Please try again.\",\n      });\n      console.error(\"Withdraw error:\", error);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"max-w-md bg-[#0B121A] border border-[#19242e] text-neutral-200 p-0\"\n        showCloseButton={false}\n      >\n        <DialogTitle className=\"sr-only\">Withdraw</DialogTitle>\n        <h2 className=\"text-base font-semibold leading-none text-neutral-200 flex items-center justify-between border-b border-b-neutral-850 p-4\">\n          <span className=\"capitalize\">Withdraw</span>\n          <DialogClose className=\"flex items-center justify-center rounded-lg p-2 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-200 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-primary\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 20 20\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M2.0336 16.2126L8.2336 10.0126L2.0336 3.81263C1.7961 3.57903 1.66172 3.25951 1.66016 2.92669C1.65938 2.59309 1.79141 2.27357 2.02734 2.03763C2.26328 1.80247 2.5828 1.67045 2.9164 1.67201C3.25 1.67357 3.56874 1.80795 3.80234 2.04623L9.99994 8.24623L16.1999 2.04623C16.4335 1.80795 16.7523 1.67357 17.0859 1.67201C17.4187 1.67045 17.739 1.80248 17.9749 2.03763C18.2109 2.27357 18.3429 2.59309 18.3413 2.92669C18.3406 3.25951 18.2062 3.57903 17.9687 3.81263L11.7663 10.0126L17.9663 16.2126C18.2038 16.4462 18.3382 16.7658 18.3397 17.0986C18.3405 17.4322 18.2085 17.7517 17.9725 17.9876C17.7366 18.2228 17.4171 18.3548 17.0835 18.3533C16.7499 18.3517 16.4311 18.2173 16.1975 17.979L9.99994 11.779L3.79994 17.979C3.31088 18.4611 2.52494 18.4579 2.039 17.9736C1.55384 17.4884 1.54994 16.7025 2.03119 16.2126L2.0336 16.2126Z\"\n                fill=\"currentColor\"\n              ></path>\n            </svg>\n          </DialogClose>\n        </h2>\n\n        <form className=\"flex flex-col gap-4\" onSubmit={handleWithdraw}>\n          <div className=\"flex flex-col gap-2 p-4\">\n            <div className=\"grid grid-cols-2 rounded-xl border border-neutral-850 bg-neutral-925/75 p-4\">\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Supplied</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{suppliedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{suppliedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Borrowed</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{borrowedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{borrowedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col overflow-hidden rounded-xl border border-neutral-800 focus-within:shadow-swap-input-dark focus-within:ring-1 focus-within:ring-primary/50\">\n              <div className=\"flex flex-col gap-3 px-4 py-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm/5 text-neutral-200\">Withdraw</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex items-center gap-1 text-xs text-neutral-400\">\n                      <span className=\"iconify ph--wallet-light\"></span>\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{suppliedAmount}</span>\n                      </span>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={handleHalf}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      HALF\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={handleMax}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      MAX\n                    </button>\n                  </div>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex w-fit shrink-0 items-center justify-between gap-2.5 rounded-xl border border-neutral-850 bg-neutral-850 p-3\">\n                    <Image\n                      src={tokenIcon}\n                      alt={tokenAlt}\n                      width={24}\n                      height={24}\n                      className=\"h-6 w-6\"\n                    />\n                    <span className=\"text-sm/5 font-semibold\">\n                      {tokenSymbol}\n                    </span>\n                  </div>\n                  <div className=\"ml-auto flex flex-col text-right\">\n                    <input\n                      inputMode=\"decimal\"\n                      autoComplete=\"off\"\n                      name=\"amount\"\n                      data-lpignore=\"true\"\n                      placeholder=\"0.00\"\n                      value={withdrawAmount}\n                      onChange={handleWithdrawAmountChange}\n                      className=\"size-full w-full bg-transparent text-right text-3xl! font-semibold outline-none placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:text-neutral-500 disabled:opacity-100\"\n                      type=\"text\"\n                    />\n                    <span className=\"text-sm/5 text-neutral-400\">\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{calculateFiatValue()}</span>\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"border-y border-neutral-850 p-4\">\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"flex items-center justify-between font-semibold\">\n                <span className=\"text-neutral-200\">{riskPercentage}%</span>\n                <span className={riskStatus.color}>{riskStatus.text}</span>\n              </div>\n              <div className=\"flex flex-col items-center gap-2\">\n                <div\n                  role=\"progressbar\"\n                  aria-valuemax={100}\n                  aria-valuemin={0}\n                  aria-valuenow={riskPercentage}\n                  aria-valuetext={`${riskPercentage}%`}\n                  data-state=\"loading\"\n                  data-value={riskPercentage}\n                  data-max={100}\n                  className={`relative h-1.5 w-full overflow-hidden rounded-xl ${riskStatus.bgColor}`}\n                  style={{ transform: \"translateY(0px)\" }}\n                >\n                  <div\n                    data-state=\"loading\"\n                    data-value={riskPercentage}\n                    data-max={100}\n                    className={`h-full w-full ${riskStatus.progressColor}`}\n                    style={{\n                      transform: `translateX(-${100 - riskPercentage}%)`,\n                    }}\n                  />\n                </div>\n                <span className=\"ml-auto text-xs text-neutral-500\">\n                  Max: L.T. 80%\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col gap-4 p-4 pt-0\">\n            <div className=\"flex w-full items-start gap-2 text-xs text-neutral-500\">\n              <span\n                className=\"iconify ph--question-bold\"\n                style={{ height: \"1lh\", width: \"1lh\" }}\n              ></span>\n              <span>\n                If {tokenSymbol} reaches{\" \"}\n                <span className=\"relative inline-flex items-center rounded-sm\">\n                  <span translate=\"no\">{liquidationPrice}</span>\n                </span>{\" \"}\n                (drops by {dropPercentage}%), your position may be partially\n                liquidated\n              </span>\n            </div>\n            {!connected && (\n              <div className=\"flex items-start gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-xs text-yellow-400\">\n                <span\n                  className=\"iconify ph--warning\"\n                  style={{ height: \"1lh\", width: \"1lh\" }}\n                ></span>\n                <p>\n                  Please connect your wallet to proceed with the withdrawal.\n                </p>\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              disabled={\n                !withdrawAmount || parseFloat(withdrawAmount) <= 0 || !connected\n              }\n              className=\"inline-flex items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-6 py-3 text-sm rounded-xl\"\n            >\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">\n                {!connected ? \"Connect Wallet\" : \"Withdraw\"}\n              </span>\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n            </button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2355, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/slider.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useRef, useState, useEffect } from \"react\";\n\ninterface SliderProps {\n  value: number;\n  min?: number;\n  max?: number;\n  step?: number;\n  onChange: (value: number) => void;\n  className?: string; // Wrapper className\n  riskStatus: {\n    color: string;\n    bgColor: string;\n    progressColor: string;\n  };\n}\n\nexport const Slider = ({\n  value,\n  min = 0,\n  max = 100,\n  step = 1,\n  onChange,\n  className,\n  riskStatus,\n}: SliderProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const calculateValue = (clientX: number) => {\n    if (!containerRef.current) return;\n    const rect = containerRef.current.getBoundingClientRect();\n    const x = Math.max(0, Math.min(clientX - rect.left, rect.width));\n    const percentage = x / rect.width;\n    const rawValue = min + percentage * (max - min);\n    const steppedValue = Math.round(rawValue / step) * step;\n    return Math.max(min, Math.min(max, steppedValue));\n  };\n\n  const handlePointerDown = (e: React.PointerEvent) => {\n    setIsDragging(true);\n    containerRef.current?.setPointerCapture(e.pointerId);\n    const newValue = calculateValue(e.clientX);\n    if (newValue !== undefined) onChange(newValue);\n  };\n\n  const handlePointerMove = (e: React.PointerEvent) => {\n    if (!isDragging) return;\n    const newValue = calculateValue(e.clientX);\n    if (newValue !== undefined) onChange(newValue);\n  };\n\n  const handlePointerUp = (e: React.PointerEvent) => {\n    setIsDragging(false);\n    containerRef.current?.releasePointerCapture(e.pointerId);\n  };\n\n  const percentage = ((value - min) / (max - min)) * 100;\n\n  return (\n    <span\n      dir=\"ltr\"\n      data-orientation=\"horizontal\"\n      aria-disabled=\"false\"\n      className={`relative  flex h-5 w-full touch-none select-none items-center transition-none cursor-pointer ${className}`}\n      style={{ filter: \"drop-shadow(0px 0px 4px rgba(0, 0, 0, 0.5))\" }}\n      onPointerDown={handlePointerDown}\n      onPointerMove={handlePointerMove}\n      onPointerUp={handlePointerUp}\n      ref={containerRef}\n    >\n      <span\n        data-orientation=\"horizontal\"\n        className=\"relative h-1.5 bg-neutral-800 grow rounded-full overflow-hidden\"\n      >\n        <span\n          data-orientation=\"horizontal\"\n          className={`absolute h-full rounded-full ${riskStatus.progressColor}`}\n          style={{ width: `${percentage}%` }}\n        ></span>\n      </span>\n      <span\n        style={{\n          transform: `translateX(-50%)`,\n          position: \"absolute\",\n          left: `${percentage}%`,\n        }}\n      >\n        <span\n          role=\"slider\"\n          aria-valuemin={min}\n          aria-valuemax={max}\n          aria-valuenow={value}\n          tabIndex={0}\n          className={`flex size-5 items-center justify-center rounded-full focus:outline-none ${riskStatus.progressColor}`}\n        >\n          <div className=\"size-1.5 rounded-full bg-[#0C141D]\"></div>\n        </span>\n      </span>\n    </span>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;;;AAFA;;AAkBO,MAAM,SAAS,CAAC,EACrB,KAAK,EACL,MAAM,CAAC,EACP,MAAM,GAAG,EACT,OAAO,CAAC,EACR,QAAQ,EACR,SAAS,EACT,UAAU,EACE;;IACZ,MAAM,eAAe,IAAA,uKAAM,EAAiB;IAC5C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,MAAM,iBAAiB,CAAC;QACtB,IAAI,CAAC,aAAa,OAAO,EAAE;QAC3B,MAAM,OAAO,aAAa,OAAO,CAAC,qBAAqB;QACvD,MAAM,IAAI,KAAK,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,UAAU,KAAK,IAAI,EAAE,KAAK,KAAK;QAC9D,MAAM,aAAa,IAAI,KAAK,KAAK;QACjC,MAAM,WAAW,MAAM,aAAa,CAAC,MAAM,GAAG;QAC9C,MAAM,eAAe,KAAK,KAAK,CAAC,WAAW,QAAQ;QACnD,OAAO,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,KAAK;IACrC;IAEA,MAAM,oBAAoB,CAAC;QACzB,cAAc;QACd,aAAa,OAAO,EAAE,kBAAkB,EAAE,SAAS;QACnD,MAAM,WAAW,eAAe,EAAE,OAAO;QACzC,IAAI,aAAa,WAAW,SAAS;IACvC;IAEA,MAAM,oBAAoB,CAAC;QACzB,IAAI,CAAC,YAAY;QACjB,MAAM,WAAW,eAAe,EAAE,OAAO;QACzC,IAAI,aAAa,WAAW,SAAS;IACvC;IAEA,MAAM,kBAAkB,CAAC;QACvB,cAAc;QACd,aAAa,OAAO,EAAE,sBAAsB,EAAE,SAAS;IACzD;IAEA,MAAM,aAAa,AAAC,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,GAAG,IAAK;IAEnD,qBACE,6LAAC;QACC,KAAI;QACJ,oBAAiB;QACjB,iBAAc;QACd,WAAW,CAAC,6FAA6F,EAAE,WAAW;QACtH,OAAO;YAAE,QAAQ;QAA8C;QAC/D,eAAe;QACf,eAAe;QACf,aAAa;QACb,KAAK;;0BAEL,6LAAC;gBACC,oBAAiB;gBACjB,WAAU;0BAEV,cAAA,6LAAC;oBACC,oBAAiB;oBACjB,WAAW,CAAC,6BAA6B,EAAE,WAAW,aAAa,EAAE;oBACrE,OAAO;wBAAE,OAAO,GAAG,WAAW,CAAC,CAAC;oBAAC;;;;;;;;;;;0BAGrC,6LAAC;gBACC,OAAO;oBACL,WAAW,CAAC,gBAAgB,CAAC;oBAC7B,UAAU;oBACV,MAAM,GAAG,WAAW,CAAC,CAAC;gBACxB;0BAEA,cAAA,6LAAC;oBACC,MAAK;oBACL,iBAAe;oBACf,iBAAe;oBACf,iBAAe;oBACf,UAAU;oBACV,WAAW,CAAC,wEAAwE,EAAE,WAAW,aAAa,EAAE;8BAEhH,cAAA,6LAAC;wBAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;AAKzB;GApFa;KAAA"}},
    {"offset": {"line": 2474, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/modals/borrow/borrow.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogClose,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Slider } from \"@/components/ui/slider\";\nimport { toast } from \"sonner\";\nimport { useOperate } from \"@/hooks/useOperate\";\n\ninterface BorrowModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  vaultId: number;\n  positionId: number;\n  tokenIcon?: string;\n  tokenAlt?: string;\n  tokenSymbol?: string;\n  tokenBalance?: string;\n  tokenBalanceFiat?: string;\n  borrowedAmount?: string;\n  borrowedAmountFiat?: string;\n  suppliedAmount?: string;\n  suppliedAmountFiat?: string;\n}\n\nexport const BorrowModal = ({\n  open,\n  onOpenChange,\n  vaultId,\n  positionId,\n  tokenIcon = \"https://cdn.instadapp.io/icons/jupiter/tokens/usdc.png\",\n  tokenAlt = \"USDC\",\n  tokenSymbol = \"USDC\",\n  tokenBalance = \"0.00 USDC\",\n  borrowedAmount = \"0.00 USDC\",\n  borrowedAmountFiat = \"$0.00\",\n  suppliedAmount = \"14.14 SOL\",\n  suppliedAmountFiat = \"$1,770.02\",\n}: BorrowModalProps) => {\n  const [borrowAmount, setBorrowAmount] = useState(\"\");\n  const [riskPercentage, setRiskPercentage] = useState(0);\n  const { connected, publicKey } = useWallet();\n  const { operate } = useOperate(vaultId, positionId);\n\n  const suppliedValueProxy = parseFloat(\n    suppliedAmountFiat.replace(/[^0-9.]/g, \"\")\n  );\n\n  const handlePercentage = (percent: number) => {\n    const cappedPercent = Math.min(75, percent);\n    setRiskPercentage(cappedPercent);\n    if (!suppliedValueProxy || suppliedValueProxy <= 0) return;\n\n    const amount = (suppliedValueProxy * cappedPercent) / 100;\n    setBorrowAmount(amount > 0 ? amount.toFixed(2) : \"\");\n  };\n\n  const handleBorrowAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setBorrowAmount(value);\n\n    if (!value || isNaN(parseFloat(value))) {\n      setRiskPercentage(0);\n      return;\n    }\n\n    const numValue = parseFloat(value);\n    if (suppliedValueProxy > 0) {\n      const percent = (numValue / suppliedValueProxy) * 100;\n      setRiskPercentage(Math.min(75, Math.max(0, percent)));\n    }\n  };\n\n  const getRiskStatus = () => {\n    if (riskPercentage <= 60)\n      return {\n        text: \"Safe\",\n        color: \"text-emerald-400\",\n        bgColor: \"bg-emerald-400/20\",\n        progressColor: \"bg-emerald-500\",\n      };\n    if (riskPercentage <= 70)\n      return {\n        text: \"Risky\",\n        color: \"text-yellow-400\",\n        bgColor: \"bg-yellow-400/20\",\n        progressColor: \"bg-yellow-500\",\n      };\n    return {\n      text: \"Very Risky\",\n      color: \"text-orange-400\",\n      bgColor: \"bg-orange-400/20\",\n      progressColor: \"bg-orange-500\",\n      strokeColor: \"stroke-orange-500\",\n    };\n  };\n\n  const riskStatus = getRiskStatus();\n  const liquidationPrice = \"0.00 USDC\";\n  const dropPercentage = \"100%\";\n\n  const calculateFiatValue = () => {\n    if (!borrowAmount || parseFloat(borrowAmount) <= 0) return \"$0.00\";\n    return `$${parseFloat(borrowAmount).toFixed(2)}`;\n  };\n\n  const handleBorrow = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!connected || !publicKey) {\n      toast.error(\"Wallet Not Connected\", {\n        description: \"Please connect your wallet to proceed.\",\n      });\n      return;\n    }\n\n    const amount = parseFloat(borrowAmount);\n\n    if (isNaN(amount) || amount <= 0) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Please enter a valid borrow amount.\",\n      });\n      return;\n    }\n\n    try {\n      toast.info(\"Processing Borrow\", {\n        description: \"Please confirm the transaction in your wallet...\",\n      });\n\n      // convert amount to smallest unit (USDC has 6 decimals)\n      const amountInSmallestUnit = Math.floor(amount * 1e6);\n\n      // borrow: col_amount = 0, debt_amount > 0 (pass natural units)\n      const txid = await operate(0, amount);\n\n      toast.success(\"Borrow Successful!\", {\n        description: `Successfully borrowed ${amount.toFixed(\n          6\n        )} ${tokenSymbol}. Transaction: ${txid}`,\n        duration: 5000,\n      });\n      setBorrowAmount(\"\");\n      onOpenChange(false);\n    } catch (error) {\n      toast.error(\"Transaction Failed\", {\n        description:\n          error instanceof Error\n            ? error.message\n            : \"Something went wrong. Please try again.\",\n      });\n      console.error(\"Borrow error:\", error);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"max-w-md bg-[#0B121A] border border-[#19242e] text-neutral-200 p-0\"\n        showCloseButton={false}\n      >\n        <DialogTitle className=\"sr-only\">Borrow</DialogTitle>\n        <h2 className=\"text-base font-semibold leading-none text-neutral-200 flex items-center justify-between border-b border-b-neutral-850 p-4\">\n          <span className=\"capitalize\">Borrow</span>\n          <DialogClose className=\"flex items-center justify-center rounded-lg p-2 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-200 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-primary\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 20 20\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M2.0336 16.2126L8.2336 10.0126L2.0336 3.81263C1.7961 3.57903 1.66172 3.25951 1.66016 2.92669C1.65938 2.59309 1.79141 2.27357 2.02734 2.03763C2.26328 1.80247 2.5828 1.67045 2.9164 1.67201C3.25 1.67357 3.56874 1.80795 3.80234 2.04623L9.99994 8.24623L16.1999 2.04623C16.4335 1.80795 16.7523 1.67357 17.0859 1.67201C17.4187 1.67045 17.739 1.80248 17.9749 2.03763C18.2109 2.27357 18.3429 2.59309 18.3413 2.92669C18.3406 3.25951 18.2062 3.57903 17.9687 3.81263L11.7663 10.0126L17.9663 16.2126C18.2038 16.4462 18.3382 16.7658 18.3397 17.0986C18.3405 17.4322 18.2085 17.7517 17.9725 17.9876C17.7366 18.2228 17.4171 18.3548 17.0835 18.3533C16.7499 18.3517 16.4311 18.2173 16.1975 17.979L9.99994 11.779L3.79994 17.979C3.31088 18.4611 2.52494 18.4579 2.039 17.9736C1.55384 17.4884 1.54994 16.7025 2.03119 16.2126L2.0336 16.2126Z\"\n                fill=\"currentColor\"\n              ></path>\n            </svg>\n          </DialogClose>\n        </h2>\n\n        <form className=\"flex flex-col gap-4\" onSubmit={handleBorrow}>\n          <div className=\"flex flex-col gap-2 p-4\">\n            <div className=\"grid grid-cols-2 rounded-xl border border-neutral-850 bg-neutral-925/75 p-4\">\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Supplied</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{suppliedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{suppliedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Borrowed</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{borrowedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{borrowedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col overflow-hidden rounded-xl border border-neutral-800 focus-within:shadow-swap-input-dark focus-within:ring-1 focus-within:ring-primary/50\">\n              <div className=\"flex flex-col gap-3 px-4 py-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm/5 text-neutral-200\">Borrow</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex items-center gap-1 text-xs text-neutral-400\">\n                      <span className=\"iconify ph--wallet-light\"></span>\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{tokenBalance}</span>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex w-fit shrink-0 items-center justify-between gap-2.5 rounded-xl border border-neutral-850 bg-neutral-850 p-3\">\n                    <Image\n                      className=\"h-6 w-6\"\n                      height={32}\n                      width={32}\n                      alt={tokenAlt}\n                      src={tokenIcon}\n                    />\n                    <span className=\"text-sm/5 font-semibold\">\n                      {tokenSymbol}\n                    </span>\n                  </div>\n                  <div className=\"ml-auto flex flex-col text-right\">\n                    <input\n                      inputMode=\"decimal\"\n                      autoComplete=\"off\"\n                      name=\"amount\"\n                      data-lpignore=\"true\"\n                      placeholder=\"0.00\"\n                      className=\"size-full w-full bg-transparent text-right text-3xl! font-semibold outline-none placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:text-neutral-500 disabled:opacity-100\"\n                      type=\"text\"\n                      value={borrowAmount}\n                      onChange={handleBorrowAmountChange}\n                    />\n                    <span className=\"text-sm/5 text-neutral-400\">\n                      <span className=\"relative inline-flex items-center rounded-sm text-neutral-600\">\n                        <span translate=\"no\">{calculateFiatValue()}</span>\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"border-y border-neutral-850 p-4\">\n            <div className=\"flex flex-col gap-3\">\n              <div className=\"flex items-center justify-between font-semibold\">\n                <span className=\"flex items-center gap-2\">\n                  Status\n                  <span className={riskStatus.color}>{riskStatus.text}</span>\n                </span>\n                <span className=\"text-neutral-200\">{riskPercentage}%</span>\n              </div>\n              <div className=\"relative flex w-full flex-col items-center gap-2\">\n                <div className=\"w-full\">\n                  <Slider\n                    value={riskPercentage}\n                    onChange={handlePercentage}\n                    riskStatus={riskStatus}\n                    className=\"z-10\"\n                  />\n                  <div\n                    className=\"relative mb-4 w-full\"\n                    style={{ transform: \"translateY(-18px)\" }}\n                  >\n                    <div\n                      className=\"absolute top-0 text-center\"\n                      style={{ left: \"0%\", transform: \"translateX(-50%)\" }}\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"flex flex-col items-center gap-2\"\n                        onClick={() => handlePercentage(0)}\n                      >\n                        <div className=\"h-4 w-[3px] scale-125 rounded-2xl bg-emerald\"></div>\n                        <span className=\"text-xs text-neutral-500 translate-x-1.5\">\n                          0%\n                        </span>\n                      </button>\n                    </div>\n                    <div\n                      className=\"absolute top-0 text-center\"\n                      style={{ left: \"25%\", transform: \"translateX(-50%)\" }}\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"flex flex-col items-center gap-2\"\n                        onClick={() => handlePercentage(25)}\n                      >\n                        <div className=\"h-4 w-[3px] scale-125 rounded-2xl bg-neutral-750\"></div>\n                        <span className=\"text-xs text-neutral-500\">25%</span>\n                      </button>\n                    </div>\n                    <div\n                      className=\"absolute top-0 text-center\"\n                      style={{ left: \"50%\", transform: \"translateX(-50%)\" }}\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"flex flex-col items-center gap-2\"\n                        onClick={() => handlePercentage(50)}\n                      >\n                        <div className=\"h-4 w-[3px] scale-125 rounded-2xl bg-neutral-750\"></div>\n                        <span className=\"text-xs text-neutral-500\">50%</span>\n                      </button>\n                    </div>\n                    <div\n                      className=\"absolute top-0 text-center\"\n                      style={{ left: \"75%\", transform: \"translateX(-50%)\" }}\n                    >\n                      <button\n                        type=\"button\"\n                        className=\"flex flex-col items-center gap-2\"\n                        onClick={() => handlePercentage(75)}\n                      >\n                        <div className=\"h-4 w-[3px] rounded-2xl scale-125 bg-neutral-200\"></div>\n                        <span className=\"text-xs text-neutral-200\">75%</span>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <span className=\"ml-auto text-xs text-neutral-500\">\n                  Max: L.T. 80%\n                </span>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col gap-4 p-4 pt-0\">\n            <div className=\"flex w-full items-start gap-2 text-xs text-neutral-500\">\n              <span\n                className=\"iconify ph--question-bold\"\n                style={{ height: \"1lh\", width: \"1lh\" }}\n              ></span>\n              <span>\n                If SOL reaches{\" \"}\n                <span className=\"relative inline-flex items-center rounded-sm\">\n                  <span translate=\"no\">{liquidationPrice}</span>\n                </span>{\" \"}\n                (drops by {dropPercentage}%), your position may be partially\n                liquidated\n              </span>\n            </div>\n            <button\n              disabled={!borrowAmount || parseFloat(borrowAmount) <= 0}\n              className=\"inline-flex items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-6 py-3 text-sm rounded-xl\"\n              type=\"submit\"\n            >\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">Borrow</span>\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n            </button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3322, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/modals/borrow/repay.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState } from \"react\";\nimport Image from \"next/image\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogClose,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { toast } from \"sonner\";\nimport { useOperate } from \"@/hooks/useOperate\";\n\ninterface RepayModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  vaultId: number;\n  positionId: number;\n  tokenIcon?: string;\n  tokenAlt?: string;\n  tokenSymbol?: string;\n  tokenBalance?: string;\n  tokenBalanceFiat?: string;\n  borrowedAmount?: string;\n  borrowedAmountFiat?: string;\n}\n\nexport const RepayModal = ({\n  open,\n  onOpenChange,\n  vaultId,\n  positionId,\n  tokenIcon = \"https://cdn.instadapp.io/icons/jupiter/tokens/usdc.png\",\n  tokenAlt = \"USDC\",\n  tokenSymbol = \"USDC\",\n  tokenBalance = \"100.00 USDC\", // Available to repay\n  tokenBalanceFiat = \"$100.00\",\n  borrowedAmount = \"50.00 USDC\", // Debt to repay\n  borrowedAmountFiat = \"$50.00\",\n}: RepayModalProps) => {\n  const [repayAmount, setRepayAmount] = useState(\"\");\n  const { connected, publicKey } = useWallet();\n  const { operate } = useOperate(vaultId, positionId);\n\n  const handleHalf = () => {\n    const debt = parseFloat(borrowedAmount.split(\" \")[0]);\n    setRepayAmount((debt / 2).toFixed(6));\n  };\n\n  const handleMax = () => {\n    const debt = parseFloat(borrowedAmount.split(\" \")[0]);\n    setRepayAmount(debt.toFixed(6));\n  };\n\n  const handleRepayAmountChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    setRepayAmount(value);\n  };\n\n  const calculateFiatValue = () => {\n    if (!repayAmount || parseFloat(repayAmount) <= 0) return \"$0.00\";\n    // Simplified fiat calc\n    return `$${parseFloat(repayAmount).toFixed(2)}`;\n  };\n\n  const handleRepay = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!connected || !publicKey) {\n      toast.error(\"Wallet Not Connected\", {\n        description: \"Please connect your wallet.\",\n      });\n      return;\n    }\n\n    const amount = parseFloat(repayAmount);\n\n    if (isNaN(amount) || amount <= 0) {\n      toast.error(\"Invalid Amount\", {\n        description: \"Please enter a valid amount.\",\n      });\n      return;\n    }\n\n    // check if repay > borrowed\n    const borrowedAmountNum = parseFloat(borrowedAmount.split(\" \")[0]);\n    if (amount > borrowedAmountNum) {\n      toast.error(\"Amount Exceeds Borrowed Debt\", {\n        description: `You cannot repay more than your borrowed amount of ${borrowedAmountNum.toFixed(\n          6\n        )} ${tokenSymbol}. Click MAX to repay all.`,\n        duration: 5000,\n      });\n      return;\n    }\n\n    try {\n      toast.info(\"Processing Repayment\", {\n        description: \"Please confirm the transaction in your wallet...\",\n      });\n\n      // amount -> smallest unit of usdc\n      const amountInSmallestUnit = Math.floor(amount * 1e6);\n\n      //payback: col_amount = 0, debt_amount < 0\n      const txid = await operate(0, -amountInSmallestUnit);\n\n      toast.success(\"Repay Successful!\", {\n        description: `Successfully repaid ${amount.toFixed(\n          6\n        )} ${tokenSymbol}. Transaction: ${txid}`,\n        duration: 5000,\n      });\n      setRepayAmount(\"\");\n      onOpenChange(false);\n    } catch (error) {\n      toast.error(\"Transaction Failed\", {\n        description:\n          error instanceof Error\n            ? error.message\n            : \"Something went wrong. Please try again.\",\n      });\n      setRepayAmount(\"\");\n      console.error(\"Repay error:\", error);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent\n        className=\"max-w-md bg-[#0B121A] border border-[#19242e] text-neutral-200 p-0\"\n        showCloseButton={false}\n      >\n        <DialogTitle className=\"sr-only\">Repay</DialogTitle>\n        <h2 className=\"text-base font-semibold leading-none text-neutral-200 flex items-center justify-between border-b border-b-neutral-850 p-4\">\n          <span className=\"capitalize\">Repay</span>\n          <DialogClose className=\"flex items-center justify-center rounded-lg p-2 text-neutral-500 hover:bg-neutral-800 hover:text-neutral-200 focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-primary\">\n            <svg\n              width=\"16\"\n              height=\"16\"\n              viewBox=\"0 0 20 20\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M2.0336 16.2126L8.2336 10.0126L2.0336 3.81263C1.7961 3.57903 1.66172 3.25951 1.66016 2.92669C1.65938 2.59309 1.79141 2.27357 2.02734 2.03763C2.26328 1.80247 2.5828 1.67045 2.9164 1.67201C3.25 1.67357 3.56874 1.80795 3.80234 2.04623L9.99994 8.24623L16.1999 2.04623C16.4335 1.80795 16.7523 1.67357 17.0859 1.67201C17.4187 1.67045 17.739 1.80248 17.9749 2.03763C18.2109 2.27357 18.3429 2.59309 18.3413 2.92669C18.3406 3.25951 18.2062 3.57903 17.9687 3.81263L11.7663 10.0126L17.9663 16.2126C18.2038 16.4462 18.3382 16.7658 18.3397 17.0986C18.3405 17.4322 18.2085 17.7517 17.9725 17.9876C17.7366 18.2228 17.4171 18.3548 17.0835 18.3533C16.7499 18.3517 16.4311 18.2173 16.1975 17.979L9.99994 11.779L3.79994 17.979C3.31088 18.4611 2.52494 18.4579 2.039 17.9736C1.55384 17.4884 1.54994 16.7025 2.03119 16.2126L2.0336 16.2126Z\"\n                fill=\"currentColor\"\n              ></path>\n            </svg>\n          </DialogClose>\n        </h2>\n\n        <form className=\"flex flex-col gap-4\" onSubmit={handleRepay}>\n          <div className=\"flex flex-col gap-2 p-4\">\n            <div className=\"grid grid-cols-2 rounded-xl border border-neutral-850 bg-neutral-925/75 p-4\">\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Wallet Balance</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{tokenBalance}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{tokenBalanceFiat}</span>\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex flex-col gap-0.5\">\n                <span className=\"text-xs text-neutral-400\">Borrowed</span>\n                <div className=\"flex flex-col text-lg\">\n                  <span className=\"font-semibold text-neutral-200\">\n                    <span className=\"relative inline-flex items-center rounded-sm\">\n                      <span translate=\"no\">{borrowedAmount}</span>\n                    </span>\n                  </span>\n                  <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-500\">\n                    <span translate=\"no\">{borrowedAmountFiat}</span>\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex flex-col overflow-hidden rounded-xl border border-neutral-800 focus-within:shadow-swap-input-dark focus-within:ring-1 focus-within:ring-primary/50\">\n              <div className=\"flex flex-col gap-3 px-4 py-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-sm/5 text-neutral-200\">Repay</span>\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"flex items-center gap-1 text-xs text-neutral-400\">\n                      <span className=\"iconify ph--wallet-light\"></span>\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{tokenBalance}</span>\n                      </span>\n                    </div>\n                    <button\n                      type=\"button\"\n                      onClick={handleHalf}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      HALF\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={handleMax}\n                      className=\"rounded-md bg-neutral-800 px-2 py-1 text-[10px] font-medium leading-4 text-neutral-400 hover:text-primary hover:ring-1 hover:ring-primary\"\n                    >\n                      MAX\n                    </button>\n                  </div>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex w-fit shrink-0 items-center justify-between gap-2.5 rounded-xl border border-neutral-850 bg-neutral-850 p-3\">\n                    <Image\n                      src={tokenIcon}\n                      alt={tokenAlt}\n                      width={24}\n                      height={24}\n                      className=\"h-6 w-6\"\n                    />\n                    <span className=\"text-sm/5 font-semibold\">\n                      {tokenSymbol}\n                    </span>\n                  </div>\n                  <div className=\"ml-auto flex flex-col text-right\">\n                    <input\n                      inputMode=\"decimal\"\n                      autoComplete=\"off\"\n                      name=\"amount\"\n                      data-lpignore=\"true\"\n                      placeholder=\"0.00\"\n                      value={repayAmount}\n                      onChange={handleRepayAmountChange}\n                      className=\"size-full w-full bg-transparent text-right text-3xl! font-semibold outline-none placeholder:text-neutral-600 disabled:cursor-not-allowed disabled:text-neutral-500 disabled:opacity-100\"\n                      type=\"text\"\n                    />\n                    <span className=\"text-sm/5 text-neutral-400\">\n                      <span className=\"relative inline-flex items-center rounded-sm\">\n                        <span translate=\"no\">{calculateFiatValue()}</span>\n                      </span>\n                    </span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex flex-col gap-4 p-4 pt-0\">\n            {!connected && (\n              <div className=\"flex items-start gap-2 p-3 bg-yellow-500/10 border border-yellow-500/20 rounded-lg text-xs text-yellow-400\">\n                <span\n                  className=\"iconify ph--warning\"\n                  style={{ height: \"1lh\", width: \"1lh\" }}\n                ></span>\n                <p>Please connect your wallet to proceed with the repayment.</p>\n              </div>\n            )}\n            <button\n              type=\"submit\"\n              disabled={\n                !repayAmount || parseFloat(repayAmount) <= 0 || !connected\n              }\n              className=\"inline-flex items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-6 py-3 text-sm rounded-xl\"\n            >\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">\n                {!connected ? \"Connect Wallet\" : \"Repay\"}\n              </span>\n              <span className=\"pointer-events-auto inline-flex empty:hidden\"></span>\n            </button>\n          </div>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3895, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/custom/card.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport React, { useState } from \"react\";\nimport { DepositModal } from \"@/components/ui/modals/supply/deposit\";\nimport { WithdrawModal } from \"@/components/ui/modals/supply/withdraw\";\nimport { BorrowModal } from \"@/components/ui/modals/borrow/borrow\";\nimport { RepayModal } from \"@/components/ui/modals/borrow/repay\";\n\ninterface CustomCardProps {\n  title: string;\n  tokenSymbol: string;\n  tokenAmount: number;\n  tokenAmountFormatted: string;\n  usdValue: number;\n  usdValueFormatted: string;\n  tokenIcon: string;\n  tokenName: string;\n  apyFormatted: string;\n  type: \"collateral\" | \"debt\";\n  borrowed: number;\n  supplied: number;\n  suppliedUsd: number;\n  solPrice: number;\n  vaultId: number;\n  positionId: number;\n}\n\nexport const CustomCard = ({\n  title,\n  tokenSymbol,\n  tokenAmountFormatted,\n  usdValueFormatted,\n  tokenIcon,\n  tokenName,\n  apyFormatted,\n  type,\n  borrowed,\n  supplied,\n  suppliedUsd,\n  vaultId,\n  positionId,\n}: CustomCardProps) => {\n  const [depositOpen, setDepositOpen] = useState(false);\n  const [withdrawOpen, setWithdrawOpen] = useState(false);\n  const [borrowOpen, setBorrowOpen] = useState(false);\n  const [repayOpen, setRepayOpen] = useState(false);\n\n  const apyColorClass =\n    type === \"collateral\" ? \"text-emerald-400\" : \"text-orange-400\";\n\n  const isSupplyCard = type === \"collateral\";\n\n  const borrowedAmountFormatted = `${borrowed.toFixed(2)} USDC`;\n  const borrowedAmountFiat = `$${borrowed.toFixed(2)}`;\n\n  const amountDisplay = `${tokenAmountFormatted} ${tokenSymbol}`;\n\n  return (\n    <div className=\"overflow-hidden rounded-2xl border border-[#19242e] bg-[#0B121A]\">\n      <div className=\"flex items-center justify-between border-b border-neutral-850 p-4\">\n        <span className=\"text-xs font-medium text-neutral-200\">{title}</span>\n      </div>\n      <div className=\"flex items-center justify-between border-b border-neutral-850 p-4\">\n        <div className=\"flex items-center gap-2.5 sm:gap-3\">\n          <Image\n            className=\"size-9 sm:size-10\"\n            height={32}\n            width={32}\n            alt={tokenName}\n            src={tokenIcon}\n          />\n          <div className=\"flex flex-col\">\n            <span className=\"text-lg font-semibold text-neutral-200 sm:text-xl\">\n              <span className=\"relative items-center rounded-sm inline-block\">\n                <span translate=\"no\">{amountDisplay}</span>\n              </span>\n            </span>\n            <span className=\"relative inline-flex items-center rounded-sm text-xs text-neutral-400\">\n              <span translate=\"no\">{usdValueFormatted}</span>\n            </span>\n          </div>\n        </div>\n        <div className=\"flex flex-col text-right\">\n          <div className=\"flex items-center gap-1.5 text-lg font-medium sm:text-xl\">\n            <button\n              type=\"button\"\n              aria-haspopup=\"dialog\"\n              aria-expanded=\"false\"\n              aria-controls=\"radix-:rn:\"\n              data-state=\"closed\"\n              className=\"outline-none\"\n            >\n              <div className=\"flex items-center gap-1\">\n                {type === \"collateral\" && (\n                  <div className=\"flex items-center -space-x-1.5 empty:hidden\">\n                    <Image\n                      className=\"size-4\"\n                      height={32}\n                      width={32}\n                      alt={tokenName}\n                      src={tokenIcon}\n                    />\n                  </div>\n                )}\n                <span\n                  className={`flex underline decoration-dashed decoration-from-font underline-offset-4 ${apyColorClass}`}\n                >\n                  {apyFormatted}\n                </span>\n              </div>\n            </button>\n          </div>\n          <button\n            type=\"button\"\n            className=\"outline-none inline-flex items-center gap-1 hover:text-neutral-200 ml-auto text-xs text-neutral-400\"\n            aria-haspopup=\"dialog\"\n            aria-expanded=\"false\"\n            aria-controls=\"radix-:ro:\"\n            data-state=\"closed\"\n          >\n            <span className=\"uppercase\"> apy</span>\n            <span className=\"iconify inline-block shrink-0 ph--arrows-left-right-bold\"></span>\n          </button>\n        </div>\n      </div>\n      <div className=\"grid grid-cols-2 gap-2 p-4 sm:gap-4\">\n        {isSupplyCard ? (\n          <>\n            <button\n              type=\"button\"\n              onClick={() => setDepositOpen(true)}\n              className=\"inline-flex cursor-pointer items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-4 py-2.5 text-xs rounded-lg\"\n            >\n              <span className=\"inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">Deposit</span>\n              <span className=\"inline-flex empty:hidden\"></span>\n            </button>\n            <button\n              type=\"button\"\n              onClick={() => setWithdrawOpen(true)}\n              className=\"inline-flex cursor-pointer items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary/5 text-primary-200 hover:bg-primary/20 focus:ring-primary/10 px-4 py-2.5 text-xs rounded-lg\"\n            >\n              <span className=\"inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">Withdraw</span>\n              <span className=\"inline-flex empty:hidden\"></span>\n            </button>\n            <DepositModal\n              open={depositOpen}\n              onOpenChange={setDepositOpen}\n              vaultId={vaultId}\n              positionId={positionId}\n              tokenIcon={tokenIcon}\n              tokenAlt={tokenName}\n              tokenSymbol={tokenSymbol}\n              tokenBalance={amountDisplay}\n              tokenBalanceFiat={usdValueFormatted}\n              borrowedAmount={borrowedAmountFormatted}\n              borrowedAmountFiat={borrowedAmountFiat}\n            />\n            <WithdrawModal\n              open={withdrawOpen}\n              onOpenChange={setWithdrawOpen}\n              vaultId={vaultId}\n              positionId={positionId}\n              tokenIcon={tokenIcon}\n              tokenAlt={tokenName}\n              tokenSymbol={tokenSymbol}\n              suppliedAmount={amountDisplay}\n              suppliedAmountFiat={usdValueFormatted}\n              borrowedAmount={borrowedAmountFormatted}\n              borrowedAmountFiat={borrowedAmountFiat}\n            />\n          </>\n        ) : (\n          <>\n            <button\n              className=\"inline-flex cursor-pointer items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary text-neutral-950 hover:bg-primary-300 focus:ring-primary-300 px-4 py-2.5 text-xs rounded-lg\"\n              onClick={() => setBorrowOpen(true)}\n            >\n              <span className=\"inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">Borrow</span>\n              <span className=\"inline-flex empty:hidden\"></span>\n            </button>\n            <button\n              className=\"inline-flex cursor-pointer items-center justify-center gap-1.5 font-medium transition-colors focus:outline-none focus:ring-1 disabled:pointer-events-none disabled:opacity-50 bg-primary/5 text-primary-200 hover:bg-primary/20 focus:ring-primary/10 px-4 py-2.5 text-xs rounded-lg\"\n              onClick={() => setRepayOpen(true)}\n            >\n              <span className=\"inline-flex empty:hidden\"></span>\n              <span className=\"contents truncate\">Repay</span>\n              <span className=\"inline-flex empty:hidden\"></span>\n            </button>\n            <BorrowModal\n              open={borrowOpen}\n              onOpenChange={setBorrowOpen}\n              vaultId={vaultId}\n              positionId={positionId}\n              tokenIcon={tokenIcon}\n              tokenAlt={tokenName}\n              tokenSymbol={tokenSymbol}\n              tokenBalance=\"0.00\" // Wallet balance not available in props\n              tokenBalanceFiat=\"$0.00\"\n              borrowedAmount={borrowedAmountFormatted}\n              borrowedAmountFiat={borrowedAmountFiat}\n              suppliedAmount={`${supplied.toFixed(2)} SOL`}\n              suppliedAmountFiat={`$${suppliedUsd.toFixed(2)}`}\n            />\n            <RepayModal\n              open={repayOpen}\n              onOpenChange={setRepayOpen}\n              vaultId={vaultId}\n              positionId={positionId}\n              tokenIcon={tokenIcon}\n              tokenAlt={tokenName}\n              tokenSymbol={tokenSymbol}\n              tokenBalance=\"0.00\" // Wallet balance not available in props\n              tokenBalanceFiat=\"$0.00\"\n              borrowedAmount={borrowedAmountFormatted}\n            />\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;;AA4BO,MAAM,aAAa,CAAC,EACzB,KAAK,EACL,WAAW,EACX,oBAAoB,EACpB,iBAAiB,EACjB,SAAS,EACT,SAAS,EACT,YAAY,EACZ,IAAI,EACJ,QAAQ,EACR,QAAQ,EACR,WAAW,EACX,OAAO,EACP,UAAU,EACM;;IAChB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,MAAM,gBACJ,SAAS,eAAe,qBAAqB;IAE/C,MAAM,eAAe,SAAS;IAE9B,MAAM,0BAA0B,GAAG,SAAS,OAAO,CAAC,GAAG,KAAK,CAAC;IAC7D,MAAM,qBAAqB,CAAC,CAAC,EAAE,SAAS,OAAO,CAAC,IAAI;IAEpD,MAAM,gBAAgB,GAAG,qBAAqB,CAAC,EAAE,aAAa;IAE9D,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAK,WAAU;8BAAwC;;;;;;;;;;;0BAE1D,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,2IAAK;gCACJ,WAAU;gCACV,QAAQ;gCACR,OAAO;gCACP,KAAK;gCACL,KAAK;;;;;;0CAEP,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCAAK,WAAU;kDACd,cAAA,6LAAC;4CAAK,WAAU;sDACd,cAAA,6LAAC;gDAAK,WAAU;0DAAM;;;;;;;;;;;;;;;;kDAG1B,6LAAC;wCAAK,WAAU;kDACd,cAAA,6LAAC;4CAAK,WAAU;sDAAM;;;;;;;;;;;;;;;;;;;;;;;kCAI5B,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACb,cAAA,6LAAC;oCACC,MAAK;oCACL,iBAAc;oCACd,iBAAc;oCACd,iBAAc;oCACd,cAAW;oCACX,WAAU;8CAEV,cAAA,6LAAC;wCAAI,WAAU;;4CACZ,SAAS,8BACR,6LAAC;gDAAI,WAAU;0DACb,cAAA,6LAAC,2IAAK;oDACJ,WAAU;oDACV,QAAQ;oDACR,OAAO;oDACP,KAAK;oDACL,KAAK;;;;;;;;;;;0DAIX,6LAAC;gDACC,WAAW,CAAC,yEAAyE,EAAE,eAAe;0DAErG;;;;;;;;;;;;;;;;;;;;;;0CAKT,6LAAC;gCACC,MAAK;gCACL,WAAU;gCACV,iBAAc;gCACd,iBAAc;gCACd,iBAAc;gCACd,cAAW;;kDAEX,6LAAC;wCAAK,WAAU;kDAAY;;;;;;kDAC5B,6LAAC;wCAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;;0BAItB,6LAAC;gBAAI,WAAU;0BACZ,6BACC;;sCACE,6LAAC;4BACC,MAAK;4BACL,SAAS,IAAM,eAAe;4BAC9B,WAAU;;8CAEV,6LAAC;oCAAK,WAAU;;;;;;8CAChB,6LAAC;oCAAK,WAAU;8CAAoB;;;;;;8CACpC,6LAAC;oCAAK,WAAU;;;;;;;;;;;;sCAElB,6LAAC;4BACC,MAAK;4BACL,SAAS,IAAM,gBAAgB;4BAC/B,WAAU;;8CAEV,6LAAC;oCAAK,WAAU;;;;;;8CAChB,6LAAC;oCAAK,WAAU;8CAAoB;;;;;;8CACpC,6LAAC;oCAAK,WAAU;;;;;;;;;;;;sCAElB,6LAAC,0KAAY;4BACX,MAAM;4BACN,cAAc;4BACd,SAAS;4BACT,YAAY;4BACZ,WAAW;4BACX,UAAU;4BACV,aAAa;4BACb,cAAc;4BACd,kBAAkB;4BAClB,gBAAgB;4BAChB,oBAAoB;;;;;;sCAEtB,6LAAC,4KAAa;4BACZ,MAAM;4BACN,cAAc;4BACd,SAAS;4BACT,YAAY;4BACZ,WAAW;4BACX,UAAU;4BACV,aAAa;4BACb,gBAAgB;4BAChB,oBAAoB;4BACpB,gBAAgB;4BAChB,oBAAoB;;;;;;;iDAIxB;;sCACE,6LAAC;4BACC,WAAU;4BACV,SAAS,IAAM,cAAc;;8CAE7B,6LAAC;oCAAK,WAAU;;;;;;8CAChB,6LAAC;oCAAK,WAAU;8CAAoB;;;;;;8CACpC,6LAAC;oCAAK,WAAU;;;;;;;;;;;;sCAElB,6LAAC;4BACC,WAAU;4BACV,SAAS,IAAM,aAAa;;8CAE5B,6LAAC;oCAAK,WAAU;;;;;;8CAChB,6LAAC;oCAAK,WAAU;8CAAoB;;;;;;8CACpC,6LAAC;oCAAK,WAAU;;;;;;;;;;;;sCAElB,6LAAC,wKAAW;4BACV,MAAM;4BACN,cAAc;4BACd,SAAS;4BACT,YAAY;4BACZ,WAAW;4BACX,UAAU;4BACV,aAAa;4BACb,cAAa;4BACb,kBAAiB;4BACjB,gBAAgB;4BAChB,oBAAoB;4BACpB,gBAAgB,GAAG,SAAS,OAAO,CAAC,GAAG,IAAI,CAAC;4BAC5C,oBAAoB,CAAC,CAAC,EAAE,YAAY,OAAO,CAAC,IAAI;;;;;;sCAElD,6LAAC,sKAAU;4BACT,MAAM;4BACN,cAAc;4BACd,SAAS;4BACT,YAAY;4BACZ,WAAW;4BACX,UAAU;4BACV,aAAa;4BACb,cAAa;4BACb,kBAAiB;4BACjB,gBAAgB;;;;;;;;;;;;;;;;;;;AAO9B;GApMa;KAAA"}},
    {"offset": {"line": 4342, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/ui/custom/data-card.tsx"],"sourcesContent":["interface DataCardProps {\n  suppliedAmount: number;\n  suppliedToken: string;\n  suppliedAPY: number;\n  borrowedAmount: number;\n  borrowedToken: string;\n  borrowedAPY: number;\n  solPrice?: number;\n}\n\nconst calculateMetrics = (\n  supply: number,\n  borrow: number,\n  supplyAPY: number,\n  borrowAPY: number,\n  price: number\n) => {\n  const maxLiquidationRatio = 0.8;\n  const totalCollateralValue = supply * price;\n\n  const netYield =\n    totalCollateralValue > 0\n      ? supplyAPY - (borrowAPY * borrow) / totalCollateralValue\n      : 0;\n\n  const priceAtLiquidation =\n    supply > 0 && maxLiquidationRatio > 0\n      ? borrow / (supply * maxLiquidationRatio)\n      : 0;\n\n  const priceDropPercent =\n    priceAtLiquidation > 0 && price > 0\n      ? ((price - priceAtLiquidation) / price) * 100\n      : 0;\n\n  const utilizationRatio =\n    totalCollateralValue > 0\n      ? Math.min((borrow / totalCollateralValue) * 100, 100)\n      : 0;\n\n  return {\n    netYield,\n    priceAtLiquidation,\n    priceDropPercent,\n    utilizationRatio,\n    totalCollateralValue,\n  };\n};\n\nconst determineRiskLevel = (utilization: number) => {\n  const thresholds = {\n    critical: 80,\n    high: 60,\n    medium: 30,\n  };\n\n  if (utilization >= thresholds.critical) {\n    return {\n      label: \"Liquidated\",\n      textColor: \"text-red-500\",\n      background: \"bg-red-400/20\",\n      progress: \"bg-red-500\",\n    };\n  }\n\n  if (utilization >= thresholds.high) {\n    return {\n      label: \"Risky\",\n      textColor: \"text-orange-400\",\n      background: \"bg-orange-400/20\",\n      progress: \"bg-orange-500\",\n    };\n  }\n\n  if (utilization >= thresholds.medium) {\n    return {\n      label: \"Moderate\",\n      textColor: \"text-yellow-400\",\n      background: \"bg-yellow-400/20\",\n      progress: \"bg-yellow-400\",\n    };\n  }\n\n  return {\n    label: \"Safe\",\n    textColor: \"text-emerald-400\",\n    background: \"bg-emerald-400/20\",\n    progress: \"bg-emerald-500\",\n  };\n};\n\nexport const DataCard = ({\n  suppliedAmount,\n  suppliedToken,\n  suppliedAPY,\n  borrowedAmount,\n  borrowedToken,\n  borrowedAPY,\n  solPrice = 142.5,\n}: DataCardProps) => {\n  const metrics = calculateMetrics(\n    suppliedAmount,\n    borrowedAmount,\n    suppliedAPY,\n    borrowedAPY,\n    solPrice\n  );\n\n  const riskInfo = determineRiskLevel(metrics.utilizationRatio);\n\n  return (\n    <div className=\"relative flex flex-col justify-between gap-2 overflow-hidden rounded-xl border border-neutral-850 p-4\">\n      <div className=\"flex w-full items-center justify-between\">\n        <span className=\"flex items-center gap-1.5 text-sm text-neutral-400\">\n          <div className=\"flex items-center gap-1.5\">\n            <button\n              type=\"button\"\n              className=\"outline-none cursor-pointer text-neutral-400 underline decoration-neutral-600 decoration-dashed decoration-from-font underline-offset-4 text-sm\"\n              aria-haspopup=\"dialog\"\n              aria-expanded=\"false\"\n              aria-controls=\"radix-:rr:\"\n              data-state=\"closed\"\n              tabIndex={-1}\n            >\n              Position PNL (7D)\n            </button>\n\n            <button\n              type=\"button\"\n              className=\"inline-flex items-center gap-1 text-neutral-400 hover:text-neutral-200 text-sm\"\n            >\n              <span className=\"iconify inline-block shrink-0 ph--arrows-left-right-bold\" />\n            </button>\n          </div>\n          <span className=\"iconify ph--currency-dollar-bold\" />\n        </span>\n\n        <div className=\"flex items-baseline gap-1.5\">\n          <button\n            type=\"button\"\n            aria-haspopup=\"dialog\"\n            aria-expanded=\"false\"\n            aria-controls=\"radix-:r12:\"\n            data-state=\"closed\"\n            className=\"outline-none\"\n            tabIndex={-1}\n          >\n            <div className=\"flex items-center gap-1\">\n              <span\n                className=\"relative inline-flex items-center rounded-sm text-sm underline decoration-dashed decoration-from-font underline-offset-4 text-rose\"\n                data-num=\"-0.6083109151472285\"\n              >\n                <span translate=\"no\">-$0.60831</span>\n              </span>\n            </div>\n          </button>\n          <span className=\"text-sm text-neutral-400\">(-16.23%)</span>\n        </div>\n      </div>\n\n      <div className=\"flex w-full items-center justify-between\">\n        <span className=\"flex items-center gap-1.5 text-sm text-neutral-400\">\n          <button\n            type=\"button\"\n            aria-haspopup=\"dialog\"\n            aria-expanded=\"false\"\n            aria-controls=\"radix-:rs:\"\n            data-state=\"closed\"\n            className=\"outline-none\"\n            tabIndex={-1}\n          >\n            <span className=\"underline decoration-neutral-600 decoration-dashed decoration-from-font underline-offset-4\">\n              Net APY\n            </span>\n          </button>\n          <span className=\"iconify ph--percent\" />\n        </span>\n        <span\n          className={`text-sm ${\n            metrics.netYield >= 0 ? \"text-emerald-400\" : \"text-red-400\"\n          }`}\n        >\n          {metrics.netYield >= 0 ? \"+\" : \"\"}\n          {metrics.netYield.toFixed(2)}%\n        </span>\n      </div>\n\n      <div className=\"flex w-full items-center justify-between\">\n        <span className=\"flex items-center gap-1.5 text-sm text-neutral-400\">\n          <button\n            type=\"button\"\n            aria-haspopup=\"dialog\"\n            aria-expanded=\"false\"\n            aria-controls=\"radix-:rt:\"\n            data-state=\"closed\"\n            className=\"outline-none\"\n            tabIndex={-1}\n          >\n            <span className=\"underline decoration-neutral-600 decoration-dashed decoration-from-font underline-offset-4\">\n              Liq. Price/Offset\n            </span>\n          </button>\n          <span className=\"iconify ph--align-left\" />\n        </span>\n\n        <span className=\"text-sm text-neutral-200\">\n          <span className=\"relative inline-flex items-center rounded-sm\">\n            <span translate=\"no\">\n              {metrics.priceAtLiquidation.toFixed(2)} {borrowedToken}\n            </span>\n          </span>{\" \"}\n          / {metrics.priceDropPercent.toFixed(2)}%\n        </span>\n      </div>\n\n      <div className=\"flex flex-col gap-3\">\n        <div className=\"flex w-full items-center justify-between\">\n          <span className=\"flex items-center gap-1.5 text-sm text-neutral-400\">\n            <button\n              type=\"button\"\n              aria-haspopup=\"dialog\"\n              aria-expanded=\"false\"\n              aria-controls=\"radix-:ru:\"\n              data-state=\"closed\"\n              className=\"outline-none\"\n              tabIndex={-1}\n            >\n              <span className=\"underline decoration-neutral-600 decoration-dashed decoration-from-font underline-offset-4\">\n                Position Health\n              </span>\n            </button>\n            <span className=\"iconify ph--shield-check\" />\n          </span>\n\n          <span className=\"flex items-center gap-2 text-neutral-200\">\n            <span className={`${riskInfo.textColor} text-sm`}>\n              {riskInfo.label}\n            </span>\n            <span className=\"text-sm\">\n              {metrics.utilizationRatio.toFixed(2)}%\n            </span>\n          </span>\n        </div>\n\n        <div className=\"flex flex-col gap-2\">\n          <div\n            role=\"progressbar\"\n            aria-valuemin={0}\n            aria-valuemax={100}\n            aria-valuenow={metrics.utilizationRatio}\n            aria-valuetext={`${metrics.utilizationRatio.toFixed(2)}%`}\n            data-state=\"loading\"\n            data-value={metrics.utilizationRatio}\n            data-max=\"100\"\n            className={`relative h-1.5 w-full overflow-hidden rounded-xl ${riskInfo.background}`}\n            style={{ transform: \"translateY(0px)\" }}\n          >\n            <div\n              data-state=\"loading\"\n              data-value={metrics.utilizationRatio}\n              data-max=\"100\"\n              className={`h-full w-full transition-all duration-300 ${riskInfo.progress}`}\n              style={{ width: `${Math.min(metrics.utilizationRatio, 100)}%` }}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between text-xs text-neutral-500\">\n            <span>{metrics.utilizationRatio.toFixed(2)}%</span>\n            <span>Max: L.T. 80%</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4824, "column": 0}, "map": {"version":3,"sources":["file:///Users/mrhapile/project/Solana-Credit-Engine/src/components/card-container.tsx"],"sourcesContent":["\"use client\";\n\nimport { usePosition } from \"@/hooks/usePosition\";\n\nimport { CustomCard } from \"./ui/custom/card\";\nimport { DataCard } from \"./ui/custom/data-card\";\n\nconst CardContainer = ({\n  vaultId,\n  positionId,\n}: {\n  vaultId: number;\n  positionId: number;\n}) => {\n  const {\n    formatted: positionData,\n    loading,\n    error,\n  } = usePosition(vaultId, positionId);\n\n  if (loading) {\n    return (\n      <div className=\"grid gap-5 lg:grid-cols-3 sm:grid-cols-2\">\n        {[1, 2, 3].map((i) => (\n          <div key={i} className=\"overflow-hidden rounded-2xl border border-[#19242e] bg-[#0B121A] h-[195px] animate-pulse\">\n            <div className=\"border-b border-neutral-850 p-4 h-[45px]\" />\n            <div className=\"border-b border-neutral-850 p-4 h-[85px]\" />\n            <div className=\"p-4 grid grid-cols-2 gap-4 h-[63px]\">\n              <div className=\"bg-[#0d1520] rounded-lg\" />\n              <div className=\"bg-[#0d1520] rounded-lg\" />\n            </div>\n          </div>\n        ))}\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"p-6 text-red-500 border border-red-500/20 bg-red-500/10 rounded-xl\">\n        Failed to load position: {error}\n      </div>\n    );\n  }\n\n  if (!positionData) {\n    return (\n      <div className=\"p-6 text-yellow-500 border border-yellow-500/20 bg-yellow-500/10 rounded-xl\">\n        No position found for this ID.\n      </div>\n    );\n  }\n\n  const data = positionData;\n\n  const collateralAmountFormatted =\n    data.collateralAmount >= 1\n      ? data.collateralAmount.toFixed(2)\n      : data.collateralAmount.toFixed(6);\n  const collateralUSDFormatted = `$${data.collateralUSD.toFixed(2)}`;\n  const debtAmountFormatted = data.debtAmount.toFixed(2);\n  const debtUSDFormatted = `$${data.debtUSD.toFixed(2)}`;\n\n  return (\n    <div className=\"grid gap-5 lg:grid-cols-3 sm:grid-cols-2\">\n      <CustomCard\n        title=\"Supplied Collateral\"\n        tokenSymbol=\"SOL\"\n        tokenAmount={data.collateralAmount}\n        tokenAmountFormatted={collateralAmountFormatted}\n        usdValue={data.collateralUSD}\n        usdValueFormatted={collateralUSDFormatted}\n        tokenIcon=\"https://cdn.instadapp.io/icons/jupiter/tokens/sol.png\"\n        tokenName=\"Wrapped SOL\"\n        apyFormatted=\"7.2%\"\n        type=\"collateral\"\n        borrowed={data.debtAmount}\n        supplied={data.collateralAmount}\n        suppliedUsd={data.collateralUSD}\n        solPrice={data.solPrice}\n        vaultId={vaultId}\n        positionId={positionId}\n      />\n      <CustomCard\n        title=\"Borrowed Debt\"\n        tokenSymbol=\"USDC\"\n        tokenAmount={data.debtAmount}\n        tokenAmountFormatted={debtAmountFormatted}\n        usdValue={data.debtUSD}\n        usdValueFormatted={debtUSDFormatted}\n        tokenIcon=\"https://cdn.instadapp.io/icons/jupiter/tokens/usdc.png\"\n        tokenName=\"USD Coin\"\n        apyFormatted=\"5.1%\"\n        type=\"debt\"\n        borrowed={data.debtAmount}\n        supplied={data.collateralAmount}\n        suppliedUsd={data.collateralUSD}\n        solPrice={data.solPrice}\n        vaultId={vaultId}\n        positionId={positionId}\n      />\n      <DataCard\n        suppliedAmount={data.collateralAmount || 0}\n        suppliedToken=\"SOL\"\n        suppliedAPY={7.2}\n        borrowedAmount={data.debtAmount || 0}\n        borrowedToken=\"USDC\"\n        borrowedAPY={5.1}\n        solPrice={data.solPrice}\n      />\n    </div>\n  );\n};\n\nexport default CardContainer;\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAOA,MAAM,gBAAgB,CAAC,EACrB,OAAO,EACP,UAAU,EAIX;;IACC,MAAM,EACJ,WAAW,YAAY,EACvB,OAAO,EACP,KAAK,EACN,GAAG,IAAA,8IAAW,EAAC,SAAS;IAEzB,IAAI,SAAS;QACX,qBACE,6LAAC;YAAI,WAAU;sBACZ;gBAAC;gBAAG;gBAAG;aAAE,CAAC,GAAG,CAAC,CAAC,kBACd,6LAAC;oBAAY,WAAU;;sCACrB,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAI,WAAU;;;;;;;;;;;;;mBALT;;;;;;;;;;IAWlB;IAEA,IAAI,OAAO;QACT,qBACE,6LAAC;YAAI,WAAU;;gBAAqE;gBACxD;;;;;;;IAGhC;IAEA,IAAI,CAAC,cAAc;QACjB,qBACE,6LAAC;YAAI,WAAU;sBAA8E;;;;;;IAIjG;IAEA,MAAM,OAAO;IAEb,MAAM,4BACJ,KAAK,gBAAgB,IAAI,IACrB,KAAK,gBAAgB,CAAC,OAAO,CAAC,KAC9B,KAAK,gBAAgB,CAAC,OAAO,CAAC;IACpC,MAAM,yBAAyB,CAAC,CAAC,EAAE,KAAK,aAAa,CAAC,OAAO,CAAC,IAAI;IAClE,MAAM,sBAAsB,KAAK,UAAU,CAAC,OAAO,CAAC;IACpD,MAAM,mBAAmB,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,OAAO,CAAC,IAAI;IAEtD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC,2JAAU;gBACT,OAAM;gBACN,aAAY;gBACZ,aAAa,KAAK,gBAAgB;gBAClC,sBAAsB;gBACtB,UAAU,KAAK,aAAa;gBAC5B,mBAAmB;gBACnB,WAAU;gBACV,WAAU;gBACV,cAAa;gBACb,MAAK;gBACL,UAAU,KAAK,UAAU;gBACzB,UAAU,KAAK,gBAAgB;gBAC/B,aAAa,KAAK,aAAa;gBAC/B,UAAU,KAAK,QAAQ;gBACvB,SAAS;gBACT,YAAY;;;;;;0BAEd,6LAAC,2JAAU;gBACT,OAAM;gBACN,aAAY;gBACZ,aAAa,KAAK,UAAU;gBAC5B,sBAAsB;gBACtB,UAAU,KAAK,OAAO;gBACtB,mBAAmB;gBACnB,WAAU;gBACV,WAAU;gBACV,cAAa;gBACb,MAAK;gBACL,UAAU,KAAK,UAAU;gBACzB,UAAU,KAAK,gBAAgB;gBAC/B,aAAa,KAAK,aAAa;gBAC/B,UAAU,KAAK,QAAQ;gBACvB,SAAS;gBACT,YAAY;;;;;;0BAEd,6LAAC,iKAAQ;gBACP,gBAAgB,KAAK,gBAAgB,IAAI;gBACzC,eAAc;gBACd,aAAa;gBACb,gBAAgB,KAAK,UAAU,IAAI;gBACnC,eAAc;gBACd,aAAa;gBACb,UAAU,KAAK,QAAQ;;;;;;;;;;;;AAI/B;GAzGM;;QAWA,8IAAW;;;KAXX;uCA2GS"}}]
}