module.exports = [
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.CioR9-te.mjs [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "a",
    ()=>address,
    "l",
    ()=>liquidity
]);
const address = "jupeiUmn818Jg1ekPURTpr4mFo29p46vygyykFJ3wZC";
const liquidity = {
    address: address
};
;
}),
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.C2-jCLFw.mjs [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "a",
    ()=>getTickHasDebt,
    "b",
    ()=>borrow,
    "c",
    ()=>getPosition,
    "d",
    ()=>getTick,
    "e",
    ()=>getTickIdLiquidation,
    "f",
    ()=>getVaultConfig,
    "g",
    ()=>getVaultAdmin,
    "h",
    ()=>getBranch,
    "i",
    ()=>getVaultState,
    "j",
    ()=>getVaultMetadata,
    "k",
    ()=>getLiquidity,
    "l",
    ()=>getRateModel,
    "m",
    ()=>getUserBorrowPosition,
    "n",
    ()=>getUserSupplyPosition,
    "o",
    ()=>getLiquidityReserve,
    "p",
    ()=>getPositionTokenAccount,
    "q",
    ()=>getPositionMetadata,
    "r",
    ()=>getPositionMint,
    "s",
    ()=>getClaimAccount,
    "v",
    ()=>vaultsIdl
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/web3.js/lib/index.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.CioR9-te.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/spl-token/lib/esm/state/mint.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bn.js/lib/bn.js [app-ssr] (ecmascript)");
;
;
;
;
const address = "jupr81YtYssSyPt8jbnGuiWon5f6x9TcDEFxYe3Bdzi";
const metadata = {
    name: "vaults",
    version: "0.1.0",
    spec: "0.1.0",
    description: "Created with Anchor"
};
const instructions = [
    {
        name: "get_exchange_prices",
        discriminator: [
            237,
            128,
            83,
            152,
            52,
            21,
            231,
            86
        ],
        accounts: [
            {
                name: "vault_state"
            },
            {
                name: "vault_config"
            },
            {
                name: "supply_token_reserves"
            },
            {
                name: "borrow_token_reserves"
            }
        ],
        args: []
    },
    {
        name: "init_branch",
        discriminator: [
            162,
            91,
            57,
            23,
            228,
            93,
            111,
            21
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "branch",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                98,
                                114,
                                97,
                                110,
                                99,
                                104
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        },
                        {
                            kind: "arg",
                            path: "branch_id"
                        }
                    ]
                }
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "branch_id",
                type: "u32"
            }
        ]
    },
    {
        name: "init_position",
        discriminator: [
            197,
            20,
            10,
            1,
            97,
            160,
            177,
            91
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "position",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                112,
                                111,
                                115,
                                105,
                                116,
                                105,
                                111,
                                110
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        },
                        {
                            kind: "arg",
                            path: "next_position_id"
                        }
                    ]
                }
            },
            {
                name: "position_mint",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                112,
                                111,
                                115,
                                105,
                                116,
                                105,
                                111,
                                110,
                                95,
                                109,
                                105,
                                110,
                                116
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        },
                        {
                            kind: "arg",
                            path: "next_position_id"
                        }
                    ]
                }
            },
            {
                name: "position_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "signer"
                        },
                        {
                            kind: "const",
                            value: [
                                6,
                                221,
                                246,
                                225,
                                215,
                                101,
                                161,
                                147,
                                217,
                                203,
                                225,
                                70,
                                206,
                                235,
                                121,
                                172,
                                28,
                                180,
                                133,
                                237,
                                95,
                                91,
                                55,
                                145,
                                58,
                                140,
                                245,
                                133,
                                126,
                                255,
                                0,
                                169
                            ]
                        },
                        {
                            kind: "account",
                            path: "position_mint"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "metadata_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                109,
                                101,
                                116,
                                97,
                                100,
                                97,
                                116,
                                97
                            ]
                        },
                        {
                            kind: "const",
                            value: [
                                11,
                                112,
                                101,
                                177,
                                227,
                                209,
                                124,
                                69,
                                56,
                                157,
                                82,
                                127,
                                107,
                                4,
                                195,
                                205,
                                88,
                                184,
                                108,
                                115,
                                26,
                                160,
                                253,
                                181,
                                73,
                                182,
                                209,
                                188,
                                3,
                                248,
                                41,
                                70
                            ]
                        },
                        {
                            kind: "account",
                            path: "position_mint"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            11,
                            112,
                            101,
                            177,
                            227,
                            209,
                            124,
                            69,
                            56,
                            157,
                            82,
                            127,
                            107,
                            4,
                            195,
                            205,
                            88,
                            184,
                            108,
                            115,
                            26,
                            160,
                            253,
                            181,
                            73,
                            182,
                            209,
                            188,
                            3,
                            248,
                            41,
                            70
                        ]
                    }
                }
            },
            {
                name: "token_program"
            },
            {
                name: "associated_token_program",
                address: "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            },
            {
                name: "sysvar_instruction",
                address: "Sysvar1nstructions1111111111111111111111111"
            },
            {
                name: "metadata_program",
                address: "metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s"
            },
            {
                name: "rent",
                address: "SysvarRent111111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "next_position_id",
                type: "u32"
            }
        ]
    },
    {
        name: "init_tick",
        discriminator: [
            22,
            13,
            62,
            141,
            73,
            89,
            178,
            29
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "tick_data",
                writable: true
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "tick",
                type: "i32"
            }
        ]
    },
    {
        name: "init_tick_has_debt_array",
        discriminator: [
            206,
            108,
            146,
            245,
            20,
            0,
            141,
            208
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "tick_has_debt_array",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                116,
                                105,
                                99,
                                107,
                                95,
                                104,
                                97,
                                115,
                                95,
                                100,
                                101,
                                98,
                                116
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        },
                        {
                            kind: "arg",
                            path: "index"
                        }
                    ]
                }
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "index",
                type: "u8"
            }
        ]
    },
    {
        name: "init_tick_id_liquidation",
        discriminator: [
            56,
            110,
            121,
            169,
            152,
            241,
            86,
            183
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "tick_data",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "tick_id_liquidation",
                writable: true
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "tick",
                type: "i32"
            },
            {
                name: "total_ids",
                type: "u32"
            }
        ]
    },
    {
        name: "init_vault_admin",
        discriminator: [
            22,
            133,
            2,
            244,
            123,
            100,
            249,
            230
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "vault_admin",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                118,
                                97,
                                117,
                                108,
                                116,
                                95,
                                97,
                                100,
                                109,
                                105,
                                110
                            ]
                        }
                    ]
                }
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "liquidity",
                type: "pubkey"
            },
            {
                name: "authority",
                type: "pubkey"
            }
        ]
    },
    {
        name: "init_vault_config",
        discriminator: [
            41,
            194,
            69,
            254,
            196,
            246,
            226,
            195
        ],
        accounts: [
            {
                name: "authority",
                writable: true,
                signer: true
            },
            {
                name: "vault_admin",
                writable: true
            },
            {
                name: "vault_config",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                118,
                                97,
                                117,
                                108,
                                116,
                                95,
                                99,
                                111,
                                110,
                                102,
                                105,
                                103
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        }
                    ]
                }
            },
            {
                name: "vault_metadata",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                118,
                                97,
                                117,
                                108,
                                116,
                                95,
                                109,
                                101,
                                116,
                                97,
                                100,
                                97,
                                116,
                                97
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        }
                    ]
                }
            },
            {
                name: "oracle"
            },
            {
                name: "supply_token"
            },
            {
                name: "borrow_token"
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "params",
                type: {
                    defined: {
                        name: "InitVaultConfigParams"
                    }
                }
            }
        ]
    },
    {
        name: "init_vault_state",
        discriminator: [
            96,
            120,
            23,
            100,
            153,
            11,
            13,
            165
        ],
        accounts: [
            {
                name: "authority",
                writable: true,
                signer: true
            },
            {
                name: "vault_admin",
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "vault_state",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                118,
                                97,
                                117,
                                108,
                                116,
                                95,
                                115,
                                116,
                                97,
                                116,
                                101
                            ]
                        },
                        {
                            kind: "arg",
                            path: "vault_id"
                        }
                    ]
                }
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            }
        ]
    },
    {
        name: "liquidate",
        discriminator: [
            223,
            179,
            226,
            125,
            48,
            46,
            39,
            74
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "signer_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "signer"
                        },
                        {
                            kind: "account",
                            path: "borrow_token_program"
                        },
                        {
                            kind: "account",
                            path: "borrow_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "to"
            },
            {
                name: "to_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "to"
                        },
                        {
                            kind: "account",
                            path: "supply_token_program"
                        },
                        {
                            kind: "account",
                            path: "supply_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "vault_config",
                docs: [
                    "@dev mut because this PDA signs the CPI to liquidity program",
                    "@dev verification inside instruction logic"
                ]
            },
            {
                name: "vault_state",
                writable: true
            },
            {
                name: "supply_token"
            },
            {
                name: "borrow_token"
            },
            {
                name: "oracle"
            },
            {
                name: "new_branch",
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                writable: true
            },
            {
                name: "borrow_token_reserves_liquidity",
                writable: true
            },
            {
                name: "vault_supply_position_on_liquidity",
                writable: true
            },
            {
                name: "vault_borrow_position_on_liquidity",
                writable: true
            },
            {
                name: "supply_rate_model"
            },
            {
                name: "borrow_rate_model"
            },
            {
                name: "supply_token_claim_account",
                writable: true,
                optional: true
            },
            {
                name: "liquidity"
            },
            {
                name: "liquidity_program"
            },
            {
                name: "vault_supply_token_account",
                writable: true
            },
            {
                name: "vault_borrow_token_account",
                writable: true
            },
            {
                name: "supply_token_program"
            },
            {
                name: "borrow_token_program"
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            },
            {
                name: "associated_token_program",
                address: "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"
            },
            {
                name: "oracle_program"
            }
        ],
        args: [
            {
                name: "debt_amt",
                type: "u64"
            },
            {
                name: "col_per_unit_debt",
                type: "u128"
            },
            {
                name: "absorb",
                type: "bool"
            },
            {
                name: "transfer_type",
                type: {
                    option: {
                        defined: {
                            name: "TransferType"
                        }
                    }
                }
            },
            {
                name: "remaining_accounts_indices",
                type: "bytes"
            }
        ]
    },
    {
        name: "operate",
        discriminator: [
            217,
            106,
            208,
            99,
            116,
            151,
            42,
            135
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "signer_supply_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "signer"
                        },
                        {
                            kind: "account",
                            path: "supply_token_program"
                        },
                        {
                            kind: "account",
                            path: "supply_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "signer_borrow_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "signer"
                        },
                        {
                            kind: "account",
                            path: "borrow_token_program"
                        },
                        {
                            kind: "account",
                            path: "borrow_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "recipient",
                optional: true
            },
            {
                name: "recipient_borrow_token_account",
                writable: true,
                optional: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "recipient"
                        },
                        {
                            kind: "account",
                            path: "borrow_token_program"
                        },
                        {
                            kind: "account",
                            path: "borrow_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "recipient_supply_token_account",
                writable: true,
                optional: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "recipient"
                        },
                        {
                            kind: "account",
                            path: "supply_token_program"
                        },
                        {
                            kind: "account",
                            path: "supply_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "vault_config",
                docs: [
                    "@dev mut because this PDA signs the CPI to liquidity program",
                    "@dev verification inside instruction logic"
                ]
            },
            {
                name: "vault_state",
                docs: [
                    "@dev verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token"
            },
            {
                name: "borrow_token"
            },
            {
                name: "oracle"
            },
            {
                name: "position",
                writable: true
            },
            {
                name: "position_token_account",
                docs: [
                    "@dev verification inside instruction logic"
                ]
            },
            {
                name: "current_position_tick",
                writable: true
            },
            {
                name: "final_position_tick",
                writable: true
            },
            {
                name: "current_position_tick_id"
            },
            {
                name: "final_position_tick_id",
                writable: true
            },
            {
                name: "new_branch",
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                writable: true
            },
            {
                name: "borrow_token_reserves_liquidity",
                writable: true
            },
            {
                name: "vault_supply_position_on_liquidity",
                writable: true
            },
            {
                name: "vault_borrow_position_on_liquidity",
                writable: true
            },
            {
                name: "supply_rate_model"
            },
            {
                name: "borrow_rate_model"
            },
            {
                name: "vault_supply_token_account",
                writable: true
            },
            {
                name: "vault_borrow_token_account",
                writable: true
            },
            {
                name: "supply_token_claim_account",
                writable: true,
                optional: true
            },
            {
                name: "borrow_token_claim_account",
                writable: true,
                optional: true
            },
            {
                name: "liquidity"
            },
            {
                name: "liquidity_program"
            },
            {
                name: "oracle_program"
            },
            {
                name: "supply_token_program"
            },
            {
                name: "borrow_token_program"
            },
            {
                name: "associated_token_program",
                address: "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "new_col",
                type: "i128"
            },
            {
                name: "new_debt",
                type: "i128"
            },
            {
                name: "transfer_type",
                type: {
                    option: {
                        defined: {
                            name: "TransferType"
                        }
                    }
                }
            },
            {
                name: "remaining_accounts_indices",
                type: "bytes"
            }
        ]
    },
    {
        name: "rebalance",
        discriminator: [
            108,
            158,
            77,
            9,
            210,
            52,
            88,
            62
        ],
        accounts: [
            {
                name: "rebalancer",
                writable: true,
                signer: true,
                relations: [
                    "vault_config"
                ]
            },
            {
                name: "rebalancer_supply_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "rebalancer"
                        },
                        {
                            kind: "account",
                            path: "supply_token_program"
                        },
                        {
                            kind: "account",
                            path: "supply_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "rebalancer_borrow_token_account",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "account",
                            path: "rebalancer"
                        },
                        {
                            kind: "account",
                            path: "borrow_token_program"
                        },
                        {
                            kind: "account",
                            path: "borrow_token"
                        }
                    ],
                    program: {
                        kind: "const",
                        value: [
                            140,
                            151,
                            37,
                            143,
                            78,
                            36,
                            137,
                            241,
                            187,
                            61,
                            16,
                            41,
                            20,
                            142,
                            13,
                            131,
                            11,
                            90,
                            19,
                            153,
                            218,
                            255,
                            16,
                            132,
                            4,
                            142,
                            123,
                            216,
                            219,
                            233,
                            248,
                            89
                        ]
                    }
                }
            },
            {
                name: "vault_config",
                docs: [
                    "@dev mut because this PDA signs the CPI to liquidity program",
                    "@dev verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_state",
                docs: [
                    "@dev verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token",
                relations: [
                    "vault_config"
                ]
            },
            {
                name: "borrow_token",
                relations: [
                    "vault_config"
                ]
            },
            {
                name: "supply_token_reserves_liquidity",
                writable: true
            },
            {
                name: "borrow_token_reserves_liquidity",
                writable: true
            },
            {
                name: "vault_supply_position_on_liquidity",
                writable: true
            },
            {
                name: "vault_borrow_position_on_liquidity",
                writable: true
            },
            {
                name: "supply_rate_model"
            },
            {
                name: "borrow_rate_model"
            },
            {
                name: "liquidity"
            },
            {
                name: "liquidity_program"
            },
            {
                name: "vault_supply_token_account",
                writable: true
            },
            {
                name: "vault_borrow_token_account",
                writable: true
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            },
            {
                name: "supply_token_program"
            },
            {
                name: "borrow_token_program"
            },
            {
                name: "associated_token_program",
                address: "ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"
            }
        ],
        args: []
    },
    {
        name: "update_authority",
        discriminator: [
            32,
            46,
            64,
            28,
            149,
            75,
            243,
            88
        ],
        accounts: [
            {
                name: "signer",
                signer: true
            },
            {
                name: "vault_admin",
                writable: true
            }
        ],
        args: [
            {
                name: "new_authority",
                type: "pubkey"
            }
        ]
    },
    {
        name: "update_auths",
        discriminator: [
            93,
            96,
            178,
            156,
            57,
            117,
            253,
            209
        ],
        accounts: [
            {
                name: "signer",
                signer: true
            },
            {
                name: "vault_admin",
                writable: true
            }
        ],
        args: [
            {
                name: "auth_status",
                type: {
                    vec: {
                        defined: {
                            name: "AddressBool"
                        }
                    }
                }
            }
        ]
    },
    {
        name: "update_borrow_fee",
        discriminator: [
            251,
            124,
            35,
            148,
            202,
            167,
            157,
            65
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "borrow_fee",
                type: "u16"
            }
        ]
    },
    {
        name: "update_borrow_rate_magnifier",
        discriminator: [
            75,
            250,
            27,
            176,
            156,
            53,
            26,
            112
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "borrow_rate_magnifier",
                type: "i16"
            }
        ]
    },
    {
        name: "update_collateral_factor",
        discriminator: [
            244,
            83,
            227,
            215,
            220,
            82,
            201,
            221
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "collateral_factor",
                type: "u16"
            }
        ]
    },
    {
        name: "update_core_settings",
        discriminator: [
            101,
            84,
            9,
            11,
            60,
            104,
            149,
            234
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "params",
                type: {
                    defined: {
                        name: "UpdateCoreSettingsParams"
                    }
                }
            }
        ]
    },
    {
        name: "update_exchange_prices",
        discriminator: [
            209,
            14,
            188,
            95,
            242,
            20,
            119,
            196
        ],
        accounts: [
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            }
        ]
    },
    {
        name: "update_liquidation_max_limit",
        discriminator: [
            183,
            242,
            152,
            150,
            176,
            40,
            65,
            161
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "liquidation_max_limit",
                type: "u16"
            }
        ]
    },
    {
        name: "update_liquidation_penalty",
        discriminator: [
            21,
            168,
            167,
            206,
            98,
            206,
            69,
            32
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "liquidation_penalty",
                type: "u16"
            }
        ]
    },
    {
        name: "update_liquidation_threshold",
        discriminator: [
            53,
            185,
            87,
            243,
            138,
            11,
            79,
            28
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "liquidation_threshold",
                type: "u16"
            }
        ]
    },
    {
        name: "update_lookup_table",
        discriminator: [
            221,
            59,
            30,
            246,
            106,
            223,
            137,
            55
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_metadata",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "lookup_table",
                type: "pubkey"
            }
        ]
    },
    {
        name: "update_oracle",
        discriminator: [
            112,
            41,
            209,
            18,
            248,
            226,
            252,
            188
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "new_oracle",
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            }
        ]
    },
    {
        name: "update_rebalancer",
        discriminator: [
            206,
            187,
            54,
            228,
            145,
            8,
            203,
            111
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "new_rebalancer",
                type: "pubkey"
            }
        ]
    },
    {
        name: "update_supply_rate_magnifier",
        discriminator: [
            175,
            59,
            117,
            196,
            211,
            170,
            22,
            12
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "supply_rate_magnifier",
                type: "i16"
            }
        ]
    },
    {
        name: "update_withdraw_gap",
        discriminator: [
            229,
            163,
            76,
            21,
            82,
            215,
            25,
            233
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "vault_admin"
            },
            {
                name: "vault_state",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "vault_config",
                docs: [
                    "@dev Verification inside instruction logic"
                ],
                writable: true
            },
            {
                name: "supply_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            },
            {
                name: "borrow_token_reserves_liquidity",
                docs: [
                    "@dev Verification inside instruction logic"
                ]
            }
        ],
        args: [
            {
                name: "vault_id",
                type: "u16"
            },
            {
                name: "withdraw_gap",
                type: "u16"
            }
        ]
    }
];
const accounts = [
    {
        name: "Branch",
        discriminator: [
            14,
            63,
            100,
            50,
            25,
            8,
            29,
            5
        ]
    },
    {
        name: "Oracle",
        discriminator: [
            139,
            194,
            131,
            179,
            140,
            179,
            229,
            244
        ]
    },
    {
        name: "Position",
        discriminator: [
            170,
            188,
            143,
            228,
            122,
            64,
            247,
            208
        ]
    },
    {
        name: "Tick",
        discriminator: [
            176,
            94,
            67,
            247,
            133,
            173,
            7,
            115
        ]
    },
    {
        name: "TickHasDebtArray",
        discriminator: [
            91,
            232,
            60,
            29,
            124,
            103,
            49,
            252
        ]
    },
    {
        name: "TickIdLiquidation",
        discriminator: [
            41,
            28,
            190,
            197,
            68,
            213,
            31,
            181
        ]
    },
    {
        name: "TokenReserve",
        discriminator: [
            21,
            18,
            59,
            135,
            120,
            20,
            31,
            12
        ]
    },
    {
        name: "UserBorrowPosition",
        discriminator: [
            73,
            126,
            65,
            123,
            220,
            126,
            197,
            24
        ]
    },
    {
        name: "UserSupplyPosition",
        discriminator: [
            202,
            219,
            136,
            118,
            61,
            177,
            21,
            146
        ]
    },
    {
        name: "VaultAdmin",
        discriminator: [
            88,
            97,
            160,
            117,
            102,
            39,
            103,
            44
        ]
    },
    {
        name: "VaultConfig",
        discriminator: [
            99,
            86,
            43,
            216,
            184,
            102,
            119,
            77
        ]
    },
    {
        name: "VaultMetadata",
        discriminator: [
            248,
            177,
            244,
            93,
            67,
            19,
            117,
            57
        ]
    },
    {
        name: "VaultState",
        discriminator: [
            228,
            196,
            82,
            165,
            98,
            210,
            235,
            152
        ]
    }
];
const events = [
    {
        name: "LogAbsorb",
        discriminator: [
            177,
            119,
            143,
            137,
            184,
            63,
            197,
            215
        ]
    },
    {
        name: "LogClosePosition",
        discriminator: [
            225,
            156,
            13,
            36,
            189,
            95,
            170,
            92
        ]
    },
    {
        name: "LogInitBranch",
        discriminator: [
            127,
            182,
            211,
            219,
            140,
            189,
            193,
            101
        ]
    },
    {
        name: "LogInitTick",
        discriminator: [
            56,
            182,
            35,
            79,
            249,
            114,
            9,
            175
        ]
    },
    {
        name: "LogInitTickHasDebtArray",
        discriminator: [
            15,
            134,
            113,
            2,
            251,
            206,
            30,
            129
        ]
    },
    {
        name: "LogInitTickIdLiquidation",
        discriminator: [
            172,
            64,
            170,
            238,
            39,
            153,
            185,
            225
        ]
    },
    {
        name: "LogInitVaultConfig",
        discriminator: [
            194,
            158,
            35,
            55,
            179,
            48,
            174,
            46
        ]
    },
    {
        name: "LogInitVaultState",
        discriminator: [
            140,
            108,
            65,
            38,
            128,
            26,
            194,
            28
        ]
    },
    {
        name: "LogLiquidate",
        discriminator: [
            154,
            128,
            202,
            147,
            65,
            233,
            195,
            73
        ]
    },
    {
        name: "LogLiquidateInfo",
        discriminator: [
            169,
            150,
            46,
            42,
            178,
            89,
            98,
            83
        ]
    },
    {
        name: "LogOperate",
        discriminator: [
            180,
            8,
            81,
            71,
            19,
            132,
            173,
            8
        ]
    },
    {
        name: "LogRebalance",
        discriminator: [
            90,
            67,
            219,
            41,
            181,
            118,
            132,
            9
        ]
    },
    {
        name: "LogUpdateAuthority",
        discriminator: [
            150,
            152,
            157,
            143,
            6,
            135,
            193,
            101
        ]
    },
    {
        name: "LogUpdateAuths",
        discriminator: [
            88,
            80,
            109,
            48,
            111,
            203,
            76,
            251
        ]
    },
    {
        name: "LogUpdateBorrowFee",
        discriminator: [
            33,
            134,
            42,
            66,
            16,
            167,
            119,
            196
        ]
    },
    {
        name: "LogUpdateBorrowRateMagnifier",
        discriminator: [
            186,
            23,
            46,
            117,
            57,
            111,
            107,
            51
        ]
    },
    {
        name: "LogUpdateCollateralFactor",
        discriminator: [
            142,
            89,
            0,
            231,
            164,
            164,
            230,
            82
        ]
    },
    {
        name: "LogUpdateCoreSettings",
        discriminator: [
            233,
            65,
            32,
            7,
            230,
            115,
            122,
            197
        ]
    },
    {
        name: "LogUpdateExchangePrices",
        discriminator: [
            190,
            194,
            69,
            204,
            30,
            86,
            181,
            163
        ]
    },
    {
        name: "LogUpdateLiquidationMaxLimit",
        discriminator: [
            73,
            32,
            49,
            0,
            234,
            86,
            150,
            94
        ]
    },
    {
        name: "LogUpdateLiquidationPenalty",
        discriminator: [
            42,
            132,
            67,
            48,
            209,
            133,
            77,
            83
        ]
    },
    {
        name: "LogUpdateLiquidationThreshold",
        discriminator: [
            211,
            71,
            215,
            239,
            159,
            238,
            71,
            219
        ]
    },
    {
        name: "LogUpdateLookupTable",
        discriminator: [
            45,
            248,
            126,
            111,
            185,
            41,
            103,
            5
        ]
    },
    {
        name: "LogUpdateOracle",
        discriminator: [
            251,
            163,
            219,
            57,
            30,
            152,
            177,
            10
        ]
    },
    {
        name: "LogUpdateRebalancer",
        discriminator: [
            66,
            79,
            144,
            204,
            26,
            217,
            153,
            225
        ]
    },
    {
        name: "LogUpdateSupplyRateMagnifier",
        discriminator: [
            198,
            113,
            184,
            213,
            239,
            18,
            253,
            56
        ]
    },
    {
        name: "LogUpdateWithdrawGap",
        discriminator: [
            182,
            248,
            48,
            47,
            8,
            159,
            21,
            35
        ]
    },
    {
        name: "LogUserPosition",
        discriminator: [
            46,
            44,
            213,
            42,
            55,
            59,
            190,
            133
        ]
    }
];
const errors = [
    {
        code: 6000,
        name: "VaultNextTickNotFound",
        msg: "VAULT_NEXT_TICK_NOT_FOUND"
    },
    {
        code: 6001,
        name: "VaultInvalidPositionMint",
        msg: "VAULT_INVALID_POSITION_MINT"
    },
    {
        code: 6002,
        name: "VaultTickIdLiquidationMismatch",
        msg: "VAULT_TICK_ID_LIQUIDATION_MISMATCH"
    },
    {
        code: 6003,
        name: "VaultInvalidPositionTokenAmount",
        msg: "VAULT_INVALID_POSITION_TOKEN_AMOUNT"
    },
    {
        code: 6004,
        name: "VaultInvalidRemainingAccountsIndices",
        msg: "VAULT_INVALID_REMAINING_ACCOUNTS_INDICES"
    },
    {
        code: 6005,
        name: "VaultTickHasDebtVaultIdMismatch",
        msg: "VAULT_TICK_HAS_DEBT_VAULT_ID_MISMATCH"
    },
    {
        code: 6006,
        name: "VaultBranchVaultIdMismatch",
        msg: "VAULT_BRANCH_VAULT_ID_MISMATCH"
    },
    {
        code: 6007,
        name: "VaultTickVaultIdMismatch",
        msg: "VAULT_TICK_VAULT_ID_MISMATCH"
    },
    {
        code: 6008,
        name: "VaultInvalidDecimals",
        msg: "VAULT_INVALID_DECIMALS"
    },
    {
        code: 6009,
        name: "VaultInvalidOperateAmount",
        msg: "VAULT_INVALID_OPERATE_AMOUNT"
    },
    {
        code: 6010,
        name: "VaultTickIsEmpty",
        msg: "VAULT_TICK_IS_EMPTY"
    },
    {
        code: 6011,
        name: "VaultPositionAboveCF",
        msg: "VAULT_POSITION_ABOVE_CF"
    },
    {
        code: 6012,
        name: "VaultTopTickDoesNotExist",
        msg: "VAULT_TOP_TICK_DOES_NOT_EXIST"
    },
    {
        code: 6013,
        name: "VaultExcessSlippageLiquidation",
        msg: "VAULT_EXCESS_SLIPPAGE_LIQUIDATION"
    },
    {
        code: 6014,
        name: "VaultNotRebalancer",
        msg: "VAULT_NOT_REBALANCER"
    },
    {
        code: 6015,
        name: "VaultTokenNotInitialized",
        msg: "VAULT_TOKEN_NOT_INITIALIZED"
    },
    {
        code: 6016,
        name: "VaultUserCollateralDebtExceed",
        msg: "VAULT_USER_COLLATERAL_DEBT_EXCEED"
    },
    {
        code: 6017,
        name: "VaultExcessCollateralWithdrawal",
        msg: "VAULT_EXCESS_COLLATERAL_WITHDRAWAL"
    },
    {
        code: 6018,
        name: "VaultExcessDebtPayback",
        msg: "VAULT_EXCESS_DEBT_PAYBACK"
    },
    {
        code: 6019,
        name: "VaultWithdrawMoreThanOperateLimit",
        msg: "VAULT_WITHDRAW_MORE_THAN_OPERATE_LIMIT"
    },
    {
        code: 6020,
        name: "VaultInvalidLiquidationAmt",
        msg: "VAULT_INVALID_LIQUIDATION_AMT"
    },
    {
        code: 6021,
        name: "VaultLiquidationResult",
        msg: "VAULT_LIQUIDATION_RESULT"
    },
    {
        code: 6022,
        name: "VaultBranchDebtTooLow",
        msg: "VAULT_BRANCH_DEBT_TOO_LOW"
    },
    {
        code: 6023,
        name: "VaultTickDebtTooLow",
        msg: "VAULT_TICK_DEBT_TOO_LOW"
    },
    {
        code: 6024,
        name: "VaultLiquidityExchangePriceUnexpected",
        msg: "VAULT_LIQUIDITY_EXCHANGE_PRICE_UNEXPECTED"
    },
    {
        code: 6025,
        name: "VaultUserDebtTooLow",
        msg: "VAULT_USER_DEBT_TOO_LOW"
    },
    {
        code: 6026,
        name: "VaultInvalidPaybackOrDeposit",
        msg: "VAULT_INVALID_PAYBACK_OR_DEPOSIT"
    },
    {
        code: 6027,
        name: "VaultInvalidLiquidation",
        msg: "VAULT_INVALID_LIQUIDATION"
    },
    {
        code: 6028,
        name: "VaultNothingToRebalance",
        msg: "VAULT_NOTHING_TO_REBALANCE"
    },
    {
        code: 6029,
        name: "VaultLiquidationReverts",
        msg: "VAULT_LIQUIDATION_REVERTS"
    },
    {
        code: 6030,
        name: "VaultInvalidOraclePrice",
        msg: "VAULT_INVALID_ORACLE_PRICE"
    },
    {
        code: 6031,
        name: "VaultBranchNotFound",
        msg: "VAULT_BRANCH_NOT_FOUND"
    },
    {
        code: 6032,
        name: "VaultTickNotFound",
        msg: "VAULT_TICK_NOT_FOUND"
    },
    {
        code: 6033,
        name: "VaultTickHasDebtNotFound",
        msg: "VAULT_TICK_HAS_DEBT_NOT_FOUND"
    },
    {
        code: 6034,
        name: "VaultTickMismatch",
        msg: "VAULT_TICK_MISMATCH"
    },
    {
        code: 6035,
        name: "VaultInvalidVaultId",
        msg: "VAULT_INVALID_VAULT_ID"
    },
    {
        code: 6036,
        name: "VaultInvalidNextPositionId",
        msg: "VAULT_INVALID_NEXT_POSITION_ID"
    },
    {
        code: 6037,
        name: "VaultInvalidPositionId",
        msg: "VAULT_INVALID_POSITION_ID"
    },
    {
        code: 6038,
        name: "VaultPositionNotEmpty",
        msg: "VAULT_POSITION_NOT_EMPTY"
    },
    {
        code: 6039,
        name: "VaultInvalidSupplyMint",
        msg: "VAULT_INVALID_SUPPLY_MINT"
    },
    {
        code: 6040,
        name: "VaultInvalidBorrowMint",
        msg: "VAULT_INVALID_BORROW_MINT"
    },
    {
        code: 6041,
        name: "VaultInvalidOracle",
        msg: "VAULT_INVALID_ORACLE"
    },
    {
        code: 6042,
        name: "VaultInvalidTick",
        msg: "VAULT_INVALID_TICK"
    },
    {
        code: 6043,
        name: "VaultInvalidLiquidityProgram",
        msg: "VAULT_INVALID_LIQUIDITY_PROGRAM"
    },
    {
        code: 6044,
        name: "VaultInvalidPositionAuthority",
        msg: "VAULT_INVALID_POSITION_AUTHORITY"
    },
    {
        code: 6045,
        name: "VaultOracleNotValid",
        msg: "VAULT_ORACLE_NOT_VALID"
    },
    {
        code: 6046,
        name: "VaultBranchOwnerNotValid",
        msg: "VAULT_BRANCH_OWNER_NOT_VALID"
    },
    {
        code: 6047,
        name: "VaultTickHasDebtOwnerNotValid",
        msg: "VAULT_TICK_HAS_DEBT_OWNER_NOT_VALID"
    },
    {
        code: 6048,
        name: "VaultTickOwnerNotValid",
        msg: "VAULT_TICK_DATA_OWNER_NOT_VALID"
    },
    {
        code: 6049,
        name: "VaultLiquidateRemainingAccountsTooShort",
        msg: "VAULT_LIQUIDATE_REMAINING_ACCOUNTS_TOO_SHORT"
    },
    {
        code: 6050,
        name: "VaultOperateRemainingAccountsTooShort",
        msg: "VAULT_OPERATE_REMAINING_ACCOUNTS_TOO_SHORT"
    },
    {
        code: 6051,
        name: "VaultInvalidZerothBranch",
        msg: "VAULT_INVALID_ZEROTH_BRANCH"
    },
    {
        code: 6052,
        name: "VaultCpiToLiquidityFailed",
        msg: "VAULT_CPI_TO_LIQUIDITY_FAILED"
    },
    {
        code: 6053,
        name: "VaultCpiToOracleFailed",
        msg: "VAULT_CPI_TO_ORACLE_FAILED"
    },
    {
        code: 6054,
        name: "VaultOnlyAuthority",
        msg: "VAULT_ONLY_AUTHORITY"
    },
    {
        code: 6055,
        name: "VaultNewBranchInvalid",
        msg: "VAULT_NEW_BRANCH_INVALID"
    },
    {
        code: 6056,
        name: "VaultTickHasDebtIndexMismatch",
        msg: "VAULT_TICK_HAS_DEBT_INDEX_MISMATCH"
    },
    {
        code: 6057,
        name: "VaultTickHasDebtOutOfRange",
        msg: "VAULT_TICK_HAS_DEBT_OUT_OF_RANGE"
    },
    {
        code: 6058,
        name: "VaultUserSupplyPositionRequired",
        msg: "VAULT_USER_SUPPLY_POSITION_REQUIRED"
    },
    {
        code: 6059,
        name: "VaultClaimAccountRequired",
        msg: "VAULT_CLAIM_ACCOUNT_REQUIRED"
    },
    {
        code: 6060,
        name: "VaultRecipientWithdrawAccountRequired",
        msg: "VAULT_RECIPIENT_WITHDRAW_ACCOUNT_REQUIRED"
    },
    {
        code: 6061,
        name: "VaultRecipientBorrowAccountRequired",
        msg: "VAULT_RECIPIENT_BORROW_ACCOUNT_REQUIRED"
    },
    {
        code: 6062,
        name: "VaultPositionAboveLiquidationThreshold",
        msg: "VAULT_POSITION_ABOVE_LIQUIDATION_THRESHOLD"
    },
    {
        code: 6063,
        name: "VaultAdminValueAboveLimit",
        msg: "VAULT_ADMIN_VALUE_ABOVE_LIMIT"
    },
    {
        code: 6064,
        name: "VaultAdminOnlyAuths",
        msg: "VAULT_ADMIN_ONLY_AUTH_ACCOUNTS"
    },
    {
        code: 6065,
        name: "VaultAdminAddressZeroNotAllowed",
        msg: "VAULT_ADMIN_ADDRESS_ZERO_NOT_ALLOWED"
    },
    {
        code: 6066,
        name: "VaultAdminVaultIdMismatch",
        msg: "VAULT_ADMIN_VAULT_ID_MISMATCH"
    },
    {
        code: 6067,
        name: "VaultAdminTotalIdsMismatch",
        msg: "VAULT_ADMIN_TOTAL_IDS_MISMATCH"
    },
    {
        code: 6068,
        name: "VaultAdminTickMismatch",
        msg: "VAULT_ADMIN_TICK_MISMATCH"
    },
    {
        code: 6069,
        name: "VaultAdminLiquidityProgramMismatch",
        msg: "VAULT_ADMIN_LIQUIDITY_PROGRAM_MISMATCH"
    },
    {
        code: 6070,
        name: "VaultAdminMaxAuthCountReached",
        msg: "VAULT_ADMIN_MAX_AUTH_COUNT_REACHED"
    },
    {
        code: 6071,
        name: "VaultAdminInvalidParams",
        msg: "VAULT_ADMIN_INVALID_PARAMS"
    },
    {
        code: 6072,
        name: "VaultAdminOnlyAuthority",
        msg: "VAULT_ADMIN_ONLY_AUTHORITY"
    },
    {
        code: 6073,
        name: "VaultAdminOracleProgramMismatch",
        msg: "VAULT_ADMIN_ORACLE_PROGRAM_MISMATCH"
    }
];
const types = [
    {
        name: "AddressBool",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "addr",
                    type: "pubkey"
                },
                {
                    name: "value",
                    type: "bool"
                }
            ]
        }
    },
    {
        name: "Branch",
        docs: [
            "Branch data structure"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "branch_id",
                    type: "u32"
                },
                {
                    name: "status",
                    type: "u8"
                },
                {
                    name: "minima_tick",
                    type: "i32"
                },
                {
                    name: "minima_tick_partials",
                    type: "u32"
                },
                {
                    name: "debt_liquidity",
                    type: "u64"
                },
                {
                    name: "debt_factor",
                    type: "u64"
                },
                {
                    name: "connected_branch_id",
                    type: "u32"
                },
                {
                    name: "connected_minima_tick",
                    type: "i32"
                }
            ]
        }
    },
    {
        name: "InitVaultConfigParams",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "supply_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "borrow_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "collateral_factor",
                    type: "u16"
                },
                {
                    name: "liquidation_threshold",
                    type: "u16"
                },
                {
                    name: "liquidation_max_limit",
                    type: "u16"
                },
                {
                    name: "withdraw_gap",
                    type: "u16"
                },
                {
                    name: "liquidation_penalty",
                    type: "u16"
                },
                {
                    name: "borrow_fee",
                    type: "u16"
                },
                {
                    name: "rebalancer",
                    type: "pubkey"
                },
                {
                    name: "liquidity_program",
                    type: "pubkey"
                },
                {
                    name: "oracle_program",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogAbsorb",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "col_amount",
                    type: "u64"
                },
                {
                    name: "debt_amount",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "LogClosePosition",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "signer",
                    type: "pubkey"
                },
                {
                    name: "position_id",
                    type: "u32"
                },
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "position_mint",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogInitBranch",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "branch",
                    type: "pubkey"
                },
                {
                    name: "branch_id",
                    type: "u32"
                }
            ]
        }
    },
    {
        name: "LogInitTick",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "tick",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogInitTickHasDebtArray",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "tick_has_debt_array",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogInitTickIdLiquidation",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "tick_id_liquidation",
                    type: "pubkey"
                },
                {
                    name: "tick",
                    type: "i32"
                }
            ]
        }
    },
    {
        name: "LogInitVaultConfig",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_config",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogInitVaultState",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_state",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogLiquidate",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "signer",
                    type: "pubkey"
                },
                {
                    name: "col_amount",
                    type: "u64"
                },
                {
                    name: "debt_amount",
                    type: "u64"
                },
                {
                    name: "to",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogLiquidateInfo",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "start_tick",
                    type: "i32"
                },
                {
                    name: "end_tick",
                    type: "i32"
                }
            ]
        }
    },
    {
        name: "LogOperate",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "signer",
                    type: "pubkey"
                },
                {
                    name: "nft_id",
                    type: "u32"
                },
                {
                    name: "new_col",
                    type: "i128"
                },
                {
                    name: "new_debt",
                    type: "i128"
                },
                {
                    name: "to",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogRebalance",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "supply_amt",
                    type: "i128"
                },
                {
                    name: "borrow_amt",
                    type: "i128"
                }
            ]
        }
    },
    {
        name: "LogUpdateAuthority",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "new_authority",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogUpdateAuths",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "auth_status",
                    type: {
                        vec: {
                            defined: {
                                name: "AddressBool"
                            }
                        }
                    }
                }
            ]
        }
    },
    {
        name: "LogUpdateBorrowFee",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "borrow_fee",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateBorrowRateMagnifier",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "borrow_rate_magnifier",
                    type: "i16"
                }
            ]
        }
    },
    {
        name: "LogUpdateCollateralFactor",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "collateral_factor",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateCoreSettings",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "supply_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "borrow_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "collateral_factor",
                    type: "u16"
                },
                {
                    name: "liquidation_threshold",
                    type: "u16"
                },
                {
                    name: "liquidation_max_limit",
                    type: "u16"
                },
                {
                    name: "withdraw_gap",
                    type: "u16"
                },
                {
                    name: "liquidation_penalty",
                    type: "u16"
                },
                {
                    name: "borrow_fee",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateExchangePrices",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_supply_exchange_price",
                    type: "u64"
                },
                {
                    name: "vault_borrow_exchange_price",
                    type: "u64"
                },
                {
                    name: "liquidity_supply_exchange_price",
                    type: "u64"
                },
                {
                    name: "liquidity_borrow_exchange_price",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "LogUpdateLiquidationMaxLimit",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "liquidation_max_limit",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateLiquidationPenalty",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "liquidation_penalty",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateLiquidationThreshold",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "liquidation_threshold",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUpdateLookupTable",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "lookup_table",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogUpdateOracle",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "new_oracle",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogUpdateRebalancer",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "new_rebalancer",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogUpdateSupplyRateMagnifier",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "supply_rate_magnifier",
                    type: "i16"
                }
            ]
        }
    },
    {
        name: "LogUpdateWithdrawGap",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "withdraw_gap",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "LogUserPosition",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "user",
                    type: "pubkey"
                },
                {
                    name: "nft_id",
                    type: "u32"
                },
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "position_mint",
                    type: "pubkey"
                },
                {
                    name: "tick",
                    type: "i32"
                },
                {
                    name: "col",
                    type: "u64"
                },
                {
                    name: "borrow",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "Oracle",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "nonce",
                    type: "u16"
                },
                {
                    name: "sources",
                    type: {
                        vec: {
                            defined: {
                                name: "Sources"
                            }
                        }
                    }
                },
                {
                    name: "bump",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "Position",
        docs: [
            "Position data structure"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "nft_id",
                    type: "u32"
                },
                {
                    name: "position_mint",
                    type: "pubkey"
                },
                {
                    name: "is_supply_only_position",
                    type: "u8"
                },
                {
                    name: "tick",
                    type: "i32"
                },
                {
                    name: "tick_id",
                    type: "u32"
                },
                {
                    name: "supply_amount",
                    type: "u64"
                },
                {
                    name: "dust_debt_amount",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "SourceType",
        type: {
            kind: "enum",
            variants: [
                {
                    name: "Pyth"
                },
                {
                    name: "StakePool"
                },
                {
                    name: "MsolPool"
                },
                {
                    name: "Redstone"
                },
                {
                    name: "Chainlink"
                },
                {
                    name: "SinglePool"
                }
            ]
        }
    },
    {
        name: "Sources",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "source",
                    type: "pubkey"
                },
                {
                    name: "invert",
                    type: "bool"
                },
                {
                    name: "multiplier",
                    type: "u128"
                },
                {
                    name: "divisor",
                    type: "u128"
                },
                {
                    name: "source_type",
                    type: {
                        defined: {
                            name: "SourceType"
                        }
                    }
                }
            ]
        }
    },
    {
        name: "Tick",
        docs: [
            "Tick data structure"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "tick",
                    type: "i32"
                },
                {
                    name: "is_liquidated",
                    type: "u8"
                },
                {
                    name: "total_ids",
                    type: "u32"
                },
                {
                    name: "raw_debt",
                    type: "u64"
                },
                {
                    name: "is_fully_liquidated",
                    type: "u8"
                },
                {
                    name: "liquidation_branch_id",
                    type: "u32"
                },
                {
                    name: "debt_factor",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "TickHasDebt",
        docs: [
            "Tick has debt structure",
            "Each TickHasDebt can track 8 * 256 = 2048 ticks",
            "children_bits has 32 bytes = 256 bits total",
            "Each map within the array covers 256 ticks"
        ],
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "children_bits",
                    type: {
                        array: [
                            "u8",
                            32
                        ]
                    }
                }
            ]
        }
    },
    {
        name: "TickHasDebtArray",
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "index",
                    type: "u8"
                },
                {
                    name: "tick_has_debt",
                    docs: [
                        "Each array contains 8 TickHasDebt structs",
                        "Each TickHasDebt covers 256 ticks",
                        "Total: 8 * 256 = 2048 ticks per TickHasDebtArray"
                    ],
                    type: {
                        array: [
                            {
                                defined: {
                                    name: "TickHasDebt"
                                }
                            },
                            8
                        ]
                    }
                }
            ]
        }
    },
    {
        name: "TickIdLiquidation",
        docs: [
            "Tick ID liquidation data"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "tick",
                    type: "i32"
                },
                {
                    name: "tick_map",
                    type: "u32"
                },
                {
                    name: "is_fully_liquidated_1",
                    type: "u8"
                },
                {
                    name: "liquidation_branch_id_1",
                    type: "u32"
                },
                {
                    name: "debt_factor_1",
                    type: "u64"
                },
                {
                    name: "is_fully_liquidated_2",
                    type: "u8"
                },
                {
                    name: "liquidation_branch_id_2",
                    type: "u32"
                },
                {
                    name: "debt_factor_2",
                    type: "u64"
                },
                {
                    name: "is_fully_liquidated_3",
                    type: "u8"
                },
                {
                    name: "liquidation_branch_id_3",
                    type: "u32"
                },
                {
                    name: "debt_factor_3",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "TokenReserve",
        docs: [
            "Token configuration and exchange prices"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "mint",
                    type: "pubkey"
                },
                {
                    name: "vault",
                    type: "pubkey"
                },
                {
                    name: "borrow_rate",
                    type: "u16"
                },
                {
                    name: "fee_on_interest",
                    type: "u16"
                },
                {
                    name: "last_utilization",
                    type: "u16"
                },
                {
                    name: "last_update_timestamp",
                    type: "u64"
                },
                {
                    name: "supply_exchange_price",
                    type: "u64"
                },
                {
                    name: "borrow_exchange_price",
                    type: "u64"
                },
                {
                    name: "max_utilization",
                    type: "u16"
                },
                {
                    name: "total_supply_with_interest",
                    type: "u64"
                },
                {
                    name: "total_supply_interest_free",
                    type: "u64"
                },
                {
                    name: "total_borrow_with_interest",
                    type: "u64"
                },
                {
                    name: "total_borrow_interest_free",
                    type: "u64"
                },
                {
                    name: "total_claim_amount",
                    type: "u64"
                },
                {
                    name: "interacting_protocol",
                    type: "pubkey"
                },
                {
                    name: "interacting_timestamp",
                    type: "u64"
                },
                {
                    name: "interacting_balance",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "TransferType",
        type: {
            kind: "enum",
            variants: [
                {
                    name: "SKIP"
                },
                {
                    name: "DIRECT"
                },
                {
                    name: "CLAIM"
                }
            ]
        }
    },
    {
        name: "UpdateCoreSettingsParams",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "supply_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "borrow_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "collateral_factor",
                    type: "u16"
                },
                {
                    name: "liquidation_threshold",
                    type: "u16"
                },
                {
                    name: "liquidation_max_limit",
                    type: "u16"
                },
                {
                    name: "withdraw_gap",
                    type: "u16"
                },
                {
                    name: "liquidation_penalty",
                    type: "u16"
                },
                {
                    name: "borrow_fee",
                    type: "u16"
                }
            ]
        }
    },
    {
        name: "UserBorrowPosition",
        docs: [
            "User borrow position"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "protocol",
                    type: "pubkey"
                },
                {
                    name: "mint",
                    type: "pubkey"
                },
                {
                    name: "with_interest",
                    type: "u8"
                },
                {
                    name: "amount",
                    type: "u64"
                },
                {
                    name: "debt_ceiling",
                    type: "u64"
                },
                {
                    name: "last_update",
                    type: "u64"
                },
                {
                    name: "expand_pct",
                    type: "u16"
                },
                {
                    name: "expand_duration",
                    type: "u32"
                },
                {
                    name: "base_debt_ceiling",
                    type: "u64"
                },
                {
                    name: "max_debt_ceiling",
                    type: "u64"
                },
                {
                    name: "status",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "UserSupplyPosition",
        docs: [
            "User supply position"
        ],
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "protocol",
                    type: "pubkey"
                },
                {
                    name: "mint",
                    type: "pubkey"
                },
                {
                    name: "with_interest",
                    type: "u8"
                },
                {
                    name: "amount",
                    type: "u64"
                },
                {
                    name: "withdrawal_limit",
                    type: "u128"
                },
                {
                    name: "last_update",
                    type: "u64"
                },
                {
                    name: "expand_pct",
                    type: "u16"
                },
                {
                    name: "expand_duration",
                    type: "u64"
                },
                {
                    name: "base_withdrawal_limit",
                    type: "u64"
                },
                {
                    name: "status",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "VaultAdmin",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "authority",
                    type: "pubkey"
                },
                {
                    name: "liquidity_program",
                    type: "pubkey"
                },
                {
                    name: "next_vault_id",
                    type: "u16"
                },
                {
                    name: "auths",
                    type: {
                        vec: "pubkey"
                    }
                },
                {
                    name: "bump",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "VaultConfig",
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "supply_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "borrow_rate_magnifier",
                    type: "i16"
                },
                {
                    name: "collateral_factor",
                    type: "u16"
                },
                {
                    name: "liquidation_threshold",
                    type: "u16"
                },
                {
                    name: "liquidation_max_limit",
                    type: "u16"
                },
                {
                    name: "withdraw_gap",
                    type: "u16"
                },
                {
                    name: "liquidation_penalty",
                    type: "u16"
                },
                {
                    name: "borrow_fee",
                    type: "u16"
                },
                {
                    name: "oracle",
                    type: "pubkey"
                },
                {
                    name: "rebalancer",
                    type: "pubkey"
                },
                {
                    name: "liquidity_program",
                    type: "pubkey"
                },
                {
                    name: "oracle_program",
                    type: "pubkey"
                },
                {
                    name: "supply_token",
                    type: "pubkey"
                },
                {
                    name: "borrow_token",
                    type: "pubkey"
                },
                {
                    name: "bump",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "VaultMetadata",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "lookup_table",
                    type: "pubkey"
                },
                {
                    name: "supply_mint_decimals",
                    type: "u8"
                },
                {
                    name: "borrow_mint_decimals",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "VaultState",
        serialization: "bytemuck",
        repr: {
            kind: "c",
            packed: true
        },
        type: {
            kind: "struct",
            fields: [
                {
                    name: "vault_id",
                    type: "u16"
                },
                {
                    name: "branch_liquidated",
                    type: "u8"
                },
                {
                    name: "topmost_tick",
                    type: "i32"
                },
                {
                    name: "current_branch_id",
                    type: "u32"
                },
                {
                    name: "total_branch_id",
                    type: "u32"
                },
                {
                    name: "total_supply",
                    type: "u64"
                },
                {
                    name: "total_borrow",
                    type: "u64"
                },
                {
                    name: "total_positions",
                    type: "u32"
                },
                {
                    name: "absorbed_debt_amount",
                    type: "u128"
                },
                {
                    name: "absorbed_col_amount",
                    type: "u128"
                },
                {
                    name: "absorbed_dust_debt",
                    type: "u64"
                },
                {
                    name: "liquidity_supply_exchange_price",
                    type: "u64"
                },
                {
                    name: "liquidity_borrow_exchange_price",
                    type: "u64"
                },
                {
                    name: "vault_supply_exchange_price",
                    type: "u64"
                },
                {
                    name: "vault_borrow_exchange_price",
                    type: "u64"
                },
                {
                    name: "next_position_id",
                    type: "u32"
                },
                {
                    name: "last_update_timestamp",
                    type: "u64"
                }
            ]
        }
    }
];
const vaultsIdl = {
    address: address,
    metadata: metadata,
    instructions: instructions,
    accounts: accounts,
    events: events,
    errors: errors,
    types: types
};
const MPL_TOKEN_METADATA_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"]("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");
const VAULTS_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](address);
const LIQUIDITY_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"]);
const getVaultConfig = (vaultId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("vault_config"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getVaultMetadata = (vaultId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("vault_metadata"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getVaultAdmin = ()=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("vault_admin")
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getVaultState = (vaultId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("vault_state"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getLiquidity = ()=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("liquidity")
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getBranch = (vaultId, branchId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("branch"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](branchId).toArrayLike(Buffer, "le", 4)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getPositionMetadata = (vaultId, positionId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("metadata"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](MPL_TOKEN_METADATA_PROGRAM_ID).toBuffer(),
        getPositionMint(vaultId, positionId).toBuffer()
    ], new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](MPL_TOKEN_METADATA_PROGRAM_ID));
    return pda;
};
const getPosition = (vaultId, positionId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("position"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](positionId).toArrayLike(Buffer, "le", 4)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const MAX_TICK = 16383;
const getTick = (vaultId, tick)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("tick"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](tick + MAX_TICK).toArrayLike(Buffer, "le", 4)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getTickIdLiquidation = (vaultId, tick, totalIds)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("tick_id_liquidation"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](tick + MAX_TICK).toArrayLike(Buffer, "le", 4),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]((totalIds + 2) / 3).toArrayLike(Buffer, "le", 4)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getPositionMint = (vaultId, positionId)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("position_mint"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](positionId).toArrayLike(Buffer, "le", 4)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const getPositionTokenAccount = (vaultId, positionId, user)=>{
    return (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(getPositionMint(vaultId, positionId), user, false);
};
const getLiquidityReserve = (asset)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("reserve"),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getRateModel = (asset)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("rate_model"),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getClaimAccount = (asset, user)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("user_claim"),
        user.toBuffer(),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getUserSupplyPosition = (asset, protocol)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("user_supply_position"),
        asset.toBuffer(),
        protocol.toBuffer()
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getUserBorrowPosition = (asset, protocol)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("user_borrow_position"),
        asset.toBuffer(),
        protocol.toBuffer()
    ], LIQUIDITY_PROGRAM_ID);
    return pda;
};
const getTickHasDebt = (vaultId, index)=>{
    const [pda] = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("tick_has_debt"),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultId).toArrayLike(Buffer, "le", 2),
        new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](index).toArrayLike(Buffer, "le", 1)
    ], VAULTS_PROGRAM_ID);
    return pda;
};
const borrow = {
    __proto__: null,
    getBranch: getBranch,
    getClaimAccount: getClaimAccount,
    getLiquidity: getLiquidity,
    getLiquidityReserve: getLiquidityReserve,
    getPosition: getPosition,
    getPositionMetadata: getPositionMetadata,
    getPositionMint: getPositionMint,
    getPositionTokenAccount: getPositionTokenAccount,
    getRateModel: getRateModel,
    getTick: getTick,
    getTickHasDebt: getTickHasDebt,
    getTickIdLiquidation: getTickIdLiquidation,
    getUserBorrowPosition: getUserBorrowPosition,
    getUserSupplyPosition: getUserSupplyPosition,
    getVaultAdmin: getVaultAdmin,
    getVaultConfig: getVaultConfig,
    getVaultMetadata: getVaultMetadata,
    getVaultState: getVaultState
};
;
}),
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.BzG5ldOV.mjs [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "a",
    ()=>getRateModel,
    "b",
    ()=>getUserBorrowPosition,
    "c",
    ()=>getUserSupplyPosition,
    "d",
    ()=>getTokenReserveFromAsset,
    "e",
    ()=>getReserve,
    "g",
    ()=>getLiquidity,
    "l",
    ()=>liquidity
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/web3.js/lib/index.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.CioR9-te.mjs [app-ssr] (ecmascript)");
;
;
const LIQUIDITY_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"]);
const getSupportedTokenList = ()=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("supported_token_list")
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getTokenReserveFromAsset = (asset)=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("reserve"),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getUserSupplyPosition = (asset, protocol)=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("user_supply_position"),
        asset.toBuffer(),
        protocol.toBuffer()
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getUserBorrowPosition = (asset, protocol)=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("user_borrow_position"),
        asset.toBuffer(),
        protocol.toBuffer()
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getRateModel = (asset)=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("rate_model"),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getReserve = (asset)=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("reserve"),
        asset.toBuffer()
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const getLiquidity = ()=>{
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"].findProgramAddressSync([
        Buffer.from("liquidity")
    ], LIQUIDITY_PROGRAM_ID)[0];
};
const liquidity = {
    __proto__: null,
    getLiquidity: getLiquidity,
    getRateModel: getRateModel,
    getReserve: getReserve,
    getSupportedTokenList: getSupportedTokenList,
    getTokenReserveFromAsset: getTokenReserveFromAsset,
    getUserBorrowPosition: getUserBorrowPosition,
    getUserSupplyPosition: getUserSupplyPosition
};
;
}),
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.yP9-PjAh.mjs [app-ssr] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "A",
    ()=>findNextTickWithDebt,
    "I",
    ()=>INIT_TICK,
    "M",
    ()=>MIN_TICK$1,
    "T",
    ()=>TICK_HAS_DEBT_ARRAY_SIZE,
    "Z",
    ()=>ZERO_TICK_SCALED_RATIO$1,
    "a",
    ()=>getVaultsProgram,
    "b",
    ()=>getOperateContext,
    "c",
    ()=>getInitPositionIx,
    "d",
    ()=>getInitPositionContext,
    "e",
    ()=>getOperateIx,
    "f",
    ()=>getLiquidateContext,
    "g",
    ()=>getLiquidateIx,
    "h",
    ()=>getAccountOwner,
    "i",
    ()=>getCurrentPosition,
    "j",
    ()=>getCurrentPositionState,
    "k",
    ()=>getFinalPosition,
    "l",
    ()=>loadRelevantBranches,
    "m",
    ()=>loadRelevantTicksHasDebtArrays,
    "n",
    ()=>loadRelevantTicksHasDebtArraysLiquidate,
    "o",
    ()=>loadRelevantBranchesForLiquidate,
    "p",
    ()=>MAX_TICK$1,
    "q",
    ()=>TICKS_PER_TICK_HAS_DEBT,
    "r",
    ()=>readOraclePrice,
    "s",
    ()=>TICK_HAS_DEBT_CHILDREN_SIZE,
    "t",
    ()=>TICK_HAS_DEBT_CHILDREN_SIZE_IN_BITS,
    "u",
    ()=>TOTAL_INDICES_NEEDED,
    "v",
    ()=>getRatioAtTick,
    "w",
    ()=>getTickAtRatio,
    "x",
    ()=>getFirstTickForIndex,
    "y",
    ()=>getTickIndices,
    "z",
    ()=>readTickHasDebtArray
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/web3.js/lib/index.esm.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/bn.js/lib/bn.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/node_modules/@coral-xyz/anchor/dist/esm/index.js [app-ssr] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/node_modules/@coral-xyz/anchor/dist/esm/program/index.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$provider$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/node_modules/@coral-xyz/anchor/dist/esm/provider.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.CioR9-te.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/spl-token/lib/esm/state/mint.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$constants$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@solana/spl-token/lib/esm/constants.js [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.C2-jCLFw.mjs [app-ssr] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$BzG5ldOV$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.BzG5ldOV.mjs [app-ssr] (ecmascript)");
;
;
;
;
;
;
;
const address = "jupnw4B6Eqs7ft6rxpzYLJZYSnrpRgPcr589n5Kv4oc";
const metadata = {
    name: "oracle",
    version: "0.1.0",
    spec: "0.1.0",
    description: "Created with Anchor"
};
const instructions = [
    {
        name: "get_both_exchange_rate",
        discriminator: [
            92,
            88,
            161,
            46,
            230,
            193,
            46,
            237
        ],
        accounts: [
            {
                name: "oracle"
            }
        ],
        args: [
            {
                name: "_nonce",
                type: "u16"
            }
        ]
    },
    {
        name: "get_exchange_rate",
        discriminator: [
            153,
            76,
            17,
            194,
            170,
            215,
            89,
            142
        ],
        accounts: [
            {
                name: "oracle"
            }
        ],
        args: [
            {
                name: "_nonce",
                type: "u16"
            }
        ],
        returns: "u128"
    },
    {
        name: "get_exchange_rate_liquidate",
        discriminator: [
            228,
            169,
            73,
            39,
            91,
            82,
            27,
            5
        ],
        accounts: [
            {
                name: "oracle"
            }
        ],
        args: [
            {
                name: "_nonce",
                type: "u16"
            }
        ],
        returns: "u128"
    },
    {
        name: "get_exchange_rate_operate",
        discriminator: [
            174,
            166,
            126,
            10,
            122,
            153,
            94,
            203
        ],
        accounts: [
            {
                name: "oracle"
            }
        ],
        args: [
            {
                name: "_nonce",
                type: "u16"
            }
        ],
        returns: "u128"
    },
    {
        name: "init_admin",
        discriminator: [
            97,
            65,
            97,
            27,
            200,
            206,
            72,
            219
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "oracle_admin",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                111,
                                114,
                                97,
                                99,
                                108,
                                101,
                                95,
                                97,
                                100,
                                109,
                                105,
                                110
                            ]
                        }
                    ]
                }
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "authority",
                type: "pubkey"
            }
        ]
    },
    {
        name: "init_oracle_config",
        discriminator: [
            77,
            144,
            180,
            246,
            217,
            15,
            118,
            92
        ],
        accounts: [
            {
                name: "signer",
                writable: true,
                signer: true
            },
            {
                name: "oracle_admin"
            },
            {
                name: "oracle",
                writable: true,
                pda: {
                    seeds: [
                        {
                            kind: "const",
                            value: [
                                111,
                                114,
                                97,
                                99,
                                108,
                                101
                            ]
                        },
                        {
                            kind: "arg",
                            path: "nonce"
                        }
                    ]
                }
            },
            {
                name: "system_program",
                address: "11111111111111111111111111111111"
            }
        ],
        args: [
            {
                name: "sources",
                type: {
                    vec: {
                        defined: {
                            name: "Sources"
                        }
                    }
                }
            },
            {
                name: "nonce",
                type: "u16"
            }
        ]
    },
    {
        name: "update_authority",
        discriminator: [
            32,
            46,
            64,
            28,
            149,
            75,
            243,
            88
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "oracle_admin",
                writable: true
            }
        ],
        args: [
            {
                name: "new_authority",
                type: "pubkey"
            }
        ]
    },
    {
        name: "update_auths",
        discriminator: [
            93,
            96,
            178,
            156,
            57,
            117,
            253,
            209
        ],
        accounts: [
            {
                name: "authority",
                signer: true
            },
            {
                name: "oracle_admin",
                writable: true
            }
        ],
        args: [
            {
                name: "auth_status",
                type: {
                    vec: {
                        defined: {
                            name: "AddressBool"
                        }
                    }
                }
            }
        ]
    }
];
const accounts = [
    {
        name: "Oracle",
        discriminator: [
            139,
            194,
            131,
            179,
            140,
            179,
            229,
            244
        ]
    },
    {
        name: "OracleAdmin",
        discriminator: [
            239,
            232,
            8,
            20,
            254,
            63,
            25,
            246
        ]
    }
];
const events = [
    {
        name: "LogStakePoolHighFeeDetected",
        discriminator: [
            198,
            106,
            149,
            7,
            25,
            83,
            39,
            155
        ]
    },
    {
        name: "LogUpdateAuthority",
        discriminator: [
            150,
            152,
            157,
            143,
            6,
            135,
            193,
            101
        ]
    },
    {
        name: "LogUpdateAuths",
        discriminator: [
            88,
            80,
            109,
            48,
            111,
            203,
            76,
            251
        ]
    }
];
const errors = [
    {
        code: 6000,
        name: "PriceNotValid",
        msg: "PRICE_NOT_VALID"
    },
    {
        code: 6001,
        name: "PriceTooOld",
        msg: "PRICE_TOO_OLD"
    },
    {
        code: 6002,
        name: "RateZero",
        msg: "RATE_ZERO"
    },
    {
        code: 6003,
        name: "InvalidParams",
        msg: "INVALID_PARAMS"
    },
    {
        code: 6004,
        name: "InvalidPythSourceMultiplierAndDivisor",
        msg: "INVALID_PYTH_SOURCE_MULTIPLIER_AND_DIVISOR"
    },
    {
        code: 6005,
        name: "InvalidSource",
        msg: "INVALID_SOURCE"
    },
    {
        code: 6006,
        name: "InvalidSourcesLength",
        msg: "INVALID_SOURCES_LENGTH"
    },
    {
        code: 6007,
        name: "OracleAdminOnlyAuthority",
        msg: "ORACLE_ADMIN_ONLY_AUTHORITY"
    },
    {
        code: 6008,
        name: "OracleAdminOnlyAuth",
        msg: "ORACLE_ADMIN_ONLY_AUTH"
    },
    {
        code: 6009,
        name: "OracleAdminMaxAuthCountReached",
        msg: "ORACLE_ADMIN_MAX_AUTH_COUNT_REACHED"
    },
    {
        code: 6010,
        name: "OracleAdminInvalidParams",
        msg: "ORACLE_ADMIN_INVALID_PARAMS"
    },
    {
        code: 6011,
        name: "OracleNonceMismatch",
        msg: "ORACLE_NONCE_MISMATCH"
    },
    {
        code: 6012,
        name: "PriceConfidenceNotSufficient",
        msg: "PRICE_CONFIDENCE_NOT_SUFFICIENT"
    },
    {
        code: 6013,
        name: "StakePoolNotRefreshed",
        msg: "STAKE_POOL_NOT_REFRESHED"
    },
    {
        code: 6014,
        name: "InvalidPrice",
        msg: "INVALID_PRICE"
    },
    {
        code: 6015,
        name: "FeeTooHigh",
        msg: "FEE_TOO_HIGH"
    },
    {
        code: 6016,
        name: "RedstonePriceOverflow",
        msg: "REDSTONE_PRICE_OVERFLOW"
    },
    {
        code: 6017,
        name: "TimestampExpected",
        msg: "TIMESTAMP_EXPECTED"
    },
    {
        code: 6018,
        name: "CpiToStakeProgramFailed",
        msg: "CPI_TO_STAKE_PROGRAM_FAILED"
    },
    {
        code: 6019,
        name: "InvalidStakePoolReturnParams",
        msg: "INVALID_STAKE_POOL_RETURN_PARAMS"
    },
    {
        code: 6020,
        name: "ChainlinkPriceReadError",
        msg: "CHAINLINK_PRICE_READ_ERROR"
    },
    {
        code: 6021,
        name: "SinglePoolTokenSupplyZero",
        msg: "SINGLE_POOL_TOKEN_SUPPLY_ZERO"
    },
    {
        code: 6022,
        name: "SinglePoolInvalidStakeAccount",
        msg: "SINGLE_POOL_INVALID_STAKE_ACCOUNT"
    },
    {
        code: 6023,
        name: "SinglePoolInvalidMint",
        msg: "SINGLE_POOL_INVALID_MINT"
    }
];
const types = [
    {
        name: "AddressBool",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "addr",
                    type: "pubkey"
                },
                {
                    name: "value",
                    type: "bool"
                }
            ]
        }
    },
    {
        name: "LogStakePoolHighFeeDetected",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "stake_pool",
                    type: "pubkey"
                },
                {
                    name: "epoch",
                    type: "u64"
                }
            ]
        }
    },
    {
        name: "LogUpdateAuthority",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "new_authority",
                    type: "pubkey"
                }
            ]
        }
    },
    {
        name: "LogUpdateAuths",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "auth_status",
                    type: {
                        vec: {
                            defined: {
                                name: "AddressBool"
                            }
                        }
                    }
                }
            ]
        }
    },
    {
        name: "Oracle",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "nonce",
                    type: "u16"
                },
                {
                    name: "sources",
                    type: {
                        vec: {
                            defined: {
                                name: "Sources"
                            }
                        }
                    }
                },
                {
                    name: "bump",
                    type: "u8"
                }
            ]
        }
    },
    {
        name: "OracleAdmin",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "authority",
                    type: "pubkey"
                },
                {
                    name: "auths",
                    type: {
                        vec: "pubkey"
                    }
                }
            ]
        }
    },
    {
        name: "SourceType",
        type: {
            kind: "enum",
            variants: [
                {
                    name: "Pyth"
                },
                {
                    name: "StakePool"
                },
                {
                    name: "MsolPool"
                },
                {
                    name: "Redstone"
                },
                {
                    name: "Chainlink"
                },
                {
                    name: "SinglePool"
                }
            ]
        }
    },
    {
        name: "Sources",
        type: {
            kind: "struct",
            fields: [
                {
                    name: "source",
                    type: "pubkey"
                },
                {
                    name: "invert",
                    type: "bool"
                },
                {
                    name: "multiplier",
                    type: "u128"
                },
                {
                    name: "divisor",
                    type: "u128"
                },
                {
                    name: "source_type",
                    type: {
                        defined: {
                            name: "SourceType"
                        }
                    }
                }
            ]
        }
    }
];
const oracle = {
    address: address,
    metadata: metadata,
    instructions: instructions,
    accounts: accounts,
    events: events,
    errors: errors,
    types: types
};
const MIN_TICK$1 = -16383;
const MAX_TICK$1 = 16383;
const ZERO_TICK_SCALED_RATIO$1 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](281474976710656);
const TICK_HAS_DEBT_ARRAY_SIZE = 8;
const TICKS_PER_TICK_HAS_DEBT = TICK_HAS_DEBT_ARRAY_SIZE * 256;
const TICK_HAS_DEBT_CHILDREN_SIZE = 32;
const TICK_HAS_DEBT_CHILDREN_SIZE_IN_BITS = 256;
const TOTAL_INDICES_NEEDED = 16;
function getRatioAtTick(tick) {
    if (tick < MIN_TICK$1 || tick > MAX_TICK$1) {
        throw new Error(`Tick ${tick} out of range [${MIN_TICK$1}, ${MAX_TICK$1}]`);
    }
    const FACTOR00 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18446744073709551616");
    const FACTOR01 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18419115400608638658");
    const FACTOR02 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18391528108445969703");
    const FACTOR03 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18336477419114433396");
    const FACTOR04 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18226869890870665593");
    const FACTOR05 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18009616477100071088");
    const FACTOR06 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("17582847377087825313");
    const FACTOR07 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("16759408633341240198");
    const FACTOR08 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("15226414841393184936");
    const FACTOR09 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("12568272644527235157");
    const FACTOR10 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("8563108841104354677");
    const FACTOR11 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("3975055583337633975");
    const FACTOR12 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("856577552520149366");
    const FACTOR13 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("39775317560084773");
    const FACTOR14 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("85764505686420");
    const FACTOR15 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("398745188");
    const absTick = Math.abs(tick);
    let factor = FACTOR00;
    if (absTick & 1) factor = FACTOR01;
    if (absTick & 2) factor = mulShift64(factor, FACTOR02);
    if (absTick & 4) factor = mulShift64(factor, FACTOR03);
    if (absTick & 8) factor = mulShift64(factor, FACTOR04);
    if (absTick & 16) factor = mulShift64(factor, FACTOR05);
    if (absTick & 32) factor = mulShift64(factor, FACTOR06);
    if (absTick & 64) factor = mulShift64(factor, FACTOR07);
    if (absTick & 128) factor = mulShift64(factor, FACTOR08);
    if (absTick & 256) factor = mulShift64(factor, FACTOR09);
    if (absTick & 512) factor = mulShift64(factor, FACTOR10);
    if (absTick & 1024) factor = mulShift64(factor, FACTOR11);
    if (absTick & 2048) factor = mulShift64(factor, FACTOR12);
    if (absTick & 4096) factor = mulShift64(factor, FACTOR13);
    if (absTick & 8192) factor = mulShift64(factor, FACTOR14);
    if (absTick & 16384) factor = mulShift64(factor, FACTOR15);
    let precision = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    if (tick > 0) {
        const maxU128 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](2).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](128)).sub(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
        factor = maxU128.div(factor);
        if (!factor.mod(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](65536)).isZero()) {
            precision = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1);
        }
    }
    const ratioX48 = factor.shrn(16).add(precision);
    return ratioX48;
}
function mulShift64(n0, n1) {
    try {
        return n0.mul(n1).shrn(64);
    } catch  {
        const product = n0.mul(n1);
        return product.div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](2).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](64)));
    }
}
function getTickAtRatio(ratioX48) {
    const MIN_RATIOX48 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](6093);
    const MAX_RATIOX48 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("13002088133096036565414295");
    const _1E13 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10000000000000");
    if (ratioX48.lt(MIN_RATIOX48) || ratioX48.gt(MAX_RATIOX48)) {
        throw new Error(`Ratio ${ratioX48.toString()} out of bounds`);
    }
    const isNegative = ratioX48.lt(ZERO_TICK_SCALED_RATIO$1);
    let factor;
    factor = isNegative ? ZERO_TICK_SCALED_RATIO$1.mul(_1E13).div(ratioX48) : ratioX48.mul(_1E13).div(ZERO_TICK_SCALED_RATIO$1);
    let tick = 0;
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("2150859953785115391"))) {
        tick |= 8192;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("2150859953785115391"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("4637736467054931"))) {
        tick |= 4096;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("4637736467054931"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("215354044936586"))) {
        tick |= 2048;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("215354044936586"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("46406254420777"))) {
        tick |= 1024;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("46406254420777"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("21542110950596"))) {
        tick |= 512;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("21542110950596"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("14677230989051"))) {
        tick |= 256;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("14677230989051"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("12114962232319"))) {
        tick |= 128;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("12114962232319"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("11006798913544"))) {
        tick |= 64;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("11006798913544"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10491329235871"))) {
        tick |= 32;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10491329235871"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10242718992470"))) {
        tick |= 16;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10242718992470"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10120631893548"))) {
        tick |= 8;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10120631893548"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10060135135051"))) {
        tick |= 4;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10060135135051"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10030022500000"))) {
        tick |= 2;
        factor = factor.mul(_1E13).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10030022500000"));
    }
    if (factor.gte(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("10015000000000"))) {
        tick |= 1;
    }
    if (isNegative) {
        tick = ~tick;
    }
    return tick;
}
function getFirstTickForIndex(index) {
    if (index >= TOTAL_INDICES_NEEDED) {
        throw new Error(`Invalid index: ${index}. Must be between 0 and ${TOTAL_INDICES_NEEDED - 1}`);
    }
    return MIN_TICK$1 + index * TICKS_PER_TICK_HAS_DEBT;
}
function getTickIndices(tick) {
    if (tick < MIN_TICK$1 || tick > MAX_TICK$1) {
        throw new Error("Tick out of range");
    }
    const tickOffset = tick - MIN_TICK$1;
    const arrayIndex = Math.floor(tickOffset / TICKS_PER_TICK_HAS_DEBT);
    const firstTickForIndex = getFirstTickForIndex(arrayIndex);
    const tickWithinArray = tick - firstTickForIndex;
    const mapIndex = Math.floor(tickWithinArray / TICK_HAS_DEBT_CHILDREN_SIZE_IN_BITS);
    const tickWithinMap = tickWithinArray % TICK_HAS_DEBT_CHILDREN_SIZE_IN_BITS;
    const byteIndex = Math.floor(tickWithinMap / 8);
    const bitIndex = tickWithinMap % 8;
    return {
        arrayIndex,
        mapIndex,
        byteIndex,
        bitIndex
    };
}
async function readTickHasDebtArray({ vaultId, index, program }) {
    const tickPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, index);
    return await program.account.tickHasDebtArray.fetch(tickPda);
}
async function findNextTickWithDebt(vaultId, startTick, program) {
    try {
        const { arrayIndex, mapIndex, byteIndex, bitIndex } = getTickIndices(startTick);
        let currentArrayIndex = arrayIndex;
        let currentMapIndex = mapIndex;
        let tickHasDebtData = await readTickHasDebtArray({
            vaultId,
            index: currentArrayIndex,
            program
        });
        if (!tickHasDebtData) {
            return MIN_TICK$1;
        }
        clearBitsInBitmap(tickHasDebtData, mapIndex, byteIndex, bitIndex);
        while(true){
            const { nextTick, hasNextTick } = fetchNextTopTickFromBitmap(tickHasDebtData, currentMapIndex);
            if (hasNextTick && nextTick !== MIN_TICK$1) {
                return nextTick;
            }
            if (currentArrayIndex === 0) {
                return MIN_TICK$1;
            }
            currentArrayIndex -= 1;
            currentMapIndex = TICK_HAS_DEBT_ARRAY_SIZE - 1;
            tickHasDebtData = await readTickHasDebtArray({
                vaultId,
                index: currentArrayIndex,
                program
            });
            if (!tickHasDebtData) {
                return MIN_TICK$1;
            }
        }
    } catch (error) {
        console.warn(`Error finding next tick with debt:`, error);
        return MIN_TICK$1;
    }
}
function clearBitsInBitmap(tickHasDebtData, mapIndex, byteIndex, bitIndex) {
    const bitmap = [
        ...tickHasDebtData.tickHasDebt[mapIndex].childrenBits
    ];
    if (bitIndex > 0) {
        const mask = (1 << bitIndex) - 1;
        bitmap[byteIndex] &= mask;
    } else {
        bitmap[byteIndex] = 0;
    }
    for(let i = byteIndex + 1; i < TICK_HAS_DEBT_CHILDREN_SIZE; i++){
        bitmap[i] = 0;
    }
    tickHasDebtData.tickHasDebt[mapIndex].childrenBits = bitmap;
}
function fetchNextTopTickFromBitmap(tickHasDebtData, startMapIndex) {
    let mapIndex = startMapIndex;
    while(mapIndex >= 0){
        if (hasBitsInMap(tickHasDebtData, mapIndex)) {
            const { nextTick, hasNextTick } = getNextTickFromMap(tickHasDebtData, mapIndex);
            if (hasNextTick) {
                return {
                    nextTick,
                    hasNextTick: true
                };
            }
        }
        mapIndex--;
    }
    return {
        nextTick: MIN_TICK$1,
        hasNextTick: false
    };
}
function hasBitsInMap(tickHasDebtData, mapIndex) {
    const childrenBits = tickHasDebtData.tickHasDebt[mapIndex].childrenBits;
    return childrenBits.some((byte)=>byte !== 0);
}
function getNextTickFromMap(tickHasDebtData, mapIndex) {
    const childrenBits = tickHasDebtData.tickHasDebt[mapIndex].childrenBits;
    for(let byteIdx = TICK_HAS_DEBT_CHILDREN_SIZE - 1; byteIdx >= 0; byteIdx--){
        if (childrenBits[byteIdx] !== 0) {
            const leadingZeros = getMostSignificantBit(childrenBits[byteIdx]);
            const bitPos = 7 - leadingZeros;
            const tickWithinMap = byteIdx * 8 + bitPos;
            const mapFirstTick = getFirstTickForMapIndex(tickHasDebtData.index, mapIndex);
            return {
                nextTick: mapFirstTick + tickWithinMap,
                hasNextTick: true
            };
        }
    }
    return {
        nextTick: MIN_TICK$1,
        hasNextTick: false
    };
}
function getMostSignificantBit(byte) {
    if (byte === 0) return 8;
    let leadingZeros = 0;
    let mask = 128;
    while((byte & mask) === 0 && leadingZeros < 8){
        leadingZeros++;
        mask >>>= 1;
    }
    return leadingZeros;
}
function getFirstTickForMapIndex(arrayIndex, mapIndex) {
    const arrayFirstTick = getFirstTickForIndex(arrayIndex);
    return arrayFirstTick + mapIndex * TICK_HAS_DEBT_CHILDREN_SIZE_IN_BITS;
}
const COEFFICIENT_SIZE_DEBT_FACTOR = 35;
const EXPONENT_SIZE_DEBT_FACTOR = 15;
const EXPONENT_MAX_DEBT_FACTOR = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1).shln(EXPONENT_SIZE_DEBT_FACTOR).subn(1);
const DECIMALS_DEBT_FACTOR = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](16384);
const MAX_MASK_DEBT_FACTOR$1 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1).shln(COEFFICIENT_SIZE_DEBT_FACTOR + EXPONENT_SIZE_DEBT_FACTOR).subn(1);
const PRECISION = 64;
const TWO_POWER_64 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("18446744073709551615");
const TWO_POWER_69_MINUS_1 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1).shln(69).subn(1);
const COEFFICIENT_PLUS_PRECISION = COEFFICIENT_SIZE_DEBT_FACTOR + PRECISION;
const COEFFICIENT_PLUS_PRECISION_MINUS_1 = COEFFICIENT_PLUS_PRECISION - 1;
new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1).shln(COEFFICIENT_PLUS_PRECISION_MINUS_1).subn(1);
new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1).shln(COEFFICIENT_PLUS_PRECISION_MINUS_1 - 1).subn(1);
function mulDivNormal(normal, bigNumber1, bigNumber2) {
    if (bigNumber1.isZero() || bigNumber2.isZero()) {
        return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    }
    const exponent1 = bigNumber1.and(EXPONENT_MAX_DEBT_FACTOR);
    const exponent2 = bigNumber2.and(EXPONENT_MAX_DEBT_FACTOR);
    if (exponent2.lt(exponent1)) {
        throw new Error("LibraryBnError: exponent2 should be >= exponent1");
    }
    const netExponent = exponent2.sub(exponent1);
    if (netExponent.lt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](129))) {
        const coefficient1 = bigNumber1.shrn(EXPONENT_SIZE_DEBT_FACTOR);
        const coefficient2 = bigNumber2.shrn(EXPONENT_SIZE_DEBT_FACTOR);
        const numerator = normal.mul(coefficient1);
        const denominator = coefficient2.shln(netExponent.toNumber());
        if (denominator.isZero()) {
            throw new Error("LibraryDivisionByZero");
        }
        const result = numerator.div(denominator);
        if (result.gt(TWO_POWER_64)) {
            throw new Error("LibraryBnError: result overflow");
        }
        return result;
    } else {
        return new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    }
}
function mulBigNumber(bigNumber1, bigNumber2) {
    const coefficient1 = bigNumber1.shrn(EXPONENT_SIZE_DEBT_FACTOR);
    const coefficient2 = bigNumber2.shrn(EXPONENT_SIZE_DEBT_FACTOR);
    const exponent1 = bigNumber1.and(EXPONENT_MAX_DEBT_FACTOR);
    const exponent2 = bigNumber2.and(EXPONENT_MAX_DEBT_FACTOR);
    const resCoefficient = coefficient1.mul(coefficient2);
    const overflowLen = resCoefficient.gt(TWO_POWER_69_MINUS_1) ? COEFFICIENT_SIZE_DEBT_FACTOR : COEFFICIENT_SIZE_DEBT_FACTOR - 1;
    const adjustedCoefficient = resCoefficient.shrn(overflowLen);
    const resExponent = exponent1.add(exponent2).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](overflowLen));
    if (resExponent.lt(DECIMALS_DEBT_FACTOR)) {
        throw new Error("LibraryBnError: exponent underflow");
    }
    const finalExponent = resExponent.sub(DECIMALS_DEBT_FACTOR);
    if (finalExponent.gt(EXPONENT_MAX_DEBT_FACTOR)) {
        return MAX_MASK_DEBT_FACTOR$1;
    }
    return adjustedCoefficient.shln(EXPONENT_SIZE_DEBT_FACTOR).or(finalExponent);
}
const getVaultsProgram = ({ connection, signer })=>new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Program"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["v"], {
        connection,
        publicKey: signer
    });
const INIT_TICK = -2147483648;
const MIN_TICK = -16383;
const MAX_TICK = 16383;
const MAX_MASK_DEBT_FACTOR = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("1125899906842623");
const EXCHANGE_PRICES_PRECISION = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](12));
const ZERO_TICK_SCALED_RATIO = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](281474976710656);
const TICK_SPACING = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10015);
const X30 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1073741823);
const MIN_I128$1 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("170141183460469231731687303715884105728").neg();
const getAccountOwner = async (account, connection)=>{
    const info = await connection.getAccountInfo(account);
    if (!info) throw new Error(`Account info not found for ${account.toString()}`);
    return info.owner;
};
const getCurrentPosition = async ({ vaultId, positionId, connection })=>{
    const program = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Program"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["v"], {
        connection
    });
    const position = await program.account.position.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(vaultId, positionId));
    return await getCurrentPositionState({
        vaultId,
        position,
        program
    });
};
const getCurrentPositionState = async ({ vaultId, position, program })=>{
    let positionTick = position.tick;
    if (positionTick === INIT_TICK) {
        positionTick = MIN_TICK;
    }
    if (position.isSupplyOnlyPosition) {
        return {
            tick: MIN_TICK,
            tickId: 0,
            colRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](position.supplyAmount.toString()),
            finalAmount: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](position.supplyAmount.toString()),
            debtRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
            dustDebtRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
            isSupplyOnlyPosition: true,
            userLiquidationStatus: false,
            postLiquidationBranchId: 0
        };
    }
    const colRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](position.supplyAmount.toString());
    const dustDebtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](position.dustDebtAmount.toString());
    let debtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    if (positionTick > MIN_TICK) {
        const collateralForDebtCalc = colRaw.add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
        const ratio = getRatioAtTick(positionTick);
        debtRaw = ratio.mul(collateralForDebtCalc).shrn(48).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
    } else {
        debtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    }
    let userLiquidationStatus = false;
    let postLiquidationBranchId = 0;
    if (positionTick > MIN_TICK) {
        const tickData = await program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, positionTick));
        if (tickData.isLiquidated || tickData.totalIds > position.tickId) {
            userLiquidationStatus = true;
            let [tickIdData, branches] = await Promise.all([
                program.account.tickIdLiquidation.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, positionTick, position.tickId)).catch(()=>null),
                getAllBranches({
                    vaultId,
                    program
                })
            ]);
            if (!tickIdData) {
                tickIdData = {
                    vaultId,
                    tick: positionTick,
                    tickMap: position.tickId,
                    isFullyLiquidated1: 0,
                    liquidationBranchId1: 0,
                    debtFactor1: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    isFullyLiquidated2: 0,
                    liquidationBranchId2: 0,
                    debtFactor2: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    isFullyLiquidated3: 0,
                    liquidationBranchId3: 0,
                    debtFactor3: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)
                };
            }
            const { isFullyLiquidated, branchId, connectionFactor } = getLiquidationStatus(position.tickId, tickData, tickIdData);
            postLiquidationBranchId = branchId;
            if (isFullyLiquidated) {
                return {
                    tick: MIN_TICK,
                    tickId: 0,
                    colRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    debtRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    dustDebtRaw: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    finalAmount: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                    isSupplyOnlyPosition: true,
                    userLiquidationStatus: true,
                    postLiquidationBranchId: 0
                };
            }
            const { finalTick, finalColRaw, finalDebtRaw } = processLiquidatedPosition({
                branches,
                branchId: postLiquidationBranchId,
                initialConnectionFactor: connectionFactor,
                initialDebtRaw: debtRaw
            });
            const netDebtRaw2 = finalDebtRaw.gt(dustDebtRaw) ? finalDebtRaw.sub(dustDebtRaw) : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
            return {
                tick: finalTick,
                tickId: position.tickId,
                colRaw: finalColRaw,
                debtRaw: finalDebtRaw,
                dustDebtRaw,
                finalAmount: netDebtRaw2.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)) ? finalColRaw : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
                isSupplyOnlyPosition: finalTick === MIN_TICK,
                userLiquidationStatus,
                postLiquidationBranchId
            };
        }
    }
    const netDebtRaw = debtRaw.gt(dustDebtRaw) ? debtRaw.sub(dustDebtRaw) : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    return {
        tick: positionTick,
        tickId: position.tickId,
        colRaw,
        debtRaw,
        dustDebtRaw,
        finalAmount: netDebtRaw.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)) ? colRaw : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
        isSupplyOnlyPosition: positionTick === MIN_TICK,
        userLiquidationStatus,
        postLiquidationBranchId
    };
};
async function getAllBranches({ vaultId, program }) {
    const vaultState = await program.account.vaultState.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId));
    const branchPromises = [];
    for(let i = 0; i <= vaultState.totalBranchId; i++){
        branchPromises.push(program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, i)).catch(()=>null));
    }
    const branchResults = await Promise.all(branchPromises);
    const branches = branchResults.filter((branch)=>branch !== null);
    return branches;
}
function getLiquidationStatus(positionTickId, tickData, tickIdData) {
    let isFullyLiquidated;
    let branchId;
    let connectionFactor;
    if (tickData.totalIds === positionTickId) {
        isFullyLiquidated = tickData.isFullyLiquidated === 1;
        branchId = tickData.liquidationBranchId;
        connectionFactor = tickData.debtFactor;
    } else {
        const setIndex = (positionTickId + 2) % 3;
        switch(setIndex){
            case 0:
                {
                    isFullyLiquidated = tickIdData.isFullyLiquidated1 === 1;
                    branchId = tickIdData.liquidationBranchId1;
                    connectionFactor = tickIdData.debtFactor1;
                    break;
                }
            case 1:
                {
                    isFullyLiquidated = tickIdData.isFullyLiquidated2 === 1;
                    branchId = tickIdData.liquidationBranchId2;
                    connectionFactor = tickIdData.debtFactor2;
                    break;
                }
            default:
                {
                    isFullyLiquidated = tickIdData.isFullyLiquidated3 === 1;
                    branchId = tickIdData.liquidationBranchId3;
                    connectionFactor = tickIdData.debtFactor3;
                }
        }
    }
    return {
        isFullyLiquidated,
        branchId,
        connectionFactor
    };
}
function processLiquidatedPosition({ branches, branchId, initialConnectionFactor, initialDebtRaw }) {
    let finalColRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    let finalTick;
    const branchMap = new Map(branches.map((branch)=>[
            branch.branchId,
            branch
        ]));
    let currentBranchId = branchId;
    let currentConnectionFactor = initialConnectionFactor;
    let currentBranch = branchMap.get(currentBranchId);
    if (!currentBranch) {
        throw new Error(`Branch ${currentBranchId} not found`);
    }
    while(currentBranch.status === 2){
        currentConnectionFactor = mulBigNumber(currentConnectionFactor, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](currentBranch.debtFactor.toString()));
        if (currentConnectionFactor.eq(MAX_MASK_DEBT_FACTOR)) {
            break;
        }
        currentBranchId = currentBranch.connectedBranchId;
        currentBranch = branchMap.get(currentBranchId);
        if (!currentBranch) {
            throw new Error(`Connected branch ${currentBranchId} not found`);
        }
    }
    let positionDebtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    if (currentBranch.status === 3 || currentConnectionFactor.eq(MAX_MASK_DEBT_FACTOR)) {
        positionDebtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
        finalTick = MIN_TICK;
    } else {
        positionDebtRaw = mulDivNormal(initialDebtRaw, currentBranch.debtFactor, currentConnectionFactor);
        positionDebtRaw = positionDebtRaw.gt(initialDebtRaw.div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](100))) ? positionDebtRaw.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](9999)).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1e4)) : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
        if (positionDebtRaw.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
            finalTick = currentBranch.minimaTick;
            const ratioAtTick = getRatioAtTick(finalTick);
            const ratioOneLess = ratioAtTick.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1e4)).div(TICK_SPACING);
            const ratioLength = ratioAtTick.sub(ratioOneLess);
            const finalRatio = ratioOneLess.add(ratioLength.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](currentBranch.minimaTickPartials)).div(X30));
            finalColRaw = positionDebtRaw.mul(ZERO_TICK_SCALED_RATIO).div(finalRatio);
        } else finalTick = MIN_TICK;
    }
    return {
        finalTick,
        finalColRaw,
        finalDebtRaw: positionDebtRaw
    };
}
const getFinalPosition = async ({ vaultId, currentPosition, newColAmount, newDebtAmount, program, connection, signer })=>{
    program = program ?? getVaultsProgram({
        connection,
        signer
    });
    const vaultConfig = await program.account.vaultConfig.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId));
    const { vaultSupplyExchangePrice: supplyExPrice, vaultBorrowExchangePrice: borrowExPrice } = await getExchangePrices({
        vaultId,
        vaultConfig,
        connection,
        signer
    });
    const borrowFee = vaultConfig.borrowFee;
    let { colRaw, debtRaw, dustDebtRaw } = currentPosition;
    if (newColAmount.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
        const supplyRaw = newColAmount.mul(EXCHANGE_PRICES_PRECISION).div(supplyExPrice);
        colRaw = colRaw.add(supplyRaw);
    } else if (newColAmount.lt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
        let withdrawRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
        if (newColAmount.gt(MIN_I128$1)) {
            withdrawRaw = newColAmount.abs().mul(EXCHANGE_PRICES_PRECISION).div(supplyExPrice).sub(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
            colRaw = colRaw.sub(withdrawRaw);
        } else if (newColAmount.eq(MIN_I128$1)) {
            withdrawRaw = colRaw.mul(supplyExPrice).div(EXCHANGE_PRICES_PRECISION).mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](-1)).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
            colRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
        } else {
            throw new Error("Invalid newColAmount");
        }
    }
    if (newDebtAmount.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
        const borrowRaw = newDebtAmount.mul(EXCHANGE_PRICES_PRECISION).div(borrowExPrice).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
        const feeAmount = borrowRaw.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](borrowFee)).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1e4));
        const borrowAmountWithFee = borrowRaw.add(feeAmount);
        debtRaw = debtRaw.add(borrowAmountWithFee);
    } else if (newDebtAmount.lt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
        if (newDebtAmount.gt(MIN_I128$1)) {
            const payback_amount = newDebtAmount.abs().mul(EXCHANGE_PRICES_PRECISION).div(borrowExPrice).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
            debtRaw = debtRaw.sub(payback_amount);
        } else if (newDebtAmount.eq(MIN_I128$1)) {
            debtRaw = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
        } else {
            throw new Error("Invalid newDebtAmount");
        }
    }
    const netDebtRaw = debtRaw.gt(dustDebtRaw) ? debtRaw.sub(dustDebtRaw) : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0);
    let finalTick;
    let isSupplyOnlyPosition;
    if (netDebtRaw.eq(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)) || colRaw.eq(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0))) {
        finalTick = MIN_TICK;
        isSupplyOnlyPosition = true;
    } else {
        const marginAdjustedDebt = netDebtRaw.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1000000001)).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1e9)).add(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](1));
        const ratio = marginAdjustedDebt.mul(ZERO_TICK_SCALED_RATIO).div(colRaw);
        const baseTickAtRatio = getTickAtRatio(ratio);
        finalTick = baseTickAtRatio + 1;
        if (finalTick < MIN_TICK) {
            finalTick = MIN_TICK;
        } else if (finalTick > MAX_TICK) {
            finalTick = MAX_TICK;
        }
        isSupplyOnlyPosition = false;
    }
    return {
        tick: finalTick,
        tickId: currentPosition.tickId,
        colRaw,
        debtRaw,
        dustDebtRaw,
        finalAmount: netDebtRaw.gt(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)) ? colRaw : new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
        isSupplyOnlyPosition
    };
};
async function loadRelevantBranches(vaultId, vaultState, liquidationStatus, postLiquidationBranchId, program) {
    const addedBranchIds = /* @__PURE__ */ new Set();
    const currentBranchId = postLiquidationBranchId > 0 ? postLiquidationBranchId : vaultState.currentBranchId;
    let connectedBranchId = 0;
    if (currentBranchId > 0) {
        try {
            const currentBranch = await program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, currentBranchId));
            if (currentBranch) {
                addedBranchIds.add(currentBranch.branchId);
                connectedBranchId = currentBranch.connectedBranchId;
            }
        } catch (error) {
            console.warn(`Failed to fetch current branch ${currentBranchId}:`, error);
        }
    }
    if (liquidationStatus) {
        while(connectedBranchId > 0){
            try {
                const connectedBranch = await program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, connectedBranchId));
                if (connectedBranch) {
                    if (!addedBranchIds.has(connectedBranch.branchId)) addedBranchIds.add(connectedBranch.branchId);
                    connectedBranchId = connectedBranch.connectedBranchId;
                } else break;
            } catch (error) {
                console.warn(`Failed to fetch connected branch ${connectedBranchId}:`, error);
                break;
            }
        }
        if (!addedBranchIds.has(0)) addedBranchIds.add(0);
    }
    return [
        ...addedBranchIds
    ];
}
async function loadRelevantTicksHasDebtArrays(vaultId, topTick, existingPositionTick, finalTick, program) {
    const tickHasDebtArrays = /* @__PURE__ */ new Set();
    if (existingPositionTick == topTick) {
        let nextTickWithDebt = await findNextTickWithDebt(vaultId, topTick, program);
        let { arrayIndex: startIndex } = getTickIndices(nextTickWithDebt);
        let { arrayIndex: endIndex } = getTickIndices(topTick);
        let { arrayIndex: finalTickIndex } = getTickIndices(finalTick);
        let finalTickHasDebtPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, finalTickIndex);
        tickHasDebtArrays.add(finalTickHasDebtPda);
        if (endIndex < 15) endIndex++;
        try {
            for(let arrIdx = startIndex; arrIdx <= endIndex; arrIdx++)tickHasDebtArrays.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, arrIdx));
        } catch (error) {
            console.warn(`Error finding next tick with debt:`, error);
        }
    } else {
        let { arrayIndex: finalTickIndex } = getTickIndices(finalTick);
        let { arrayIndex: existingPositionTickIndex } = getTickIndices(existingPositionTick);
        tickHasDebtArrays.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, finalTickIndex));
        tickHasDebtArrays.add((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, existingPositionTickIndex));
    }
    return [
        ...tickHasDebtArrays
    ];
}
async function getExchangePrices({ vaultId, vaultConfig, connection, signer }) {
    const program = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Program"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["v"], {
        connection
    });
    const ix = await program.methods.getExchangePrices().accounts({
        vaultState: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId),
        vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
        supplyTokenReserves: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$BzG5ldOV$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultConfig.supplyToken),
        borrowTokenReserves: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$BzG5ldOV$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultConfig.borrowToken)
    }).instruction();
    const transaction = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Transaction"]().add(ix);
    const latestBlockHash = await connection.getLatestBlockhash();
    transaction.recentBlockhash = latestBlockHash.blockhash;
    transaction.feePayer = signer;
    const raw = await connection.simulateTransaction(transaction);
    if (raw.value.err && raw.value.err === "InvalidAccountForFee" && signer.toBase58() !== "HEyJLdMfZhhQ7FHCtjD5DWDFNFQhaeAVAsHeWqoY6dSD") {
        return await getExchangePrices({
            vaultId,
            vaultConfig,
            connection,
            signer: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"]("HEyJLdMfZhhQ7FHCtjD5DWDFNFQhaeAVAsHeWqoY6dSD")
        });
    }
    const returnLog = raw.value.logs?.find((log)=>log.startsWith("Program return:"));
    if (!returnLog) {
        let error = new Error("No return data found in logs");
        error.simulation = raw.value;
        throw error;
    }
    const base64Data = returnLog.split(" ")[3];
    const buffer = Buffer.from(base64Data, "base64");
    const liquiditySupplyExchangePrice = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](buffer.subarray(0, 16), "le");
    const liquidityBorrowExchangePrice = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](buffer.subarray(16, 32), "le");
    const vaultSupplyExchangePrice = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](buffer.subarray(32, 48), "le");
    const vaultBorrowExchangePrice = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](buffer.subarray(48, 64), "le");
    return {
        liquiditySupplyExchangePrice,
        liquidityBorrowExchangePrice,
        vaultSupplyExchangePrice,
        vaultBorrowExchangePrice
    };
}
async function loadRelevantTicksHasDebtArraysLiquidate(vaultId, topTick, nextTick, program) {
    const { arrayIndex: topTickIndex } = getTickIndices(topTick);
    const { arrayIndex: nextTickIndex } = getTickIndices(nextTick);
    const promises = [];
    for(let arrIdx = topTickIndex; arrIdx >= nextTickIndex; arrIdx--){
        promises.push(program.account.tickHasDebtArray.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, arrIdx)));
    }
    const results = await Promise.allSettled(promises);
    const tickHasDebtArrays = results.filter((result)=>result.status === "fulfilled").map((result)=>result.value);
    return tickHasDebtArrays;
}
async function loadRelevantBranchesForLiquidate(vaultId, vaultState, program) {
    const branches = [];
    const currentBranchId = vaultState.currentBranchId;
    if (currentBranchId > 0) {
        try {
            const currentBranch = await program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, currentBranchId));
            if (currentBranch) branches.push(currentBranch);
        } catch (error) {
            console.warn(`Failed to fetch current branch ${currentBranchId}:`, error);
        }
    }
    let connectedBranchId = branches[0].connectedBranchId;
    const doesBranchExist = (branchId)=>branches.some((b)=>b.branchId === branchId);
    while(!doesBranchExist(connectedBranchId)){
        try {
            const connectedBranch = await program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, connectedBranchId));
            connectedBranchId = connectedBranch.connectedBranchId;
            if (connectedBranch) branches.push(connectedBranch);
        } catch (error) {
            console.warn(`Failed to fetch connected branch ${connectedBranchId}:`, error);
        }
    }
    if (!doesBranchExist(0)) branches.push({
        branchId: 0
    });
    return branches;
}
async function readOraclePrice({ connection, signer, oracle: oracle$1 }) {
    const program = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Program"](oracle, new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$provider$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["AnchorProvider"](connection, {
        signTransaction () {
            throw new Error("Not implemented");
        },
        signAllTransactions () {
            throw new Error("Not implemented");
        },
        publicKey: signer ?? new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"]("HEyJLdMfZhhQ7FHCtjD5DWDFNFQhaeAVAsHeWqoY6dSD")
    }));
    const oracleData = await program.account.oracle.fetch(oracle$1);
    let remainingAccounts = [];
    for (const source of oracleData.sources){
        remainingAccounts.push({
            pubkey: source.source,
            isWritable: false,
            isSigner: false
        });
    }
    const [oraclePriceOperate, oraclePriceLiquidate] = await Promise.all([
        program.methods.getExchangeRateOperate(oracleData.nonce).accounts({
            oracle: oracle$1
        }).remainingAccounts(remainingAccounts).view(),
        program.methods.getExchangeRateLiquidate(oracleData.nonce).accounts({
            oracle: oracle$1
        }).remainingAccounts(remainingAccounts).view()
    ]);
    return {
        oraclePriceOperate,
        oraclePriceLiquidate,
        oracleSources: oracleData.sources
    };
}
const MPL_TOKEN_METADATA_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"]("metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s");
const LIQUIDITY_PROGRAM_ID = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$CioR9$2d$te$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["l"].address);
const MIN_I128 = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"]("170141183460469231731687303715884105728").neg();
async function getOtherInstructionsOperate(vaultId, vaultState, currentPosition, finalPosition, currentTick, program, signer) {
    const otherIxs = [];
    const tickToRead = [
        currentTick
    ];
    let currentTickData;
    let finalTickData;
    tickToRead.push(currentPosition.tick);
    tickToRead.push(finalPosition.tick);
    if (tickToRead.length > 0) {
        const tickData = await program.account.tick.fetchMultiple(tickToRead.map((tick)=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tick)));
        currentTickData = tickData[0];
        finalTickData = tickData[2];
        for (const [i, tickDatum] of tickData.entries()){
            if (!tickDatum) {
                const ix = await program.methods.initTick(vaultId, tickToRead[i]).accounts(getInitTickContext(vaultId, tickToRead[i], signer)).instruction();
                otherIxs.push(ix);
            }
        }
    }
    let newBranchId;
    if (vaultState.branchLiquidated) {
        newBranchId = vaultState.totalBranchId + 1;
        const newBranchData = await program.account.branch.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, newBranchId));
        if (!newBranchData) {
            const ix = await program.methods.initBranch(vaultId, newBranchId).accounts(getInitBranchContext(vaultId, newBranchId, signer)).instruction();
            otherIxs.push(ix);
        }
    } else {
        newBranchId = vaultState.currentBranchId;
    }
    const newBranchPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, newBranchId);
    const currentTickIdDataPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, currentTick, currentTickData ? currentTickData.totalIds : 0);
    const tickIdsToRead = [
        {
            tick: currentTick,
            totalIds: currentTickData ? currentTickData.totalIds : 0
        }
    ];
    const finalTickIdDataPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, finalPosition.tick, finalTickData ? finalTickData.totalIds : 0);
    if (finalPosition.tick !== currentTick) if (finalTickData) {
        tickIdsToRead.push({
            tick: finalPosition.tick,
            totalIds: finalTickData.totalIds
        });
    } else {
        const context = await getInitTickIdLiquidationContext(vaultId, finalPosition.tick, signer, program);
        const ix = await program.methods.initTickIdLiquidation(vaultId, finalPosition.tick, 0).accounts(context).instruction();
        otherIxs.push(ix);
    }
    const tickIdData = await program.account.tickIdLiquidation.fetchMultiple(tickIdsToRead.map(({ tick, totalIds })=>(0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, tick, totalIds)));
    if (tickIdData.length > 0) {
        for (const [i, tickIdDatum] of tickIdData.entries()){
            if (!tickIdDatum) {
                const ix = await program.methods.initTickIdLiquidation(vaultId, tickIdsToRead[i].tick, tickIdsToRead[i].totalIds).accounts(await getInitTickIdLiquidationContext(vaultId, tickIdsToRead[i].tick, signer, program)).instruction();
                otherIxs.push(ix);
            }
        }
    }
    return {
        otherIxs,
        newBranchPda,
        currentTickIdDataPda,
        finalTickIdDataPda
    };
}
const tickHelper = (tickValue)=>{
    return tickValue === 0 ? INIT_TICK : tickValue;
};
async function getRemainingAccountsOperate(vaultId, vaultState, vaultConfig, finalPositionTick, existingPositionTick, liquidationStatus, postLiquidationBranchId, program) {
    const remainingAccounts = [];
    const oracleProgram = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$node_modules$2f40$coral$2d$xyz$2f$anchor$2f$dist$2f$esm$2f$program$2f$index$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["Program"](oracle, program.provider);
    const [oracleData, branches, tickHasDebt] = await Promise.all([
        oracleProgram.account.oracle.fetch(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](vaultConfig.oracle)),
        // Add branch accounts (next 10 remaining accounts)
        loadRelevantBranches(vaultId, vaultState, liquidationStatus, postLiquidationBranchId, program),
        loadRelevantTicksHasDebtArrays(vaultId, tickHelper(vaultState.topmostTick), existingPositionTick, finalPositionTick, program)
    ]);
    const sourceLength = oracleData.sources.length;
    for (const source of oracleData.sources)remainingAccounts.push({
        pubkey: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](source.source),
        isWritable: false,
        isSigner: false
    });
    const branchLength = branches.length;
    for (const branch of branches){
        remainingAccounts.push({
            pubkey: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, branch),
            isWritable: true,
            isSigner: false
        });
    }
    const tickHasDebtLength = tickHasDebt.length;
    for (const tickHasDebtArray of tickHasDebt)remainingAccounts.push({
        pubkey: tickHasDebtArray,
        isWritable: true,
        isSigner: false
    });
    const remainingAccountsIndices = [
        sourceLength,
        branchLength,
        tickHasDebtLength
    ];
    return {
        remainingAccounts,
        remainingAccountsIndices
    };
}
async function getOperateContext({ vaultId, positionId, program, connection, signer, positionOwner = signer, colAmount: newCol, debtAmount: newDebt, recipient }) {
    program = program ?? getVaultsProgram({
        connection,
        signer
    });
    const [vaultState, vaultConfig, vaultMetadata] = await Promise.all([
        program.account.vaultState.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId)),
        program.account.vaultConfig.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
        program.account.vaultMetadata.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["j"])(vaultId))
    ]);
    const [supplyTokenProgram, borrowTokenProgram] = await Promise.all([
        getAccountOwner(vaultConfig.supplyToken, connection),
        getAccountOwner(vaultConfig.borrowToken, connection)
    ]);
    const vaultSupplyDecimals = vaultMetadata.supplyMintDecimals;
    const vaultBorrowDecimals = vaultMetadata.borrowMintDecimals;
    if (newCol.gt(MIN_I128)) {
        const decimalsDelta = vaultSupplyDecimals < 9 ? 9 - vaultSupplyDecimals : 0;
        newCol = newCol.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](decimalsDelta)));
    }
    if (newDebt.gt(MIN_I128)) {
        const decimalsDelta = vaultBorrowDecimals < 9 ? 9 - vaultBorrowDecimals : 0;
        newDebt = newDebt.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](decimalsDelta)));
    }
    const positionData = positionId === 0 ? {
        nftId: vaultState.nextPositionId,
        positionMint: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](0),
        isSupplyOnlyPosition: 1,
        tick: -2147483648,
        tickId: 0,
        lastUpdateTimestamp: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
        supplyAmount: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0),
        dustDebtAmount: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0)
    } : await program.account.position.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(vaultId, positionId));
    let existingPositionTick = positionData.tick;
    const currentPosition = await getCurrentPositionState({
        vaultId,
        position: positionData,
        program
    });
    if (existingPositionTick === -2147483648) {
        existingPositionTick = currentPosition.tick;
    }
    const currentPositionTickPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, existingPositionTick);
    const finalPosition = await getFinalPosition({
        vaultId,
        currentPosition,
        newColAmount: newCol,
        newDebtAmount: newDebt,
        program,
        connection,
        signer
    });
    const { otherIxs, newBranchPda, currentTickIdDataPda, finalTickIdDataPda } = await getOtherInstructionsOperate(vaultId, vaultState, currentPosition, finalPosition, existingPositionTick, program, signer);
    const { remainingAccounts, remainingAccountsIndices } = await getRemainingAccountsOperate(vaultId, vaultState, vaultConfig, finalPosition.tick, existingPositionTick, currentPosition.userLiquidationStatus, currentPosition.postLiquidationBranchId, program);
    const accounts = {
        signer,
        signerSupplyTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.supplyToken, signer, false, supplyTokenProgram),
        signerBorrowTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.borrowToken, signer, false, borrowTokenProgram),
        recipient: recipient ?? null,
        recipientSupplyTokenAccount: recipient ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.supplyToken, recipient, false, supplyTokenProgram) : null,
        recipientBorrowTokenAccount: recipient ? (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.borrowToken, recipient, false, borrowTokenProgram) : null,
        vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
        vaultState: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId),
        supplyToken: vaultConfig.supplyToken,
        borrowToken: vaultConfig.borrowToken,
        oracle: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](vaultConfig.oracle),
        position: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(vaultId, positionData.nftId),
        positionTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["p"])(vaultId, positionData.nftId, positionOwner),
        currentPositionTick: currentPositionTickPda,
        finalPositionTick: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, finalPosition.tick),
        currentPositionTickId: currentTickIdDataPda,
        finalPositionTickId: finalTickIdDataPda,
        newBranch: newBranchPda,
        supplyTokenReservesLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["o"])(vaultConfig.supplyToken),
        borrowTokenReservesLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["o"])(vaultConfig.borrowToken),
        vaultSupplyPositionOnLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(vaultConfig.supplyToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
        vaultBorrowPositionOnLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["m"])(vaultConfig.borrowToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
        supplyRateModel: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["l"])(vaultConfig.supplyToken),
        borrowRateModel: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["l"])(vaultConfig.borrowToken),
        supplyTokenClaimAccount: null,
        borrowTokenClaimAccount: null,
        liquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(),
        liquidityProgram: LIQUIDITY_PROGRAM_ID,
        vaultSupplyTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.supplyToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(), true, supplyTokenProgram),
        vaultBorrowTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.borrowToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(), true, borrowTokenProgram),
        oracleProgram: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](vaultConfig.oracleProgram),
        supplyTokenProgram,
        borrowTokenProgram,
        associatedTokenProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$constants$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ASSOCIATED_TOKEN_PROGRAM_ID"],
        systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId
    };
    return {
        nftId: positionData.nftId,
        accounts,
        remainingAccounts,
        initPositionIx: positionId === 0 ? await program.methods.initPosition(vaultId, positionData.nftId).accounts(getInitPositionContext(vaultId, positionData.nftId, signer)).instruction() : null,
        otherIxs,
        remainingAccountsIndices,
        lookupTable: vaultMetadata.lookupTable
    };
}
async function getInitPositionIx({ vaultId, connection, signer }) {
    const program = getVaultsProgram({
        connection,
        signer
    });
    const vaultState = await program.account.vaultState.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId));
    return {
        ix: await program.methods.initPosition(vaultId, vaultState.nextPositionId).accounts(getInitPositionContext(vaultId, vaultState.nextPositionId, signer)).instruction(),
        nftId: vaultState.nextPositionId
    };
}
function getInitPositionContext(vaultId, positionId, signer) {
    return {
        signer,
        vaultAdmin: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["g"])(),
        vaultState: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId),
        position: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["c"])(vaultId, positionId),
        positionMint: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["r"])(vaultId, positionId),
        positionTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["p"])(vaultId, positionId, signer),
        tokenProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$constants$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["TOKEN_PROGRAM_ID"],
        metadataAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["q"])(vaultId, positionId),
        associatedTokenProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$constants$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ASSOCIATED_TOKEN_PROGRAM_ID"],
        systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId,
        sysvarInstruction: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SYSVAR_INSTRUCTIONS_PUBKEY"],
        metadataProgram: MPL_TOKEN_METADATA_PROGRAM_ID,
        rent: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SYSVAR_RENT_PUBKEY"]
    };
}
const getOperateIx = async ({ vaultId, positionId, colAmount, debtAmount, connection, signer, recipient, positionOwner })=>{
    const program = getVaultsProgram({
        connection,
        signer
    });
    const { accounts, remainingAccounts, remainingAccountsIndices, initPositionIx, otherIxs, lookupTable, nftId } = await getOperateContext({
        vaultId,
        positionId,
        colAmount,
        debtAmount,
        signer,
        positionOwner,
        connection,
        recipient,
        program
    });
    const [operateIx, addressLookupTable] = await Promise.all([
        program.methods.operate(colAmount, debtAmount, {
            direct: {}
        }, Buffer.from(remainingAccountsIndices)).accounts(accounts).remainingAccounts(remainingAccounts).instruction(),
        connection.getAddressLookupTable(lookupTable)
    ]);
    return {
        nftId,
        accounts,
        remainingAccounts,
        remainingAccountsIndices,
        addressLookupTableAddresses: lookupTable ? [
            lookupTable
        ] : [],
        addressLookupTableAccounts: addressLookupTable.value ? [
            addressLookupTable.value
        ] : [],
        ixs: initPositionIx ? [
            initPositionIx,
            ...otherIxs,
            operateIx
        ] : [
            ...otherIxs,
            operateIx
        ]
    };
};
function getInitBranchContext(vaultId, branchId, signer) {
    return {
        signer,
        vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
        branch: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, branchId),
        systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId
    };
}
function getInitTickContext(vaultId, tick, signer) {
    return {
        signer,
        vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
        tickData: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tick),
        systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId
    };
}
async function getInitTickIdLiquidationContext(vaultId, tick, signer, program) {
    const tickData = await program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tick)).catch(()=>null);
    if (!tickData) {
        return {
            signer,
            vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
            tickIdLiquidation: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, tick, 0),
            tickData: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tick),
            systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId
        };
    }
    return {
        signer,
        vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
        tickIdLiquidation: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"])(vaultId, tick, tickData.totalIds),
        tickData: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tick),
        systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId
    };
}
async function getLiquidateContext({ vaultId, to, program, connection, signer }) {
    program = program ?? getVaultsProgram({
        connection,
        signer
    });
    const [vaultState, vaultConfig, vaultMetadata] = await Promise.all([
        program.account.vaultState.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId)),
        program.account.vaultConfig.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
        program.account.vaultMetadata.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["j"])(vaultId))
    ]);
    const [supplyTokenProgram, borrowTokenProgram] = await Promise.all([
        getAccountOwner(vaultConfig.supplyToken, connection),
        getAccountOwner(vaultConfig.borrowToken, connection)
    ]);
    const { arrayIndex } = getTickIndices(vaultState.topmostTick);
    let { otherIxs, newBranchPda } = await getOtherInstructionsLiquidate(vaultId, vaultState, program, signer);
    const { remainingAccounts, remainingAccountsIndices, otherIxs: finalOtherIxs } = await getRemainingAccountsLiquidate(vaultId, vaultState, vaultConfig, otherIxs, program, connection, signer);
    return {
        accounts: {
            signer,
            signerTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.borrowToken, signer, false, borrowTokenProgram),
            to,
            toTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.supplyToken, to, false, supplyTokenProgram),
            vaultAdmin: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["g"])(),
            vaultConfig: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId),
            vaultState: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"])(vaultId),
            supplyToken: vaultConfig.supplyToken,
            borrowToken: vaultConfig.borrowToken,
            oracle: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](vaultConfig.oracle),
            tickHasDebt: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, arrayIndex),
            newBranch: newBranchPda,
            supplyTokenReservesLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["o"])(vaultConfig.supplyToken),
            borrowTokenReservesLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["o"])(vaultConfig.borrowToken),
            vaultSupplyPositionOnLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["n"])(vaultConfig.supplyToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
            vaultBorrowPositionOnLiquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["m"])(vaultConfig.borrowToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
            supplyRateModel: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["l"])(vaultConfig.supplyToken),
            borrowRateModel: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["l"])(vaultConfig.borrowToken),
            supplyTokenClaimAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["s"])(vaultConfig.supplyToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
            borrowTokenClaimAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["s"])(vaultConfig.borrowToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["f"])(vaultId)),
            liquidity: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(),
            liquidityProgram: LIQUIDITY_PROGRAM_ID,
            vaultSupplyTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.supplyToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(), true, supplyTokenProgram),
            vaultBorrowTokenAccount: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$state$2f$mint$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["getAssociatedTokenAddressSync"])(vaultConfig.borrowToken, (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["k"])(), true, borrowTokenProgram),
            oracleProgram: new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["PublicKey"](vaultConfig.oracleProgram),
            supplyTokenProgram,
            borrowTokenProgram,
            systemProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$web3$2e$js$2f$lib$2f$index$2e$esm$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["SystemProgram"].programId,
            associatedTokenProgram: __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$solana$2f$spl$2d$token$2f$lib$2f$esm$2f$constants$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["ASSOCIATED_TOKEN_PROGRAM_ID"]
        },
        remainingAccounts,
        otherIxs: finalOtherIxs,
        remainingAccountsIndices,
        lookupTable: vaultMetadata.lookupTable
    };
}
const getLiquidateIx = async ({ vaultId, debtAmount, colPerUnitDebt = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](0), absorb = false, signer, to = signer, connection })=>{
    const program = getVaultsProgram({
        connection,
        signer
    });
    const { accounts, remainingAccounts, remainingAccountsIndices, otherIxs, lookupTable } = await getLiquidateContext({
        vaultId,
        to,
        program,
        signer,
        connection
    });
    const ixs = [];
    if (otherIxs.length > 0) {
        ixs.push(...otherIxs);
    }
    const [ix, addressLookupTable] = await Promise.all([
        program.methods.liquidate(debtAmount, colPerUnitDebt, absorb, {
            direct: {}
        }, Buffer.from(remainingAccountsIndices)).accounts(accounts).remainingAccounts(remainingAccounts).instruction(),
        connection.getAddressLookupTable(lookupTable)
    ]);
    ixs.push(ix);
    return {
        accounts,
        remainingAccounts,
        remainingAccountsIndices,
        ixs,
        addressLookupTableAddresses: lookupTable ? [
            lookupTable
        ] : [],
        addressLookupTableAccounts: addressLookupTable.value ? [
            addressLookupTable.value
        ] : []
    };
};
async function getOtherInstructionsLiquidate(vaultId, vaultState, program, signer) {
    const otherIxs = [];
    let newBranchId = vaultState.branchLiquidated === 1 ? vaultState.totalBranchId + 1 : vaultState.currentBranchId;
    let newBranchPda = (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, newBranchId);
    const [newBranchData, tickData] = await Promise.all([
        program.account.branch.fetch(newBranchPda).catch(()=>null),
        // might be possible that liquidation ends on a tick that is not initialized
        program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, vaultState.topmostTick)).catch(()=>null)
    ]);
    if (!newBranchData) {
        const ix = await program.methods.initBranch(vaultId, newBranchId).accounts(getInitBranchContext(vaultId, newBranchId, signer)).instruction();
        otherIxs.push(ix);
    }
    if (!tickData) {
        const ix = await program.methods.initTick(vaultId, vaultState.topmostTick).accounts(getInitTickContext(vaultId, vaultState.topmostTick, signer)).instruction();
        otherIxs.push(ix);
    }
    return {
        otherIxs,
        newBranchPda
    };
}
async function loadRelevantTicksForLiquidate(vaultId, vaultState, liquidationTick, program) {
    const ticks = [];
    let topTick = vaultState.topmostTick;
    if (topTick > liquidationTick) try {
        const topTickData = await program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, topTick));
        if (topTickData) ticks.push({
            ...topTickData,
            tick: topTick
        });
    } catch  {}
    let nextTick = MIN_TICK$1;
    try {
        nextTick = await findNextTickWithDebt(vaultId, topTick, program);
    } catch  {}
    const doesTickExist = (tick)=>ticks.some((t)=>t.tick === tick);
    while(nextTick > liquidationTick && !doesTickExist(nextTick)){
        try {
            const nextTickData = await program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, nextTick));
            if (nextTickData) ticks.push({
                ...nextTickData,
                tick: nextTick
            });
            else throw new Error("Tick not found to load");
            nextTick = await findNextTickWithDebt(vaultId, nextTick, program);
        } catch  {}
    }
    return {
        ticks,
        nextTick
    };
}
async function getRemainingAccountsLiquidate(vaultId, vaultState, vaultConfig, otherIxs, program, connection, signer) {
    const remainingAccounts = [];
    const { oraclePriceLiquidate, oracleSources } = await readOraclePrice({
        oracle: vaultConfig.oracle,
        connection
    });
    const liquidationRatio = new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](oraclePriceLiquidate).mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](281474976710656)).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](15)));
    const liquidationThresholdRatio = liquidationRatio.mul(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](vaultConfig.liquidationThreshold)).div(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](10).pow(new __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$bn$2e$js$2f$lib$2f$bn$2e$js__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["default"](3)));
    const liquidationTick = getTickAtRatio(liquidationThresholdRatio);
    for (const source of oracleSources){
        remainingAccounts.push({
            pubkey: source.source,
            isWritable: false,
            isSigner: false
        });
    }
    const [branches, { ticks: tickAccounts, nextTick }] = await Promise.all([
        loadRelevantBranchesForLiquidate(vaultId, vaultState, program),
        loadRelevantTicksForLiquidate(vaultId, vaultState, liquidationTick, program)
    ]);
    const tickHasDebt = await loadRelevantTicksHasDebtArraysLiquidate(vaultId, vaultState.topmostTick, nextTick, program);
    for (const branch of branches){
        remainingAccounts.push({
            pubkey: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["h"])(vaultId, branch.branchId),
            isWritable: true,
            isSigner: false
        });
    }
    const tickToInit = [];
    const existingTicks = await Promise.all(tickAccounts.map((tickData)=>program.account.tick.fetch((0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tickData.tick)).catch(()=>null)));
    const initInstructions = await Promise.all(tickAccounts.map(async (tickData, index)=>{
        const existingTick = existingTicks[index];
        if (!existingTick && !tickToInit.includes(tickData.tick)) {
            tickToInit.push(tickData.tick);
            return program.methods.initTick(vaultId, tickData.tick).accounts(getInitTickContext(vaultId, tickData.tick, signer)).instruction();
        }
        return null;
    }));
    for (const ix of initInstructions){
        if (ix) {
            otherIxs.push(ix);
        }
    }
    for (const tickData of tickAccounts){
        remainingAccounts.push({
            pubkey: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["d"])(vaultId, tickData.tick),
            isWritable: true,
            isSigner: false
        });
    }
    for (const tickHasDebtArray of tickHasDebt){
        remainingAccounts.push({
            pubkey: (0, __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$C2$2d$jCLFw$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["a"])(vaultId, tickHasDebtArray.index),
            isWritable: true,
            isSigner: false
        });
    }
    const remainingAccountsIndices = [
        oracleSources.length,
        branches.length,
        tickAccounts.length,
        tickHasDebt.length
    ];
    return {
        remainingAccounts,
        otherIxs,
        remainingAccountsIndices
    };
}
;
}),
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.yP9-PjAh.mjs [app-ssr] (ecmascript) <export i as getCurrentPosition>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getCurrentPosition",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$yP9$2d$PjAh$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["i"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$yP9$2d$PjAh$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.yP9-PjAh.mjs [app-ssr] (ecmascript)");
}),
"[project]/node_modules/@jup-ag/lend/dist/shared/lend.yP9-PjAh.mjs [app-ssr] (ecmascript) <export e as getOperateIx>", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "getOperateIx",
    ()=>__TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$yP9$2d$PjAh$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__["e"]
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$jup$2d$ag$2f$lend$2f$dist$2f$shared$2f$lend$2e$yP9$2d$PjAh$2e$mjs__$5b$app$2d$ssr$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/@jup-ag/lend/dist/shared/lend.yP9-PjAh.mjs [app-ssr] (ecmascript)");
}),
];

//# sourceMappingURL=node_modules_%40jup-ag_lend_dist_shared_87cef217._.js.map